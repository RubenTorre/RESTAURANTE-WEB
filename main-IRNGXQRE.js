import{a as N,b as R,c as F,d as v,g as j}from"./chunk-VN7H7UFS.js";import{a as G}from"./chunk-X6SM4UVF.js";import{b as W,c as O,d as B,e as U,f as D,g as A,o as q,q as H}from"./chunk-DS7KNDYW.js";import{a as X}from"./chunk-OH4UTAUL.js";import{l as I,r as T}from"./chunk-6BCYE2FI.js";import{Ba as h,Db as k,Ga as w,La as b,Nb as Y,Sa as p,Ta as E,Va as r,W as d,Wa as a,X as c,Xa as u,_a as P,cb as f,db as m,kb as g,ob as C,pb as x,qb as y,wa as l}from"./chunk-UZPGQPCC.js";import"./chunk-EOG6CNDG.js";import{g as Q,i as V}from"./chunk-CSTXWUWE.js";var S=class o{constructor(i){this.router=i}ngOnInit(){setTimeout(()=>{this.router.navigate(["/login"])},3e3)}static \u0275fac=function(e){return new(e||o)(h(v))};static \u0275cmp=w({type:o,selectors:[["app-splash"]],decls:3,vars:0,consts:[[1,"splash-container"],[1,"splash-logo"],["src","assets/splash/logo.jpg","alt","Logo"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1),u(2,"img",2),a()())},styles:[".splash-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#000;overflow:hidden}.splash-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}"]})};var _=Q(X());function ee(o,i){o&1&&(r(0,"span"),g(1,"Iniciar Sesi\xF3n"),a())}function te(o,i){o&1&&u(0,"span",21)}function ie(o,i){if(o&1){let e=P();r(0,"div",9),f("click",function(t){return d(e),c(t.stopPropagation())}),r(1,"h2",10),g(2,"Iniciar Sesi\xF3n"),a(),r(3,"form",11),f("ngSubmit",function(){d(e);let t=m();return c(t.login())}),r(4,"div",12)(5,"input",13),y("ngModelChange",function(t){d(e);let s=m();return x(s.username,t)||(s.username=t),c(t)}),a()(),r(6,"div",14)(7,"input",15),y("ngModelChange",function(t){d(e);let s=m();return x(s.password,t)||(s.password=t),c(t)}),a()(),r(8,"button",16),b(9,ee,2,0,"span",17)(10,te,1,0,"span",18),a(),r(11,"div",19),g(12," \xBFNo tienes cuenta? "),r(13,"a",20),f("click",function(){d(e);let t=m();return c(!t.isLoading&&t.toggleForm())}),g(14," Reg\xEDstrate "),a()()()()}if(o&2){let e=m();l(5),C("ngModel",e.username),p("disabled",e.isLoading),l(2),C("ngModel",e.password),p("disabled",e.isLoading),l(),p("disabled",e.isLoading),l(),p("ngIf",!e.isLoading),l(),p("ngIf",e.isLoading)}}function oe(o,i){o&1&&(r(0,"span"),g(1,"Registrarse"),a())}function re(o,i){o&1&&u(0,"span",21)}function ne(o,i){if(o&1){let e=P();r(0,"div",22),f("click",function(t){return d(e),c(t.stopPropagation())}),r(1,"h2",10),g(2,"Registro"),a(),r(3,"form",11),f("ngSubmit",function(){d(e);let t=m();return c(t.register())}),r(4,"div",12)(5,"input",23),y("ngModelChange",function(t){d(e);let s=m();return x(s.registerUsername,t)||(s.registerUsername=t),c(t)}),a()(),r(6,"div",12)(7,"input",24),y("ngModelChange",function(t){d(e);let s=m();return x(s.registerEmail,t)||(s.registerEmail=t),c(t)}),a()(),r(8,"div",14)(9,"input",15),y("ngModelChange",function(t){d(e);let s=m();return x(s.registerPassword,t)||(s.registerPassword=t),c(t)}),a()(),r(10,"button",16),b(11,oe,2,0,"span",17)(12,re,1,0,"span",18),a(),r(13,"div",19),g(14," \xBFYa tienes cuenta? "),r(15,"a",20),f("click",function(){d(e);let t=m();return c(!t.isLoading&&t.toggleForm())}),g(16," Iniciar sesi\xF3n "),a()()()()}if(o&2){let e=m();l(5),C("ngModel",e.registerUsername),p("disabled",e.isLoading),l(2),C("ngModel",e.registerEmail),p("disabled",e.isLoading),l(2),C("ngModel",e.registerPassword),p("disabled",e.isLoading),l(),p("disabled",e.isLoading),l(),p("ngIf",!e.isLoading),l(),p("ngIf",e.isLoading)}}var L=class o{constructor(i,e,n){this.supabaseService=i;this.router=e;this.userService=n}showLogin=!0;username="";password="";registerUsername="";registerEmail="";registerPassword="";isLoading=!1;error="";nombreUsuario="";toggleForm(){this.showLogin=!this.showLogin}login(){return V(this,null,function*(){this.isLoading=!0,this.error="";try{let i=yield this.supabaseService.login(this.username,this.password);if(i.error){yield _.default.fire({icon:"error",title:"Verifica",text:i.error,confirmButtonColor:"#facc15"});return}let e=i.data;if(!e||!e.user||!e.profile){yield _.default.fire({icon:"error",title:"Error",text:"No se pudo obtener el usuario o su perfil.",confirmButtonColor:"#facc15"});return}let{user:n,profile:t}=e,s=t.nombre||n.email;this.userService.setNombreUsuario(s),this.userService.setRolUsuario(t.rol),this.router.navigate(["/dashboard"])}catch(i){console.error("Error inesperado en login:",i),yield _.default.fire({icon:"error",title:"Error inesperado",text:i.message||"Ha ocurrido un error.",confirmButtonColor:"#facc15"})}finally{this.isLoading=!1}})}register(){return V(this,null,function*(){this.isLoading=!0,this.error="";try{let i=yield this.supabaseService.register(this.registerEmail,this.registerPassword,this.registerUsername);if(i.error){yield _.default.fire({icon:"error",title:"Verifica",text:i.error,confirmButtonColor:"#facc15"});return}yield _.default.fire({icon:"success",title:"\xA1Registro exitoso!",text:"Ya puedes iniciar sesi\xF3n.",confirmButtonColor:"#facc15"}),this.toggleForm()}catch(i){console.error("Error inesperado en registro:",i),yield _.default.fire({icon:"error",title:"Error inesperado",text:i.message||"Ha ocurrido un error.",confirmButtonColor:"#facc15"})}finally{this.isLoading=!1}})}static \u0275fac=function(e){return new(e||o)(h(Y),h(v),h(G))};static \u0275cmp=w({type:o,selectors:[["app-login"]],decls:9,vars:4,consts:[[1,"login-section","bg-black","text-white","min-h-screen","flex","items-center","justify-center","p-4"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","w-full","max-w-6xl","gap-8"],[1,"w-full","md:w-1/2","flex","justify-center","order-1","md:order-1"],["src","assets/splash/logo.jpg","alt","Logo Restaurante",1,"w-48","h-48","sm:w-56","sm:h-56","md:w-72","md:h-72","lg:w-120","lg:h-80","object-contain","mx-auto","hover:scale-105","transition-transform","duration-300"],[1,"w-full","md:w-1/2","flex","justify-center","order-2","md:order-2"],[1,"w-full","max-w-md","perspective-1000","min-h-[400px]"],[1,"relative","w-full","h-full","transition-all","duration-700","transform-style-preserve-3d"],["class","card bg-gray-800 text-white border border-gray-700 rounded-xl shadow-xl w-full backface-hidden absolute p-6",3,"click",4,"ngIf"],["class","card bg-gray-800 text-white border border-gray-700 rounded-xl shadow-xl w-full backface-hidden absolute rotate-y-180 p-6",3,"click",4,"ngIf"],[1,"card","bg-gray-800","text-white","border","border-gray-700","rounded-xl","shadow-xl","w-full","backface-hidden","absolute","p-6",3,"click"],[1,"text-2xl","font-bold","text-center","text-yellow-400","mb-6"],[3,"ngSubmit"],[1,"mb-4"],["type","text","placeholder","Usuario","name","username","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"],[1,"mb-6"],["type","password","placeholder","Contrase\xF1a","name","password","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"w-full","py-3","bg-yellow-500","hover:bg-yellow-600","text-black","font-bold","rounded-lg","transition-colors","duration-300","flex","items-center","justify-center",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"text-center","mt-4","text-gray-300"],[1,"text-yellow-400","font-semibold","hover:text-yellow-300","cursor-pointer","transition-colors",3,"click"],[1,"loading-spinner"],[1,"card","bg-gray-800","text-white","border","border-gray-700","rounded-xl","shadow-xl","w-full","backface-hidden","absolute","rotate-y-180","p-6",3,"click"],["type","text","placeholder","Nombre de usuario","name","username","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"],["type","email","placeholder","Correo electr\xF3nico","name","email","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"]],template:function(e,n){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2),u(3,"img",3),a(),r(4,"div",4)(5,"div",5)(6,"div",6),b(7,ie,15,7,"div",7)(8,ne,17,9,"div",8),a()()()()()),e&2&&(l(6),E("rotate-y-180",!n.showLogin),l(),p("ngIf",n.showLogin),l(),p("ngIf",!n.showLogin))},dependencies:[H,A,W,O,B,q,D,U,T,I],styles:[".perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.transform-style-preserve-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.loading-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid #fff;border-top:3px solid #000;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var J=[{path:"",component:S},{path:"login",component:L},{path:"",loadComponent:()=>import("./chunk-2K7JKGZB.js"),children:[{path:"dashboard",loadComponent:()=>import("./chunk-KCMCLXQI.js")},{path:"menu/productos",loadComponent:()=>import("./chunk-FPCEYBPZ.js")},{path:"menu/recetas",loadComponent:()=>import("./chunk-O4O6WWE2.js")},{path:"menu/carta",loadComponent:()=>import("./chunk-DL5JGY2S.js")},{path:"facturas/cobros",loadComponent:()=>import("./chunk-REXDPBV7.js")},{path:"facturas/imprimir",loadComponent:()=>import("./chunk-IGLNN3U3.js")},{path:"Usuarios",loadComponent:()=>import("./chunk-K5CHSAZ6.js")},{path:"perfil",loadComponent:()=>import("./chunk-DLTWB7CU.js")},{path:"egresos",loadComponent:()=>import("./chunk-3HFMJ4GO.js")},{path:"Contratos",loadComponent:()=>import("./chunk-PA5ABOCJ.js")},{path:"Cierre/Caja",loadComponent:()=>import("./chunk-CFM6XM73.js")}]}];var K={providers:[k({eventCoalescing:!0}),j(J),R()]};var M=class o{title="restaurante-web";static \u0275fac=function(e){return new(e||o)};static \u0275cmp=w({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){e&1&&u(0,"router-outlet")},dependencies:[F],encapsulation:2})};N(M,K).catch(o=>console.error(o));

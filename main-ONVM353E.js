import{a as N,b as R,c as W,d as v,g as O}from"./chunk-EWPQKLG2.js";import{a as Z}from"./chunk-BJ3VZH2X.js";import{c as j,d as B,e as U,f as D,g as A,h as q,p as H,r as Y}from"./chunk-V4S5BHXF.js";import{a as $}from"./chunk-IY34DK4E.js";import{Ab as C,Bb as x,Bc as G,Ca as s,Ha as _,Ma as h,Qa as b,Qb as k,Xa as l,Za as E,aa as d,ba as c,db as i,eb as a,fb as g,gc as I,ic as T,jb as V,kb as f,lb as m,uc as F,vb as u,zb as y}from"./chunk-YGAPY4LI.js";import"./chunk-LMZWYZYD.js";import{h as X,j as P}from"./chunk-K4ALXBGI.js";var S=class r{constructor(o){this.router=o}ngOnInit(){setTimeout(()=>{this.router.navigate(["/login"])},4e3)}static \u0275fac=function(e){return new(e||r)(_(v))};static \u0275cmp=h({type:r,selectors:[["app-splash"]],decls:3,vars:0,consts:[[1,"splash-container"],[1,"splash-logo"],["src","assets/splash/A_Fuego_Lento.gif","alt","Logo"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),g(2,"img",2),a()())},styles:[".splash-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#000;overflow:hidden}.splash-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}"]})};var w=X($());function te(r,o){r&1&&(i(0,"span"),u(1,"Iniciar Sesi\xF3n"),a())}function oe(r,o){r&1&&g(0,"span",23)}function ie(r,o){if(r&1){let e=V();i(0,"div",9),f("click",function(t){return d(e),c(t.stopPropagation())}),i(1,"h2",10),u(2,"Iniciar Sesi\xF3n"),a(),i(3,"form",11),f("ngSubmit",function(){d(e);let t=m();return c(t.login())}),i(4,"div",12)(5,"input",13),x("ngModelChange",function(t){d(e);let p=m();return C(p.username,t)||(p.username=t),c(t)}),a()(),i(6,"div",14)(7,"input",15),x("ngModelChange",function(t){d(e);let p=m();return C(p.password,t)||(p.password=t),c(t)}),a(),i(8,"button",16),f("click",function(){d(e);let t=m();return c(t.toggleShowPassword())}),g(9,"i",17),a()(),i(10,"button",18),b(11,te,2,0,"span",19)(12,oe,1,0,"span",20),a(),i(13,"div",21),u(14," \xBFNo tienes cuenta? "),i(15,"a",22),f("click",function(){d(e);let t=m();return c(!t.isLoading&&t.toggleForm())}),u(16," Reg\xEDstrate "),a()()()()}if(r&2){let e=m();s(5),y("ngModel",e.username),l("disabled",e.isLoading),s(2),l("type",e.showPassword?"text":"password"),y("ngModel",e.password),l("disabled",e.isLoading),s(),l("disabled",e.isLoading),s(),l("ngClass",e.showPassword?"fas fa-eye-slash":"fas fa-eye"),s(),l("disabled",e.isLoading),s(),l("ngIf",!e.isLoading),s(),l("ngIf",e.isLoading)}}function re(r,o){r&1&&(i(0,"span"),u(1,"Registrarse"),a())}function ne(r,o){r&1&&g(0,"span",23)}function ae(r,o){if(r&1){let e=V();i(0,"div",24),f("click",function(t){return d(e),c(t.stopPropagation())}),i(1,"h2",10),u(2,"Registro"),a(),i(3,"form",11),f("ngSubmit",function(){d(e);let t=m();return c(t.register())}),i(4,"div",12)(5,"input",25),x("ngModelChange",function(t){d(e);let p=m();return C(p.registerUsername,t)||(p.registerUsername=t),c(t)}),a()(),i(6,"div",12)(7,"input",26),x("ngModelChange",function(t){d(e);let p=m();return C(p.registerEmail,t)||(p.registerEmail=t),c(t)}),a()(),i(8,"div",27)(9,"input",28),x("ngModelChange",function(t){d(e);let p=m();return C(p.registerPassword,t)||(p.registerPassword=t),c(t)}),a()(),i(10,"button",18),b(11,re,2,0,"span",19)(12,ne,1,0,"span",20),a(),i(13,"div",21),u(14," \xBFYa tienes cuenta? "),i(15,"a",22),f("click",function(){d(e);let t=m();return c(!t.isLoading&&t.toggleForm())}),u(16," Iniciar sesi\xF3n "),a()()()()}if(r&2){let e=m();s(5),y("ngModel",e.registerUsername),l("disabled",e.isLoading),s(2),y("ngModel",e.registerEmail),l("disabled",e.isLoading),s(2),y("ngModel",e.registerPassword),l("disabled",e.isLoading),s(),l("disabled",e.isLoading),s(),l("ngIf",!e.isLoading),s(),l("ngIf",e.isLoading)}}var L=class r{constructor(o,e,n){this.supabaseService=o;this.router=e;this.userService=n}showLogin=!0;username="";password="";registerUsername="";registerEmail="";registerPassword="";isLoading=!1;error="";nombreUsuario="";toggleForm(){this.showLogin=!this.showLogin}login(){return P(this,null,function*(){this.isLoading=!0,this.error="";try{let o=yield this.supabaseService.login(this.username,this.password);if(o.error){yield w.default.fire({icon:"error",title:"Verifica",text:o.error,confirmButtonColor:"#facc15"});return}let e=o.data;if(!e||!e.user||!e.profile){yield w.default.fire({icon:"error",title:"Error",text:"No se pudo obtener el usuario o su perfil.",confirmButtonColor:"#facc15"});return}let{user:n,profile:t}=e,p=t.nombre||n.email;this.userService.setNombreUsuario(p),this.userService.setRolUsuario(t.rol),this.router.navigate(["/dashboard"])}catch(o){console.error("Error inesperado en login:",o),yield w.default.fire({icon:"error",title:"Error inesperado",text:o.message||"Ha ocurrido un error.",confirmButtonColor:"#facc15"})}finally{this.isLoading=!1}})}showPassword=!1;toggleShowPassword(){this.showPassword=!this.showPassword}register(){return P(this,null,function*(){this.isLoading=!0,this.error="";try{let o=yield this.supabaseService.register(this.registerEmail,this.registerPassword,this.registerUsername);if(o.error){yield w.default.fire({icon:"error",title:"Verifica",text:o.error,confirmButtonColor:"#facc15"});return}yield w.default.fire({icon:"success",title:"\xA1Registro exitoso!",text:"Ya puedes iniciar sesi\xF3n.",confirmButtonColor:"#facc15"}),this.toggleForm()}catch(o){console.error("Error inesperado en registro:",o),yield w.default.fire({icon:"error",title:"Error inesperado",text:o.message||"Ha ocurrido un error.",confirmButtonColor:"#facc15"})}finally{this.isLoading=!1}})}static \u0275fac=function(e){return new(e||r)(_(G),_(v),_(Z))};static \u0275cmp=h({type:r,selectors:[["app-login"]],decls:9,vars:4,consts:[[1,"login-section","bg-black","text-white","min-h-screen","flex","items-center","justify-center","p-4"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","w-full","max-w-6xl","gap-8"],[1,"w-full","md:w-1/2","flex","justify-center","order-1","md:order-1"],["src","assets/splash/A_Fuego_Lento.gif","alt","Logo Restaurante",1,"w-48","h-48","sm:w-56","sm:h-56","md:w-72","md:h-72","lg:w-120","lg:h-80","object-contain","mx-auto","hover:scale-105","transition-transform","duration-300"],[1,"w-full","md:w-1/2","flex","justify-center","order-2","md:order-2"],[1,"w-full","max-w-md","perspective-1000","min-h-[400px]"],[1,"relative","w-full","h-full","transition-all","duration-700","transform-style-preserve-3d"],["class","card bg-gray-800 text-white border border-gray-700 rounded-xl shadow-xl w-full backface-hidden absolute p-6",3,"click",4,"ngIf"],["class","card bg-gray-800 text-white border border-gray-700 rounded-xl shadow-xl w-full backface-hidden absolute rotate-y-180 p-6",3,"click",4,"ngIf"],[1,"card","bg-gray-800","text-white","border","border-gray-700","rounded-xl","shadow-xl","w-full","backface-hidden","absolute","p-6",3,"click"],[1,"text-2xl","font-bold","text-center","text-yellow-400","mb-6"],[3,"ngSubmit"],[1,"mb-4"],["type","text","placeholder","Usuario","name","username","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"],[1,"mb-6","relative"],["placeholder","Contrase\xF1a","name","password","required","",1,"w-full","p-3","pr-10","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","type","ngModel","disabled"],["type","button","aria-label","ver contrase\xF1a",1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","text-gray-400","hover:text-yellow-400","cursor-pointer",3,"click","disabled"],[3,"ngClass"],["type","submit",1,"w-full","py-3","bg-yellow-500","hover:bg-yellow-600","text-black","font-bold","rounded-lg","transition-colors","duration-300","flex","items-center","justify-center",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"text-center","mt-4","text-gray-300"],[1,"text-yellow-400","font-semibold","hover:text-yellow-300","cursor-pointer","transition-colors",3,"click"],[1,"loading-spinner"],[1,"card","bg-gray-800","text-white","border","border-gray-700","rounded-xl","shadow-xl","w-full","backface-hidden","absolute","rotate-y-180","p-6",3,"click"],["type","text","placeholder","Nombre de usuario","name","username","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"],["type","email","placeholder","Correo electr\xF3nico","name","email","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"],[1,"mb-6"],["type","password","placeholder","Contrase\xF1a","name","password","required","",1,"w-full","p-3","rounded-lg","bg-gray-700","text-white","border","border-gray-600","focus:border-yellow-400","focus:ring-2","focus:ring-yellow-400/50","transition-all",3,"ngModelChange","ngModel","disabled"]],template:function(e,n){e&1&&(i(0,"section",0)(1,"div",1)(2,"div",2),g(3,"img",3),a(),i(4,"div",4)(5,"div",5)(6,"div",6),b(7,ie,17,10,"div",7)(8,ae,17,9,"div",8),a()()()()()),e&2&&(s(6),E("rotate-y-180",!n.showLogin),s(),l("ngIf",n.showLogin),s(),l("ngIf",!n.showLogin))},dependencies:[Y,q,j,B,U,H,A,D,F,I,T],styles:[".perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.transform-style-preserve-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}.loading-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid #fff;border-top:3px solid #000000b4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var K=[{path:"",component:S},{path:"login",component:L},{path:"",loadComponent:()=>import("./chunk-AWEJSIDZ.js"),children:[{path:"dashboard",loadComponent:()=>import("./chunk-BNBRC4KH.js")},{path:"menu/productos",loadComponent:()=>import("./chunk-LVGMDAN2.js")},{path:"menu/recetas",loadComponent:()=>import("./chunk-KCI6D4EX.js")},{path:"menu/carta",loadComponent:()=>import("./chunk-CIQ4LOIL.js")},{path:"facturas/cobros",loadComponent:()=>import("./chunk-NMDCVKFV.js")},{path:"facturas/imprimir",loadComponent:()=>import("./chunk-YVJQMMRH.js")},{path:"Usuarios",loadComponent:()=>import("./chunk-Y7NLCCJX.js")},{path:"perfil",loadComponent:()=>import("./chunk-BKQSTBHZ.js")},{path:"egresos",loadComponent:()=>import("./chunk-4XSNJA3F.js")},{path:"Contratos",loadComponent:()=>import("./chunk-SQUBCAC4.js")},{path:"Cierre/Caja",loadComponent:()=>import("./chunk-5XV3YO4I.js")},{path:"menu/reservaciones",loadComponent:()=>import("./chunk-HLATXDQJ.js")},{path:"reportes",loadComponent:()=>import("./chunk-47AZF344.js")}]}];var Q={providers:[k({eventCoalescing:!0}),O(K),R()]};var M=class r{title="restaurante-web";static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){e&1&&g(0,"router-outlet")},dependencies:[W],encapsulation:2})};N(M,Q).catch(r=>console.error(r));

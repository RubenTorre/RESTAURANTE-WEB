import{d as K}from"./chunk-EWPQKLG2.js";import{a as me}from"./chunk-AKHQNOT6.js";import{a as de}from"./chunk-BJ3VZH2X.js";import{b as Z,c as ee,d as te,g as ie,i as ne,j as re,n as oe,o as ae,r as se}from"./chunk-V4S5BHXF.js";import{a as pe}from"./chunk-IY34DK4E.js";import{Ab as y,Bb as C,Bc as le,Ca as l,Ha as $,Kb as E,Lb as M,Ma as G,Ob as N,Qa as _,Xa as g,Za as k,aa as p,ba as m,ca as h,da as v,db as n,eb as i,fb as x,gb as W,hb as A,hc as U,ic as Y,jb as S,kb as f,lb as c,pc as J,sc as Q,ub as H,uc as X,vb as d,wb as I,xb as b,zb as w}from"./chunk-YGAPY4LI.js";import"./chunk-LMZWYZYD.js";import{a as j,b as O,h as q,j as V}from"./chunk-K4ALXBGI.js";var ce=q(me()),F=q(pe());function ue(o,r){if(o&1&&(n(0,"span",22),d(1),i()),o&2){let e=c().$implicit;l(),b(" ",e.mesa_id===30?"Pedidos Ya":"Pedidos Beez"," ")}}function ge(o,r){if(o&1){let e=S();n(0,"button",12),f("click",function(){let t=p(e).$implicit,s=c();return m(s.abrirModal(t))}),n(1,"div",13)(2,"div",14)(3,"div")(4,"span",15),d(5),E(6,"uppercase"),i(),n(7,"h3",16),d(8),_(9,ue,2,1,"span",17),i()(),n(10,"div",18),d(11),E(12,"number"),i()(),n(13,"div",19),h(),n(14,"svg",20),x(15,"path",21),i(),d(16),i()()()}if(o&2){let e=r.$implicit;l(5),b(" ",M(6,5,e.estado)," "),l(3),b("Mesa ",e.mesa_id," "),l(),g("ngIf",e.mesa_id===30||e.mesa_id===31),l(2),b("$",M(12,7,e.total),""),l(5),b(" ",e.mesero_nombre," ")}}function xe(o,r){if(o&1&&(n(0,"span",105),d(1),i()),o&2){let e=c(2);l(),b(" ",e.pedidoSeleccionado.mesa_id===30?"Pedidos Ya":"Pedidos Beez"," ")}}function fe(o,r){if(o&1&&(n(0,"div",112)(1,"span",113),d(2,"+"),i(),n(3,"span",114),d(4),i()()),o&2){let e=r.$implicit;l(4),I(e.nombre)}}function _e(o,r){if(o&1&&(W(0),n(1,"div",97),_(2,fe,5,1,"div",111),i(),A()),o&2){let e=c().$implicit;l(2),g("ngForOf",e.extras)}}function he(o,r){if(o&1){let e=S();W(0),n(1,"input",115),C("ngModelChange",function(t){p(e);let s=c().$implicit;return y(s.asignado,t)||(s.asignado=t),m(t)}),f("input",function(){p(e);let t=c(3);return m(t.calcularTotales())}),i(),A()}if(o&2){let e=c().$implicit;l(),g("max",e.cantidad),w("ngModel",e.asignado)}}function be(o,r){if(o&1&&(n(0,"span"),d(1),i()),o&2){let e=c().$implicit;l(),I(e.cantidad)}}function ve(o,r){if(o&1&&(n(0,"tr")(1,"td",106)(2,"div",107),d(3),i(),_(4,_e,3,1,"ng-container",61),i(),n(5,"td",108),d(6),E(7,"number"),i(),n(8,"td",109),d(9),i(),n(10,"td",109),_(11,he,2,2,"ng-container",110)(12,be,2,1,"ng-template",null,0,N),i()()),o&2){let e=r.$implicit,a=H(13),t=c(2);l(3),I(e.nombre),l(),g("ngIf",e.extras&&e.extras.length>0),l(2),b("$",M(7,6,e.precio),""),l(3),I(e.cantidad),l(2),g("ngIf",t.pagoSeparado)("ngIfElse",a)}}function we(o,r){if(o&1){let e=S();n(0,"button",116),f("click",function(){p(e);let t=c(2);return m(t.limpiarBusqueda())}),d(1," \xD7 "),i()}}function ye(o,r){if(o&1){let e=S();n(0,"div",120),f("click",function(){let t=p(e).$implicit,s=c(3);return m(s.seleccionarReceta(t))}),d(1),i()}if(o&2){let e=r.$implicit;l(),b(" ",e.nombre," ")}}function Ce(o,r){o&1&&(n(0,"div",121),d(1," No se encontraron resultados "),i())}function Se(o,r){if(o&1&&(n(0,"div",117),_(1,ye,2,1,"div",118)(2,Ce,2,0,"div",119),i()),o&2){let e=c(2);l(),g("ngForOf",e.recetasFiltradas),l(),g("ngIf",e.recetasFiltradas.length===0)}}function Pe(o,r){if(o&1){let e=S();n(0,"li",125)(1,"span",126),d(2),i(),n(3,"button",127),f("click",function(){let t=p(e).$implicit,s=c(3);return m(s.eliminarRecetaSeleccionada(t))}),d(4," Quitar "),i()()}if(o&2){let e=r.$implicit;l(2),I(e.nombre)}}function Ee(o,r){if(o&1&&(n(0,"div")(1,"h4",122),d(2,"Extras seleccionados:"),i(),n(3,"ul",123),_(4,Pe,5,1,"li",124),i()()),o&2){let e=c(2);l(4),g("ngForOf",e.recetasSeleccionadas)}}function Me(o,r){if(o&1){let e=S();n(0,"div")(1,"label",128),d(2," Efectivo recibido "),i(),n(3,"div",129)(4,"span",130),d(5," $ "),i(),n(6,"input",131),C("ngModelChange",function(t){p(e);let s=c(2);return y(s.montoRecibido,t)||(s.montoRecibido=t),m(t)}),f("input",function(){p(e);let t=c(2);return m(t.calcularTotales())}),i()()()}if(o&2){let e=c(2);l(6),w("ngModel",e.montoRecibido)}}function Fe(o,r){if(o&1){let e=S();n(0,"div")(1,"label",132),d(2," C\xF3digo del comprobante "),i(),n(3,"div",133)(4,"input",134),C("ngModelChange",function(t){p(e);let s=c(2);return y(s.codigoTransferencia,t)||(s.codigoTransferencia=t),m(t)}),i(),n(5,"div",135),h(),n(6,"svg",136),x(7,"path",137)(8,"path",138),i()()()()}if(o&2){let e=c(2);l(4),w("ngModel",e.codigoTransferencia)}}function Te(o,r){if(o&1){let e=S();n(0,"li",146),f("click",function(){let t=p(e).$implicit,s=c(4);return m(s.seleccionarCliente(t))})("mousedown",function(t){return p(e),m(t.preventDefault())}),n(1,"span",147),d(2),i(),n(3,"span",107),d(4),i()()}if(o&2){let e=r.$implicit;l(2),b(" ",(e.nombre==null?null:e.nombre.charAt(0))||"C"," "),l(2),I(e.nombre)}}function Ve(o,r){if(o&1&&(n(0,"ul",144),_(1,Te,5,2,"li",145),i()),o&2){let e=c(3);l(),g("ngForOf",e.clientesFiltrados)}}function ke(o,r){if(o&1){let e=S();n(0,"div",139)(1,"label",140),d(2,"Buscar Cliente"),i(),n(3,"div",123)(4,"label",141),d(5,"Cliente"),i(),n(6,"div",133)(7,"input",142),C("ngModelChange",function(t){p(e);let s=c(2);return y(s.clienteBusqueda,t)||(s.clienteBusqueda=t),m(t)}),f("input",function(){p(e);let t=c(2);return m(t.filtrarClientes())})("blur",function(){p(e);let t=c(2);return m(t.cerrarListaSiNoSeleccionado())}),i(),_(8,Ve,2,1,"ul",143),i()()()}if(o&2){let e=c(2);l(7),w("ngModel",e.clienteBusqueda),l(),g("ngIf",e.mostrarListaClientes&&e.clientesFiltrados.length>0)}}function Ie(o,r){if(o&1&&(n(0,"div",92)(1,"span",93),d(2,"Recargo (8%):"),i(),n(3,"span",148),d(4),E(5,"number"),i()()),o&2){let e=c(2);l(4),b("+$",M(5,1,e.total-e.subtotal),"")}}function Be(o,r){o&1&&x(0,"div",95)}function ze(o,r){if(o&1&&(n(0,"div",149)(1,"span"),d(2,"Vuelto:"),i(),n(3,"span"),d(4),E(5,"number"),E(6,"number"),i()()),o&2){let e=c(2);l(3),k("text-green-600",e.vuelto>=0)("text-red-600",e.vuelto<0),l(),b(" $",e.vuelto>=0?M(5,5,e.vuelto):"-"+M(6,7,-e.vuelto)," ")}}function Le(o,r){if(o&1){let e=S();n(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div")(5,"h2",27)(6,"span",28),h(),n(7,"svg",29),x(8,"path",6),i()(),d(9),_(10,xe,2,1,"span",30),i(),v(),n(11,"div",31)(12,"span",32),h(),n(13,"svg",20),x(14,"path",21),i(),d(15),i()()(),v(),n(16,"button",33),f("click",function(){p(e);let t=c();return m(t.cerrarModal())}),h(),n(17,"svg",29),x(18,"path",34),i()()()(),v(),n(19,"div",35)(20,"div",36)(21,"div",37)(22,"div")(23,"label",38),d(24,"Pago separado"),i(),n(25,"p",39),d(26,"Distribuir productos entre comensales"),i()(),n(27,"label",40)(28,"input",41),C("ngModelChange",function(t){p(e);let s=c();return y(s.pagoSeparado,t)||(s.pagoSeparado=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),x(29,"div",42),i()(),n(30,"div",43)(31,"h3",44),d(32," Productos "),i(),n(33,"div",45)(34,"table",46)(35,"thead",47)(36,"tr")(37,"th",48),d(38,"Producto"),i(),n(39,"th",49),d(40,"Precio"),i(),n(41,"th",50),d(42,"Cant."),i(),n(43,"th",50),d(44,"Paga"),i()()(),n(45,"tbody",51),_(46,ve,14,8,"tr",52),i()()()(),n(47,"div",53)(48,"h3",54),h(),n(49,"svg",55),x(50,"path",56),i(),d(51," Agregar Extras (bebidas, porciones) "),i(),v(),n(52,"div",57)(53,"input",58),C("ngModelChange",function(t){p(e);let s=c();return y(s.terminoBusquedaReceta,t)||(s.terminoBusquedaReceta=t),m(t)}),f("input",function(){p(e);let t=c();return m(t.filtrarRecetas())})("focus",function(){p(e);let t=c();return m(t.terminoBusquedaReceta&&t.filtrarRecetas())}),i(),_(54,we,2,0,"button",59)(55,Se,3,2,"div",60),i(),_(56,Ee,5,1,"div",61),i()(),n(57,"div",62)(58,"h3",63),h(),n(59,"svg",64),x(60,"path",65),i(),d(61," M\xE9todo de Pago "),i(),v(),n(62,"div",66)(63,"label",67)(64,"input",68),C("ngModelChange",function(t){p(e);let s=c();return y(s.formaPago,t)||(s.formaPago=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),n(65,"div",69)(66,"div",70),d(67,"Efectivo"),i(),n(68,"div",71),d(69,"Billetes/monedas"),i()(),h(),n(70,"svg",72),x(71,"path",65),i()(),v(),n(72,"label",67)(73,"input",73),C("ngModelChange",function(t){p(e);let s=c();return y(s.formaPago,t)||(s.formaPago=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),n(74,"div",69)(75,"div",70),d(76,"Tarjeta"),i(),n(77,"div",71),d(78,"+8% recargo"),i()(),h(),n(79,"svg",72),x(80,"path",74),i()(),v(),n(81,"label",67)(82,"input",75),C("ngModelChange",function(t){p(e);let s=c();return y(s.formaPago,t)||(s.formaPago=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),n(83,"div",69)(84,"div",70),d(85,"Transferencia"),i(),n(86,"div",71),d(87,"Electr\xF3nico"),i()(),h(),n(88,"svg",72),x(89,"path",76),i()(),v(),n(90,"label",67)(91,"input",77),C("ngModelChange",function(t){p(e);let s=c();return y(s.formaPago,t)||(s.formaPago=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),n(92,"div",69)(93,"div",70),d(94,"Cr\xE9dito"),i(),n(95,"div",71),d(96,"Diferido"),i()(),h(),n(97,"svg",72),x(98,"path",76),i()(),v(),n(99,"label",67)(100,"input",78),C("ngModelChange",function(t){p(e);let s=c();return y(s.formaPago,t)||(s.formaPago=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),n(101,"div",69)(102,"div",70),d(103,"PedidosYa"),i(),n(104,"div",71),d(105,"Online"),i()(),h(),n(106,"svg",79),x(107,"g",80)(108,"g",81),n(109,"g",82)(110,"g",83)(111,"g")(112,"g"),x(113,"circle",84)(114,"path",85)(115,"path",86),i()()()()()(),v(),n(116,"label",67)(117,"input",87),C("ngModelChange",function(t){p(e);let s=c();return y(s.formaPago,t)||(s.formaPago=t),m(t)}),f("change",function(){p(e);let t=c();return m(t.calcularTotales())}),i(),n(118,"div",69)(119,"div",70),d(120,"Beez"),i(),n(121,"div",71),d(122,"Online"),i()(),h(),n(123,"svg",79),x(124,"g",80)(125,"g",81),n(126,"g",82)(127,"g",83)(128,"g")(129,"g"),x(130,"circle",84)(131,"path",85)(132,"path",86),i()()()()()()(),v(),n(133,"div",53),_(134,Me,7,1,"div",61)(135,Fe,9,1,"div",61)(136,ke,9,2,"div",88),i(),n(137,"div",89)(138,"h4",90),d(139,"Resumen de pago"),i(),n(140,"div",91)(141,"div",92)(142,"span",93),d(143,"Subtotal:"),i(),n(144,"span"),d(145),E(146,"number"),i()(),_(147,Ie,6,3,"div",94),x(148,"div",95),n(149,"div",96)(150,"span"),d(151,"Total a pagar:"),i(),n(152,"span",97),d(153),E(154,"number"),i()(),_(155,Be,1,0,"div",98)(156,ze,7,9,"div",99),i()(),n(157,"div",100)(158,"button",101),f("click",function(){p(e);let t=c();return m(t.pagarFactura())}),h(),n(159,"svg",102),x(160,"path",103),i(),d(161," Confirmar Pago e Imprimir "),i(),v(),n(162,"button",104),f("click",function(){p(e);let t=c();return m(t.cerrarModal())}),d(163," Cancelar "),i()()()()()()}if(o&2){let e=c();l(9),b(" Factura - Mesa ",e.pedidoSeleccionado.mesa_id," "),l(),g("ngIf",e.pedidoSeleccionado.mesa_id===30||e.pedidoSeleccionado.mesa_id===31),l(5),b(" ",e.pedidoSeleccionado.mesero_nombre," "),l(13),w("ngModel",e.pagoSeparado),l(18),g("ngForOf",e.pedidoSeleccionado==null?null:e.pedidoSeleccionado.productos),l(7),w("ngModel",e.terminoBusquedaReceta),l(),g("ngIf",e.terminoBusquedaReceta),l(),g("ngIf",e.mostrarLista),l(),g("ngIf",e.recetasSeleccionadas.length>0),l(7),k("border-blue-500",e.formaPago==="efectivo")("bg-blue-50",e.formaPago==="efectivo"),l(),w("ngModel",e.formaPago),l(8),k("border-blue-500",e.formaPago==="tarjeta")("bg-blue-50",e.formaPago==="tarjeta"),l(),w("ngModel",e.formaPago),l(8),k("border-blue-500",e.formaPago==="transferencia")("bg-blue-50",e.formaPago==="transferencia"),l(),w("ngModel",e.formaPago),l(8),k("border-blue-500",e.formaPago==="Credito")("bg-blue-50",e.formaPago==="Credito"),l(),w("ngModel",e.formaPago),l(8),k("border-blue-500",e.formaPago==="pedidosya")("bg-blue-50",e.formaPago==="pedidosya"),l(),w("ngModel",e.formaPago),l(16),k("border-blue-500",e.formaPago==="beez")("bg-blue-50",e.formaPago==="beez"),l(),w("ngModel",e.formaPago),l(17),g("ngIf",e.formaPago==="efectivo"),l(),g("ngIf",e.formaPago==="transferencia"),l(),g("ngIf",e.formaPago==="Credito"),l(9),b("$",M(146,47,e.subtotal),""),l(2),g("ngIf",e.formaPago==="tarjeta"),l(6),b("$",M(154,49,e.total),""),l(2),g("ngIf",e.formaPago==="efectivo"&&e.montoRecibido>0),l(),g("ngIf",e.formaPago==="efectivo"&&e.montoRecibido>0)}}var D=class o{constructor(r,e,a){this.supabase=r;this.userService=e;this.router=a}mesasOcupadas=[];pedidoSeleccionado=null;pagoSeparado=!1;formaPago="efectivo";montoRecibido=0;subtotal=0;total=0;vuelto=0;codigoTransferencia="";recetas=[];recetasFiltradas=[];terminoBusquedaReceta="";cargando=!1;recetasSeleccionadas=[];nombreUsuario="";clienteBusqueda="";clientesFiltrados=[];clientes=[];clientesConPrecios=[];clienteSeleccionadoId=null;datosClienteConPrecios=[];recetaSeleccionada=null;mostrarLista=!1;tiposDeAlmuerzo=[];pedido={cliente_id:null,fecha:Re(),estado_pago:"pendiente",total:0,observaciones:"",tipo:"Almuerzo",cantidad:1};ngOnInit(){return V(this,null,function*(){this.userService.nombreUsuario$.subscribe(r=>{this.nombreUsuario=r}),yield this.cargarMesasConPedidos(),yield this.cargarRecetas(),this.cargarClientesConPrecios()})}cargarMesasConPedidos(){return V(this,null,function*(){let r=yield this.supabase.getFacturasDelDia();this.mesasOcupadas=r.filter(e=>e.estado==="ocupada")})}abrirModal(r){this.pedidoSeleccionado=O(j({},r),{productos:r.productos.map(e=>O(j({},e),{asignado:0}))}),this.resetValores(),this.calcularTotales()}cerrarModal(){this.pedidoSeleccionado=null}cargarRecetas(){return V(this,null,function*(){try{this.cargando=!0,this.recetas=yield this.supabase.obtenerRecetas(),this.filtrarRecetas()}catch(r){console.error("Error cargando recetas:",r)}finally{this.cargando=!1}})}filtrarRecetas(){if(!this.terminoBusquedaReceta){this.recetasFiltradas=[],this.mostrarLista=!1;return}let r=this.terminoBusquedaReceta.toLowerCase();this.recetasFiltradas=this.recetas.filter(e=>e.nombre.toLowerCase().includes(r)),this.mostrarLista=this.recetasFiltradas.length>0}seleccionarReceta(r){this.recetasSeleccionadas.includes(r)||(this.recetasSeleccionadas.push(r),this.calcularTotales()),this.terminoBusquedaReceta="",this.mostrarLista=!1}eliminarRecetaSeleccionada(r){this.recetasSeleccionadas=this.recetasSeleccionadas.filter(e=>e!==r),this.calcularTotales()}limpiarBusqueda(){this.terminoBusquedaReceta="",this.recetaSeleccionada=null,this.recetasFiltradas=[],this.mostrarLista=!1}resetValores(){this.formaPago="efectivo",this.pagoSeparado=!1,this.montoRecibido=0,this.subtotal=0,this.total=0,this.vuelto=0,this.codigoTransferencia=""}calcularTotales(){let r=0;this.pedidoSeleccionado&&(this.pagoSeparado?r+=this.pedidoSeleccionado.productos.reduce((t,s)=>{let B=s.precio*(s.asignado||0),T=s.extras?.reduce((z,u)=>z+(u.precio||0),0)||0;return t+B+T},0):r+=this.pedidoSeleccionado.productos.reduce((t,s)=>{let B=s.precio*s.cantidad,T=s.extras?.reduce((z,u)=>z+(u.precio||0),0)||0;return t+B+T},0));let e=this.recetasSeleccionadas.reduce((t,s)=>t+(s.precio_venta||0),0);r+=e,this.subtotal=r;let a=this.formaPago==="tarjeta"?this.subtotal*.08:0;this.total=+(this.subtotal+a).toFixed(2),this.formaPago==="efectivo"?this.vuelto=+(this.montoRecibido-this.total).toFixed(2):this.vuelto=0}pagarFactura(){return V(this,null,function*(){if(!this.pedidoSeleccionado)return;let r=yield this.supabase.obtenerCajaAbiertas();if(console.log("sesion",r),!r){F.default.fire({icon:"error",title:"No hay caja abierta",text:"Debe abrir una caja antes de realizar pagos."}).then(u=>{(u.isConfirmed||u.isDismissed)&&this.router.navigate(["/Cierre/Caja"])});return}if(this.formaPago==="Credito"&&!(yield this.guardarPedido()))return;if(this.formaPago==="transferencia"&&!this.codigoTransferencia?.trim()){yield F.default.fire({icon:"warning",title:"C\xF3digo requerido",text:"Debe ingresar el c\xF3digo de la transferencia"});return}if(this.formaPago==="efectivo"&&(!this.montoRecibido||this.montoRecibido<this.total)){yield F.default.fire({icon:"warning",title:"Monto insuficiente",text:"Debe ingresar un monto recibido mayor o igual al total."});return}this.calcularTotales();let e=this.pagoSeparado?this.pedidoSeleccionado.productos.filter(u=>u.asignado>0):this.pedidoSeleccionado.productos.map(u=>O(j({},u),{asignado:u.cantidad})),a=this.recetasSeleccionadas.map(u=>({nombre:u.nombre,precio:u.precio_venta,cantidad:1,total:u.precio_venta})),t=[...e.map(u=>{let L=u.extras?.reduce((P,R)=>P+(R.precio||0),0)||0;return{nombre:u.nombre,precio:u.precio,cantidad:u.asignado,total:u.precio*u.asignado+L,extras:u.extras||[]}}),...a],s=je(),B=`
    <div class="factura-container" style="width: 100%; margin: 0 auto; padding: 10px;">
      <img src="assets/splash/logo.jpg" alt="Logo" style="width: 85px; height: auto; margin-bottom: 5px;" />
      <h2 style="margin: 2px;">A FUEGO LENTO</h2>
      <p style="margin: 2px; font-size: 12px;">
        RUC: 1500956527001<br>
        \u{1F4DE} 0958910306<br>
        \u{1F4CD} Av.Alfonso Almeida y Gabriela Mistral - Ibarra<br>
      </p>
      <hr style="border-top: 1px dashed black; margin: 4px 0; padding-right: 25px" />
      ${s}<br>
      <hr style="border-top: 1px dashed black; margin: 4px 0; padding-right: 25px" />
      <p style="font-size: 12px; text-align: left;">
        Mesa: ${this.pedidoSeleccionado?.mesa_id||"-"}<br>
        Vendedor: ${this.nombreUsuario||"---"}<br>
        Pago: ${this.formaPago.toUpperCase()}<br>
      </p>
      <hr style="border-top: 1px dashed black; margin: 4px 0; padding-right: 25px" />
      <table style="width: 100%; font-size: 12px; table-layout: fixed;">
        <thead>
          <tr>
            <th style="width: 15%; text-align: left;">Cant</th>
            <th style="width: 40%; text-align: left;">Producto</th>
            <th style="width: 30%; text-align: right; padding-right: 25px">Total</th>
          </tr>
        </thead>
        <tbody>
          ${t.map(u=>`
            <tr>
              <td style="padding: 2px 4px;">${u.cantidad||0}</td>
              <td style="padding: 2px 4px; white-space: normal; word-wrap: break-word; text-align: left;">
                ${u.nombre||"Producto"}
                ${Array.isArray(u.extras)&&u.extras.length?`
                  <ul style="padding-left: 20px;">
                    ${u.extras.map(L=>`<li>${L?.nombre||"Extra"}</li>`).join("")}
                  </ul>`:""}
              </td>
              <td style="padding: 2px 4px; text-align: right; padding-right: 25px">
                $${(u.total||0).toFixed(2)}
              </td>
            </tr>
          `).join("")}
        </tbody>
      </table>
      <hr style="border-top: 1px dashed black; margin: 4px 0; padding-right: 25px" />
      <p style="text-align: right; font-size: 12px; padding-right: 25px">SUBTOTAL: $${this.subtotal.toFixed(2)}</p>

      ${this.formaPago==="tarjeta"?`
      <p style="text-align: right; font-size: 12px; padding-right: 25px;">
        RECARGO TARJETA (8%): $${(this.total-this.subtotal).toFixed(2)}
      </p>`:""}

      <p style="text-align: right; font-size: 12px; padding-right: 25px"><strong>TOTAL: $${this.total.toFixed(2)}</strong></p>

      ${this.formaPago==="efectivo"?`
      <p style="text-align: right; font-size: 12px; padding-right: 25px">
        Recibido: $${this.montoRecibido.toFixed(2)}<br>
        Vuelto: $${this.vuelto.toFixed(2)}
      </p>`:""}

      ${this.formaPago==="transferencia"?`
      <p style="text-align: right; font-size: 12px; padding-right: 25px">
        C\xF3digo transferencia: ${this.codigoTransferencia}
      </p>`:""}
      
      <hr style="border-top: 1px dashed black; margin: 4px 0;" />
      <p style="text-align: center; font-size: 11px; margin-top: 10px;">\xA1Gracias por su visita!</p>
      <p style="text-align: center; font-size: 10px;">Elaborado por Afuego Lento</p>
    </div>
  `;(0,ce.default)({printable:B,type:"raw-html",style:`
      @media print {
        body {
          margin: 0;
          padding: 0;
          font-family: monospace;
        }
        .factura-container {
          width: auto;
          padding: 0;
          text-align: center;
          overflow: hidden;
        }
        @page {
          size: auto;
          margin: 0;
        }
        hr {
          border: none;
          border-top: 1px dashed #000;
        }
      }
    `});let T=`FAC-${new Date().getTime()}`,z={pedido_id:this.pedidoSeleccionado.id,numero_factura:T,forma_pago:this.formaPago,monto:this.total,productos:t,es_extra:this.recetasSeleccionadas.length>0,fecha:s};this.codigoTransferencia?.trim()&&(z.codigo_transferencia=this.codigoTransferencia);try{yield this.supabase.crearFactura(z),this.pedidoSeleccionado.productos=this.pedidoSeleccionado.productos.map(P=>{let R=this.pagoSeparado?P.asignado:P.cantidad;return R>0&&(P.cantidad-=R,P.asignado=0),P}).filter(P=>P.cantidad>0);let L=this.pedidoSeleccionado.productos.length===0?"abierta":"ocupado";yield this.supabase.actualizarPedido(this.pedidoSeleccionado.id,T,L),this.pedidoSeleccionado.estado=L,yield this.cargarMesasConPedidos()}catch(u){console.error("Error al crear factura o actualizar pedido:",u)}this.recetasSeleccionadas=[],this.resetValores(),this.pedidoSeleccionado.productos.length===0&&(this.pedidoSeleccionado=null)})}togglePagoSeparado(){this.pagoSeparado=!this.pagoSeparado,this.calcularTotales()}cargarClientesConPrecios(){return V(this,null,function*(){try{let r=yield this.supabase.obtenerClientesConPrecios(),e=new Map;r.forEach(a=>{let t=a.clientes.id;e.has(t)||e.set(t,{id:t,nombre:a.clientes.nombre,telefono:a.clientes.telefono,direccion:a.clientes.direccion,activo:a.clientes.activo,almuerzos:[]}),e.get(t).almuerzos.push({id:a.almuerzos.id,nombre:a.almuerzos.nombre,precio:a.precio})}),this.clientesConPrecios=Array.from(e.values()).sort((a,t)=>a.activo!==t.activo?Number(t.activo)-Number(a.activo):a.nombre.localeCompare(t.nombre)),this.clientes=this.clientesConPrecios.map(a=>({id:a.id,nombre:a.nombre,telefono:a.telefono,direccion:a.direccion}))}catch(r){console.error("Error cargando clientes con precios",r)}})}preventBlur(r){r.preventDefault()}onBlurCliente(){setTimeout(()=>{!this.clienteSeleccionadoId&&this.clienteBusqueda&&(this.clienteBusqueda="",this.clientesFiltrados=[],this.onClienteSeleccionado())},200)}mostrarListaClientes=!1;filtrarClientes(){if(!this.clienteBusqueda){this.clientesFiltrados=[],this.mostrarListaClientes=!1,this.clienteSeleccionadoId=null,this.onClienteSeleccionado();return}let r=this.clienteBusqueda.toLowerCase();this.clientesFiltrados=this.clientes.filter(e=>e.nombre.toLowerCase().includes(r)).sort((e,a)=>Number(a.activo)-Number(e.activo)),this.mostrarListaClientes=!0}cerrarListaSiNoSeleccionado(){setTimeout(()=>{this.clienteSeleccionadoId||(this.mostrarListaClientes=!1,this.clienteBusqueda="")},200)}seleccionarCliente(r){this.clienteSeleccionadoId=r.id,this.clienteBusqueda=r.nombre,this.mostrarListaClientes=!1,this.onClienteSeleccionado()}onClienteSeleccionado(){return V(this,null,function*(){if(this.clienteSeleccionadoId)try{this.datosClienteConPrecios=yield this.supabase.obtenerClienteConPrecios(this.clienteSeleccionadoId),this.tiposDeAlmuerzo.forEach(r=>{let e=this.datosClienteConPrecios.find(a=>a.almuerzos.id===r.id);r.precio=e?e.precio:0,r.cantidad=0}),this.pedido.cliente_id=this.clienteSeleccionadoId}catch(r){F.default.fire({icon:"error",title:"Error al cargar datos del cliente",text:r.message||"No se pudieron obtener los datos"})}else this.datosClienteConPrecios=[],this.tiposDeAlmuerzo.forEach(r=>{r.precio=0,r.cantidad=0}),this.pedido.cliente_id=null})}guardarPedido(){return V(this,null,function*(){try{if(!this.pedido.cliente_id)return yield F.default.fire({icon:"warning",title:"Cliente requerido",text:"Debe seleccionar un cliente antes de guardar el pedido."}),!1;this.calcularTotales();let r=this.pedidoSeleccionado?.productos.map(a=>({almuerzo_id:a.almuerzo_id||a.id,cantidad:a.cantidad}))||[];if(r.length===0)return yield F.default.fire({icon:"warning",title:"Atenci\xF3n",text:"No hay productos v\xE1lidos en la factura para guardar como pedido."}),!1;let e={cliente_id:this.pedido.cliente_id,fecha:this.pedido.fecha,estado_pago:this.pedido.estado_pago||"pendiente",observaciones:(()=>{let a=this.pedidoSeleccionado?.productos?.map(s=>{let B=s.extras&&s.extras.length>0?` (Extras: ${s.extras.map(T=>T.nombre).join(", ")})`:"";return`${s.cantidad}x ${s.nombre}${B}`}).join(", ")||"",t=this.recetasSeleccionadas&&this.recetasSeleccionadas.length>0?", Adicionales: "+this.recetasSeleccionadas.map(s=>s.nombre).join(", "):"";return a+t})(),total:this.total,almuerzos:r};return yield this.supabase.crearPedidoAlmuerzos(e),yield F.default.fire({icon:"success",title:"\xC9xito",text:"Pedido creado correctamente!"}),this.clienteBusqueda="",this.clienteSeleccionadoId=null,this.pedido.cliente_id=null,this.clientesFiltrados=[],!0}catch(r){return console.error("Error al guardar:",r),yield F.default.fire({icon:"error",title:"Error",text:r.message||"Ocurri\xF3 un error inesperado"}),!1}})}static \u0275fac=function(e){return new(e||o)($(le),$(de),$(K))};static \u0275cmp=G({type:o,selectors:[["app-facturas"]],decls:14,vars:3,consts:[["totalPaga",""],[1,"p-4","bg-gray-50","min-h-screen"],[1,"max-w-7xl","mx-auto"],[1,"mb-6","flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-800","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"text-sm","text-gray-500","bg-blue-50","px-3","py-1","rounded-full"],[1,"font-medium","text-blue-600"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],["class","bg-white border rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200 group",3,"click",4,"ngFor","ngForOf"],["class","fixed inset-0 flex justify-center items-start z-50 bg-black/50 backdrop-blur-sm p-4 overflow-y-auto",4,"ngIf"],[1,"bg-white","border","rounded-xl","overflow-hidden","shadow-sm","hover:shadow-md","transition-shadow","duration-200","group",3,"click"],[1,"p-5"],[1,"flex","justify-between","items-start","mb-3"],[1,"inline-block","bg-blue-100","text-blue-800","text-xs","px-2","py-1","rounded-full","mb-1"],[1,"text-xl","font-bold","text-gray-800","group-hover:text-blue-600"],["class","text-sm font-semibold text-white bg-blue-600 px-2 py-0.5 rounded-full",4,"ngIf"],[1,"text-2xl","font-bold","text-blue-600"],[1,"flex","items-center","text-sm","text-gray-600","mt-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-sm","font-semibold","text-white","bg-blue-600","px-2","py-0.5","rounded-full"],[1,"fixed","inset-0","flex","justify-center","items-start","z-50","bg-black/50","backdrop-blur-sm","p-4","overflow-y-auto"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-5xl","text-gray-700","overflow-hidden","my-8","max-h-[90vh]","flex","flex-col"],[1,"bg-gradient-to-r","from-blue-600","to-blue-700","p-5","text-white"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","flex","items-center","gap-3"],[1,"bg-white/20","p-2","rounded-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["class","text-sm font-semibold text-white bg-red-600 px-2 py-0.5 rounded-full",4,"ngIf"],[1,"flex","items-center","gap-4","mt-2","text-sm","text-blue-100"],[1,"flex","items-center"],["title","cerrar modal",1,"text-white/80","hover:text-white","p-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-auto","flex","flex-col","lg:flex-row"],[1,"flex-1","p-5","border-r","border-gray-100"],[1,"flex","items-center","justify-between","bg-gray-50","p-3","rounded-lg","mb-4"],["for","pagoSeparado",1,"font-medium","text-gray-700"],[1,"text-xs","text-gray-500"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","id","pagoSeparado",1,"sr-only","peer",3,"ngModelChange","change","ngModel"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],[1,"mb-4","bg-white","p-4","rounded-lg","shadow-sm","border","border-gray-100"],[1,"text-xl","font-semibold","text-gray-700","mb-2"],[1,"overflow-x-auto","text-xs"],[1,"w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-2","py-1","text-left","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-1","py-1","text-right","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-1","py-1","text-center","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"mb-6"],[1,"flex","items-center","text-gray-700","font-semibold","text-base","mb-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-blue-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"],[1,"relative","mb-3"],["type","text","placeholder","Buscar extras (ej: cola, cerveza)",1,"w-full","px-4","py-2","pr-10","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-sm",3,"ngModelChange","input","focus","ngModel"],["class","absolute right-2 top-2 text-gray-400 hover:text-gray-600 text-lg font-bold leading-none",3,"click",4,"ngIf"],["class","absolute z-10 left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-56 overflow-auto text-sm",4,"ngIf"],[4,"ngIf"],[1,"lg:w-[32rem]","p-5","bg-gray-50","flex","flex-col"],[1,"font-semibold","text-gray-700","mb-4","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-1","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],[1,"grid","grid-cols-3","gap-2","mb-4"],[1,"flex","items-center","p-2","border","rounded-lg","cursor-pointer","hover:border-blue-400","transition-colors"],["type","radio","name","forma","value","efectivo",1,"h-3","w-3","text-blue-600","focus:ring-blue-500","mr-2",3,"ngModelChange","change","ngModel"],[1,"flex-1"],[1,"text-sm","font-medium"],[1,"text-[10px]","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-gray-400"],["type","radio","name","forma","value","tarjeta",1,"h-3","w-3","text-blue-600","focus:ring-blue-500","mr-2",3,"ngModelChange","change","ngModel"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],["type","radio","name","forma","value","transferencia",1,"h-3","w-3","text-blue-600","focus:ring-blue-500","mr-2",3,"ngModelChange","change","ngModel"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],["type","radio","name","forma","value","Credito",1,"h-3","w-3","text-blue-600","focus:ring-blue-500","mr-2",3,"ngModelChange","change","ngModel"],["type","radio","name","forma","value","pedidosya",1,"h-3","w-3","text-blue-600","focus:ring-blue-500","mr-2",3,"ngModelChange","change","ngModel"],["fill","#cccccc","height","25px","width","25px","version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 460.427 460.427",0,"xml","space","preserve"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","XMLID_800_"],["cx","225.108","cy","41.302","r","38.373"],["d","M397.111,330.868c-7.377,0-14.458,1.281-21.047,3.611l-3.12-9.271c6.069-1.88,12.506-2.914,19.175-2.957 c8.102-0.052,15.106-6.153,15.609-14.239c0.549-8.84-6.458-16.18-15.179-16.18c-10.213,0-20.059,1.595-29.309,4.541l-20.71-61.54 h9.315c3.709,7.964,10.934,13.96,19.685,15.978c3.329,0.768,6.52-1.762,6.52-5.191v-45.936c0-3.406-3.164-5.96-6.484-5.199 c-8.767,2.01-16.007,8.012-19.721,15.987h-4.463c-2.762,3.551-6.192,6.541-10.09,8.794c-9.936,5.744-18.371,4.656-24.252,4.314 c1.41,4.189,9.775,29.046,11.571,34.383c-1.71,1.595,3.555-6.344-68.423,106.855h-0.684c-2.564,8.595-6.261,15.549-14.333,21.473 c-1.468,1.077-3.017,2.038-4.623,2.888h19.837c8.186,0,15.805-4.183,20.2-11.09l57.851-90.93l6.585,19.567 c-27.031,17.072-45.069,47.145-45.247,81.37c-0.043,8.292,6.381,15.424,14.668,15.71c8.646,0.299,15.749-6.621,15.749-15.2 c0-20.938,9.758-39.629,24.953-51.8l3.515,10.444c-13.426,12.156-21.633,29.974-20.806,49.648 c1.368,32.53,27.712,59.008,60.235,60.529c36.281,1.697,66.339-27.33,66.339-63.245 C460.427,359.272,432.024,330.868,397.111,330.868z M397.111,416.942c-12.549,0-22.758-10.209-22.758-22.758 s10.209-22.758,22.758-22.758s22.758,10.209,22.758,22.758C419.869,406.733,409.66,416.942,397.111,416.942z"],["d","M269.437,259.727c3.117-10.448-2.336-21.534-12.515-25.441l-23.595-9.057l1.407-6.988 c-7.085-2.401-12.47-8.33-14.186-15.588l-13.618-57.806l28.632,49.039c2.935,5.028,8.193,8.252,14.005,8.59l69.342,4.03 c9.601,0.554,17.808-6.774,18.365-16.348c0.557-9.585-6.762-17.807-16.348-18.365l-60.037-3.489l-23.933-40.989l13.567,12.518 l1.624-8.065c2.827-14.035-6.26-27.703-20.294-30.53l-45.317-9.127c-14.035-2.826-27.703,6.26-30.53,20.294l-14.561,72.305 v-69.587c0-4.846-3.929-8.775-8.775-8.775H32.603c-4.846,0-8.775,3.929-8.775,8.775v127.689h-6.084 c-9.8,0-17.744,7.944-17.744,17.744c0,9.8,7.944,17.744,17.744,17.744h73.004v27.041c-29.827,11.281-52.235,37.663-57.884,69.823 c-1.275,7.26,4.317,13.919,11.7,13.919h15.524c-0.135,1.684-0.223,3.381-0.223,5.099c0,34.912,28.403,63.316,63.316,63.316 c34.912,0,63.316-28.403,63.316-63.316c0-1.686-0.086-3.351-0.216-5.004h15.02c-15.51-8.246-23.512-26.573-18.347-43.889 l19.983-66.989h17.417l-21.406,71.76c-3.294,11.041,2.987,22.662,14.028,25.956c11.042,3.294,22.663-2.988,25.956-14.028 L269.437,259.727z M123.18,416.942c-12.549,0-22.758-10.209-22.758-22.758c0-1.753,0.206-3.458,0.583-5.099h44.35 c0.377,1.64,0.583,3.345,0.583,5.099C145.938,406.733,135.728,416.942,123.18,416.942z M141.446,242.814v-17.198 c2.926,6.698,7.462,12.621,13.223,17.198H141.446z"],["type","radio","name","forma","value","beez",1,"h-3","w-3","text-blue-600","focus:ring-blue-500","mr-2",3,"ngModelChange","change","ngModel"],["class","mt-2 p-3 border rounded-lg bg-gray-50",4,"ngIf"],[1,"bg-white","p-4","rounded-lg","border","border-gray-200","mb-6"],[1,"font-medium","text-gray-700","mb-3"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"text-gray-600"],["class","flex justify-between text-sm",4,"ngIf"],[1,"border-t","border-gray-200","my-2"],[1,"flex","justify-between","font-semibold"],[1,"text-blue-600"],["class","border-t border-gray-200 my-2",4,"ngIf"],["class","flex justify-between font-medium",4,"ngIf"],[1,"mt-auto","space-y-3"],[1,"w-full","bg-gradient-to-r","from-green-600","to-green-700","hover:from-green-700","hover:to-green-800","text-white","font-medium","py-3","px-4","rounded-lg","shadow-md","transition-all","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"w-full","bg-white","border","border-gray-300","hover:bg-gray-50","text-gray-700","font-medium","py-2","px-4","rounded-lg","transition-colors",3,"click"],[1,"text-sm","font-semibold","text-white","bg-red-600","px-2","py-0.5","rounded-full"],[1,"px-2","py-1","whitespace-nowrap"],[1,"font-medium"],[1,"px-1","py-1","whitespace-nowrap","text-right"],[1,"px-1","py-1","whitespace-nowrap","text-center"],[4,"ngIf","ngIfElse"],["class","flex items-baseline",4,"ngFor","ngForOf"],[1,"flex","items-baseline"],[1,"text-xs","mr-1"],[1,"text-xs"],["type","number","min","0","title","Cantidad a pagar",1,"w-12","border","border-gray-300","px-1","py-0.5","rounded","text-center","focus:ring-1","focus:ring-blue-300",3,"ngModelChange","input","max","ngModel"],[1,"absolute","right-2","top-2","text-gray-400","hover:text-gray-600","text-lg","font-bold","leading-none",3,"click"],[1,"absolute","z-10","left-0","right-0","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-56","overflow-auto","text-sm"],["class","px-4 py-2 hover:bg-blue-50 cursor-pointer",3,"click",4,"ngFor","ngForOf"],["class","px-4 py-2 text-gray-500",4,"ngIf"],[1,"px-4","py-2","hover:bg-blue-50","cursor-pointer",3,"click"],[1,"px-4","py-2","text-gray-500"],[1,"text-sm","font-medium","text-gray-600","mb-2"],[1,"space-y-1"],["class","flex items-center justify-between px-3 py-2 border border-gray-200 rounded-md text-sm bg-gray-50",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","px-3","py-2","border","border-gray-200","rounded-md","text-sm","bg-gray-50"],[1,"text-gray-800","truncate"],[1,"text-red-500","hover:text-red-600","text-xs","font-medium","px-2","py-1","rounded-md","border","border-red-300","hover:bg-red-50",3,"click"],["for","montoRecibido",1,"block","text-sm","font-semibold","text-gray-700","mb-1"],[1,"relative","rounded-lg","shadow-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","text-gray-500","text-sm","pointer-events-none"],["id","montoRecibido","type","number","placeholder","0.00",1,"block","w-full","pl-8","pr-3","py-2","text-sm","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],["for","codigoTransferencia",1,"block","text-sm","font-semibold","text-gray-700","mb-1"],[1,"relative"],["id","codigoTransferencia","type","text","placeholder","Ej. 1234567890ABC",1,"block","w-full","pl-10","pr-4","py-2","border","border-blue-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","text-sm",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24","stroke-linecap","round","stroke-linejoin","round",1,"h-5","w-5","text-blue-500"],["d","M12 11c0 .552-.448 1-1 1s-1-.448-1-1 .448-1 1-1 1 .448 1 1z"],["d","M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"],[1,"mt-2","p-3","border","rounded-lg","bg-gray-50"],["for","clienteBusqueda",1,"block","mb-2","font-semibold"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","placeholder","Buscar cliente...",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","input","blur","ngModel"],["class","absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-60","overflow-auto"],["class","px-4 py-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-0 flex items-center",3,"click","mousedown",4,"ngFor","ngForOf"],[1,"px-4","py-3","hover:bg-orange-50","cursor-pointer","border-b","border-gray-100","last:border-0","flex","items-center",3,"click","mousedown"],[1,"bg-orange-100","text-orange-800","rounded-full","w-8","h-8","flex","items-center","justify-center","mr-3","text-sm","font-medium"],[1,"text-red-500"],[1,"flex","justify-between","font-medium"]],template:function(e,a){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),h(),n(4,"svg",5),x(5,"path",6),i(),d(6," Facturas por Cobrar "),i(),v(),n(7,"div",7)(8,"span",8),d(9),i(),d(10," mesas ocupadas "),i()(),n(11,"div",9),_(12,ge,17,9,"button",10),i()()(),_(13,Le,164,51,"div",11)),e&2&&(l(9),I(a.mesasOcupadas.length),l(3),g("ngForOf",a.mesasOcupadas),l(),g("ngIf",a.pedidoSeleccionado))},dependencies:[X,U,Y,J,Q,se,ee,ne,Z,re,te,ae,oe,ie],styles:[`.search-container[_ngcontent-%COMP%]{position:relative;width:300px}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.clear-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:16px;color:#999}.dropdown-list[_ngcontent-%COMP%]{position:absolute;width:100%;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-top:none;border-radius:0 0 4px 4px;background:#fff;z-index:1000}.dropdown-item[_ngcontent-%COMP%]{padding:10px;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.no-results[_ngcontent-%COMP%]{color:#999;font-style:italic}.selected-recipe[_ngcontent-%COMP%]{margin-top:20px;padding:15px;border:1px solid #eee;border-radius:4px;background:#f9f9f9}.search-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #e2e8f0;border-radius:.75rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5' viewBox='0 0 20 20' fill='%236B7280'%3E%3Cpath fill-rule='evenodd' d='M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z' clip-rule='evenodd' /%3E%3C/svg%3E");background-repeat:no-repeat;background-position:.75rem center;background-size:1.25rem;box-shadow:0 1px 2px #0000000d;transition:all .2s}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f640}.clear-btn[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);font-size:1.25rem;color:#9ca3af;cursor:pointer;background:none;border:none;padding:0;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:9999px}.clear-btn[_ngcontent-%COMP%]:hover{color:#4b5563;background-color:#f3f4f6}.dropdown-list[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;margin-top:.25rem;background-color:#fff;border:1px solid #e2e8f0;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;max-height:15rem;overflow-y:auto;z-index:10}.dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;transition:background-color .2s}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}.dropdown-item.no-results[_ngcontent-%COMP%]{color:#6b7280;text-align:center;cursor:default}.selected-recipe[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#eff6ff;border:1px solid #dbeafe;border-radius:.5rem}.selected-recipe[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;color:#1e40af;margin-bottom:.5rem}@page{size:80mm auto;margin:0}`]})};function Re(){let o=new Date,r=o.getFullYear(),e=(o.getMonth()+1).toString().padStart(2,"0"),a=o.getDate().toString().padStart(2,"0");return`${r}-${e}-${a}`}function je(){let o=new Date,r=e=>e.toString().padStart(2,"0");return`${o.getFullYear()}-${r(o.getMonth()+1)}-${r(o.getDate())}T${r(o.getHours())}:${r(o.getMinutes())}:${r(o.getSeconds())}`}export{D as default};

import{b as Ic,c as Ec,f as Sh,g as Dc}from"./chunk-EOG6CNDG.js";import{a as G,b as Q,e as Ae,g as Th,h as Mh,i as h}from"./chunk-CSTXWUWE.js";var ec=Ae(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var Ya=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xa.default=Ya});var nc=Ae(zn=>{"use strict";var yf=zn&&zn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zn,"__esModule",{value:!0});var L_=yf((Dc(),Mh(Sh))),F_=yf(ec()),tc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=L_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>h(this,null,function*(){var i,a,c;let l=null,u=null,d=null,p=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){let E=yield s.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=E:u=JSON.parse(E))}let m=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),y=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let m=yield s.text();try{l=JSON.parse(m),Array.isArray(l)&&s.status===404&&(u=[],l=null,p=200,f="OK")}catch{s.status===404&&m===""?(p=204,f="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,f="OK"),l&&this.shouldThrowOnError)throw new F_.default(l)}return{error:l,data:u,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(o=o.catch(s=>{var i,a,c;return{error:{message:`${(i=s?.name)!==null&&i!==void 0?i:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=s?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};zn.default=tc});var oc=Ae(Wn=>{"use strict";var V_=Wn&&Wn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wn,"__esModule",{value:!0});var $_=V_(nc()),rc=class extends $_.default{select(e){let n=!1,r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){let i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){let o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){let s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var a;let c=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wn.default=rc});var Yo=Ae(Gn=>{"use strict";var H_=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gn,"__esModule",{value:!0});var U_=H_(oc()),sc=class extends U_.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){let r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");let i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){let o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Gn.default=sc});var ac=Ae(Jn=>{"use strict";var B_=Jn&&Jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jn,"__esModule",{value:!0});var Qn=B_(Yo()),ic=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=n,this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){let o=n?"HEAD":"GET",s=!1,i=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new Qn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){let o="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let i=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(i.length>0){let a=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Qn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){let i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){let r="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new Qn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Qn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Jn.default=ic});var vf=Ae(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.version=void 0;Xo.version="0.0.0-automated"});var wf=Ae(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.DEFAULT_HEADERS=void 0;var q_=vf();es.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${q_.version}`}});var bf=Ae(Zn=>{"use strict";var _f=Zn&&Zn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zn,"__esModule",{value:!0});var z_=_f(ac()),W_=_f(Yo()),G_=wf(),cc=class t{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},G_.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=o}from(e){let n=new URL(`${this.url}/${e}`);return new z_.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new t(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){let i,a=new URL(`${this.url}/rpc/${e}`),c;r||o?(i=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(i="POST",c=n);let l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new W_.default({method:i,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Zn.default=cc});var Mf=Ae(q=>{"use strict";var nn=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(q,"__esModule",{value:!0});q.PostgrestError=q.PostgrestBuilder=q.PostgrestTransformBuilder=q.PostgrestFilterBuilder=q.PostgrestQueryBuilder=q.PostgrestClient=void 0;var If=nn(bf());q.PostgrestClient=If.default;var Ef=nn(ac());q.PostgrestQueryBuilder=Ef.default;var Df=nn(Yo());q.PostgrestFilterBuilder=Df.default;var xf=nn(oc());q.PostgrestTransformBuilder=xf.default;var Cf=nn(nc());q.PostgrestBuilder=Cf.default;var Tf=nn(ec());q.PostgrestError=Tf.default;q.default={PostgrestClient:If.default,PostgrestQueryBuilder:Ef.default,PostgrestFilterBuilder:Df.default,PostgrestTransformBuilder:xf.default,PostgrestBuilder:Cf.default,PostgrestError:Tf.default}});function Es(t,e){return Object.is(t,e)}var H=null,dr=!1,Ds=1,ce=Symbol("SIGNAL");function C(t){let e=H;return H=t,e}function xs(){return H}var gn={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mn(t){if(dr)throw new Error("");if(H===null)return;H.consumerOnSignalRead(t);let e=H.nextProducerIndex++;if(gr(H),e<H.producerNode.length&&H.producerNode[e]!==t&&pn(H)){let n=H.producerNode[e];pr(n,H.producerIndexOfThis[e])}H.producerNode[e]!==t&&(H.producerNode[e]=t,H.producerIndexOfThis[e]=pn(H)?Cc(t,H,e):0),H.producerLastReadVersion[e]=t.version}function xc(){Ds++}function Cs(t){if(!(pn(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ds)){if(!t.producerMustRecompute(t)&&!Ns(t)){Is(t);return}t.producerRecomputeValue(t),Is(t)}}function Ts(t){if(t.liveConsumerNode===void 0)return;let e=dr;dr=!0;try{for(let n of t.liveConsumerNode)n.dirty||Nh(n)}finally{dr=e}}function Ms(){return H?.consumerAllowSignalWrites!==!1}function Nh(t){t.dirty=!0,Ts(t),t.consumerMarkedDirty?.(t)}function Is(t){t.dirty=!1,t.lastCleanEpoch=Ds}function hr(t){return t&&(t.nextProducerIndex=0),C(t)}function Ss(t,e){if(C(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(pn(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)pr(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ns(t){gr(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Cs(n),r!==n.version))return!0}return!1}function ks(t){if(gr(t),pn(t))for(let e=0;e<t.producerNode.length;e++)pr(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Cc(t,e,n){if(Tc(t),t.liveConsumerNode.length===0&&Mc(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Cc(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function pr(t,e){if(Tc(t),t.liveConsumerNode.length===1&&Mc(t))for(let r=0;r<t.producerNode.length;r++)pr(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];gr(o),o.producerIndexOfThis[r]=e}}function pn(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function gr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Tc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Mc(t){return t.producerNode!==void 0}function As(t,e){let n=Object.create(kh);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Cs(n),mn(n),n.value===fr)throw n.error;return n.value};return r[ce]=n,r}var _s=Symbol("UNSET"),bs=Symbol("COMPUTING"),fr=Symbol("ERRORED"),kh=Q(G({},gn),{value:_s,dirty:!0,error:null,equal:Es,kind:"computed",producerMustRecompute(t){return t.value===_s||t.value===bs},producerRecomputeValue(t){if(t.value===bs)throw new Error("Detected cycle in computations.");let e=t.value;t.value=bs;let n=hr(t),r,o=!1;try{r=t.computation(),C(null),o=e!==_s&&e!==fr&&r!==fr&&t.equal(e,r)}catch(s){r=fr,t.error=s}finally{Ss(t,n)}if(o){t.value=e;return}t.value=r,t.version++}});function Ah(){throw new Error}var Sc=Ah;function Nc(t){Sc(t)}function Os(t){Sc=t}var Oh=null;function Rs(t,e){let n=Object.create(mr);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(mn(n),n.value);return r[ce]=n,r}function yn(t,e){Ms()||Nc(t),t.equal(t.value,e)||(t.value=e,Rh(t))}function Ps(t,e){Ms()||Nc(t),yn(t,e(t.value))}var mr=Q(G({},gn),{equal:Es,value:void 0,kind:"signal"});function Rh(t){t.version++,xc(),Ts(t),Oh?.()}function js(t){let e=C(null);try{return t()}finally{C(e)}}var Ls;function vn(){return Ls}function Oe(t){let e=Ls;return Ls=t,e}var yr=Symbol("NotFound");function w(t){return typeof t=="function"}function Nt(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var vr=Nt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function wn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var U=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(w(r))try{r()}catch(s){e=s instanceof vr?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{kc(s)}catch(i){e=e??[],i instanceof vr?e=[...e,...i.errors]:e.push(i)}}if(e)throw new vr(e)}}add(e){var n;if(e&&e!==this)if(this.closed)kc(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&wn(n,e)}remove(e){let{_finalizers:n}=this;n&&wn(n,e),e instanceof t&&e._removeParent(this)}};U.EMPTY=(()=>{let t=new U;return t.closed=!0,t})();var Fs=U.EMPTY;function wr(t){return t instanceof U||t&&"closed"in t&&w(t.remove)&&w(t.add)&&w(t.unsubscribe)}function kc(t){w(t)?t():t.unsubscribe()}var he={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var kt={setTimeout(t,e,...n){let{delegate:r}=kt;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=kt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function _r(t){kt.setTimeout(()=>{let{onUnhandledError:e}=he;if(e)e(t);else throw t})}function _n(){}var Ac=Vs("C",void 0,void 0);function Oc(t){return Vs("E",void 0,t)}function Rc(t){return Vs("N",t,void 0)}function Vs(t,e,n){return{kind:t,value:e,error:n}}var Xe=null;function At(t){if(he.useDeprecatedSynchronousErrorHandling){let e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Xe;if(Xe=null,n)throw r}}else t()}function Pc(t){he.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=t)}var et=class extends U{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wr(e)&&e.add(this)):this.destination=$h}static create(e,n,r){return new Ot(e,n,r)}next(e){this.isStopped?Hs(Rc(e),this):this._next(e)}error(e){this.isStopped?Hs(Oc(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hs(Ac,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Fh=Function.prototype.bind;function $s(t,e){return Fh.call(t,e)}var Us=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){br(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){br(r)}else br(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){br(n)}}},Ot=class extends et{constructor(e,n,r){super();let o;if(w(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&he.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&$s(e.next,s),error:e.error&&$s(e.error,s),complete:e.complete&&$s(e.complete,s)}):o=e}this.destination=new Us(o)}};function br(t){he.useDeprecatedSynchronousErrorHandling?Pc(t):_r(t)}function Vh(t){throw t}function Hs(t,e){let{onStoppedNotification:n}=he;n&&kt.setTimeout(()=>n(t,e))}var $h={closed:!0,next:_n,error:Vh,complete:_n};var Rt=typeof Symbol=="function"&&Symbol.observable||"@@observable";function re(t){return t}function Hh(...t){return Bs(t)}function Bs(t){return t.length===0?re:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var A=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let s=Bh(n)?n:new Ot(n,r,o);return At(()=>{let{operator:i,source:a}=this;s.add(i?i.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=jc(r),new r((o,s)=>{let i=new Ot({next:a=>{try{n(a)}catch(c){s(c),i.unsubscribe()}},error:s,complete:o});this.subscribe(i)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Rt](){return this}pipe(...n){return Bs(n)(this)}toPromise(n){return n=jc(n),new n((r,o)=>{let s;this.subscribe(i=>s=i,i=>o(i),()=>r(s))})}}return t.create=e=>new t(e),t})();function jc(t){var e;return(e=t??he.Promise)!==null&&e!==void 0?e:Promise}function Uh(t){return t&&w(t.next)&&w(t.error)&&w(t.complete)}function Bh(t){return t&&t instanceof et||Uh(t)&&wr(t)}function qs(t){return w(t?.lift)}function S(t){return e=>{if(qs(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function T(t,e,n,r,o){return new zs(t,e,n,r,o)}var zs=class extends et{constructor(e,n,r,o,s,i){super(e),this.onFinalize=s,this.shouldUnsubscribe=i,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ws(){return S((t,e)=>{let n=null;t._refCount++;let r=T(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,s=n;n=null,o&&(!s||o===s)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Gs=class extends A{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,qs(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new U;let n=this.getSubject();e.add(this.source.subscribe(T(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=U.EMPTY)}return e}refCount(){return Ws()(this)}};var Lc=Nt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class t extends A{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ir(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Lc}next(n){At(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){At(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){At(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:s}=this;return r||o?Fs:(this.currentObservers=null,s.push(n),new U(()=>{this.currentObservers=null,wn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:s}=this;r?n.error(o):s&&n.complete()}asObservable(){let n=new A;return n.source=this,n}}return t.create=(e,n)=>new Ir(e,n),t})(),Ir=class extends He{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Fs}};var bn=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var In=new A(t=>t.complete());function Fc(t){return t&&w(t.schedule)}function Vc(t){return t[t.length-1]}function Er(t){return w(Vc(t))?t.pop():void 0}function Ue(t){return Fc(Vc(t))?t.pop():void 0}function Hc(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function $c(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(t){return this instanceof tt?(this.v=t,this):new tt(t)}function Uc(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){r[f]&&(o[f]=function(m){return new Promise(function(y,E){s.push([f,m,y,E])>1||c(f,m)})},g&&(o[f]=g(o[f])))}function c(f,g){try{l(r[f](g))}catch(m){p(s[0][3],m)}}function l(f){f.value instanceof tt?Promise.resolve(f.value.v).then(u,d):p(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function p(f,g){f(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Bc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $c=="function"?$c(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(i){return new Promise(function(a,c){i=t[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},i)}}var Dr=t=>t&&typeof t.length=="number"&&typeof t!="function";function xr(t){return w(t?.then)}function Cr(t){return w(t[Rt])}function Tr(t){return Symbol.asyncIterator&&w(t?.[Symbol.asyncIterator])}function Mr(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qh(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sr=qh();function Nr(t){return w(t?.[Sr])}function kr(t){return Uc(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield tt(n.read());if(o)return yield tt(void 0);yield yield tt(r)}}finally{n.releaseLock()}})}function Ar(t){return w(t?.getReader)}function V(t){if(t instanceof A)return t;if(t!=null){if(Cr(t))return zh(t);if(Dr(t))return Wh(t);if(xr(t))return Gh(t);if(Tr(t))return qc(t);if(Nr(t))return Qh(t);if(Ar(t))return Jh(t)}throw Mr(t)}function zh(t){return new A(e=>{let n=t[Rt]();if(w(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Wh(t){return new A(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Gh(t){return new A(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,_r)})}function Qh(t){return new A(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function qc(t){return new A(e=>{Zh(t,e).catch(n=>e.error(n))})}function Jh(t){return qc(kr(t))}function Zh(t,e){var n,r,o,s;return Hc(this,void 0,void 0,function*(){try{for(n=Bc(t);r=yield n.next(),!r.done;){let i=r.value;if(e.next(i),e.closed)return}}catch(i){o={error:i}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(o)throw o.error}}e.complete()})}function K(t,e,n,r=0,o=!1){let s=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!o)return s}function Or(t,e=0){return S((n,r)=>{n.subscribe(T(r,o=>K(r,t,()=>r.next(o),e),()=>K(r,t,()=>r.complete(),e),o=>K(r,t,()=>r.error(o),e)))})}function Rr(t,e=0){return S((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zc(t,e){return V(t).pipe(Rr(e),Or(e))}function Wc(t,e){return V(t).pipe(Rr(e),Or(e))}function Gc(t,e){return new A(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Qc(t,e){return new A(n=>{let r;return K(n,e,()=>{r=t[Sr](),K(n,e,()=>{let o,s;try{({value:o,done:s}=r.next())}catch(i){n.error(i);return}s?n.complete():n.next(o)},0,!0)}),()=>w(r?.return)&&r.return()})}function Pr(t,e){if(!t)throw new Error("Iterable cannot be null");return new A(n=>{K(n,e,()=>{let r=t[Symbol.asyncIterator]();K(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Jc(t,e){return Pr(kr(t),e)}function Zc(t,e){if(t!=null){if(Cr(t))return zc(t,e);if(Dr(t))return Gc(t,e);if(xr(t))return Wc(t,e);if(Tr(t))return Pr(t,e);if(Nr(t))return Qc(t,e);if(Ar(t))return Jc(t,e)}throw Mr(t)}function Be(t,e){return e?Zc(t,e):V(t)}function Kh(...t){let e=Ue(t);return Be(t,e)}function Yh(t,e){let n=w(t)?t:()=>t,r=o=>o.error(n());return new A(e?o=>e.schedule(r,0,o):r)}function Xh(t){return!!t&&(t instanceof A||w(t.lift)&&w(t.subscribe))}var nt=Nt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function rt(t,e){return S((n,r)=>{let o=0;n.subscribe(T(r,s=>{r.next(t.call(e,s,o++))}))})}var{isArray:ep}=Array;function tp(t,e){return ep(e)?t(...e):t(e)}function jr(t){return rt(e=>tp(t,e))}var{isArray:np}=Array,{getPrototypeOf:rp,prototype:op,keys:sp}=Object;function Lr(t){if(t.length===1){let e=t[0];if(np(e))return{args:e,keys:null};if(ip(e)){let n=sp(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function ip(t){return t&&typeof t=="object"&&rp(t)===op}function Fr(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function ap(...t){let e=Ue(t),n=Er(t),{args:r,keys:o}=Lr(t);if(r.length===0)return Be([],e);let s=new A(cp(r,e,o?i=>Fr(o,i):re));return n?s.pipe(jr(n)):s}function cp(t,e,n=re){return r=>{Kc(e,()=>{let{length:o}=t,s=new Array(o),i=o,a=o;for(let c=0;c<o;c++)Kc(e,()=>{let l=Be(t[c],e),u=!1;l.subscribe(T(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--i||r.complete()}))},r)},r)}}function Kc(t,e,n){t?K(n,t,e):e()}function Yc(t,e,n,r,o,s,i,a){let c=[],l=0,u=0,d=!1,p=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?g(m):c.push(m),g=m=>{s&&e.next(m),l++;let y=!1;V(n(m,u++)).subscribe(T(e,E=>{o?.(E),s?f(E):e.next(E)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let E=c.shift();i?K(e,i,()=>g(E)):g(E)}p()}catch(E){e.error(E)}}))};return t.subscribe(T(e,f,()=>{d=!0,p()})),()=>{a?.()}}function ot(t,e,n=1/0){return w(e)?ot((r,o)=>rt((s,i)=>e(r,s,o,i))(V(t(r,o))),n):(typeof e=="number"&&(n=e),S((r,o)=>Yc(r,o,t,n)))}function Qs(t=1/0){return ot(re,t)}function Xc(){return Qs(1)}function Vr(...t){return Xc()(Be(t,Ue(t)))}function lp(t){return new A(e=>{V(t()).subscribe(e)})}function up(...t){let e=Er(t),{args:n,keys:r}=Lr(t),o=new A(s=>{let{length:i}=n;if(!i){s.complete();return}let a=new Array(i),c=i,l=i;for(let u=0;u<i;u++){let d=!1;V(n[u]).subscribe(T(s,p=>{d||(d=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?Fr(r,a):a),s.complete())}))}});return e?o.pipe(jr(e)):o}function En(t,e){return S((n,r)=>{let o=0;n.subscribe(T(r,s=>t.call(e,s,o++)&&r.next(s)))})}function el(t){return S((e,n)=>{let r=null,o=!1,s;r=e.subscribe(T(n,void 0,void 0,i=>{s=V(t(i,el(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(n))})}function tl(t,e,n,r,o){return(s,i)=>{let a=n,c=e,l=0;s.subscribe(T(i,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&i.next(c)},o&&(()=>{a&&i.next(c),i.complete()})))}}function dp(t,e){return w(e)?ot(t,e,1):ot(t,1)}function Dn(t){return S((e,n)=>{let r=!1;e.subscribe(T(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Js(t){return t<=0?()=>In:S((e,n)=>{let r=0;e.subscribe(T(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function $r(t=fp){return S((e,n)=>{let r=!1;e.subscribe(T(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function fp(){return new nt}function hp(t){return S((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function pp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?En((o,s)=>t(o,s,r)):re,Js(1),n?Dn(e):$r(()=>new nt))}function Zs(t){return t<=0?()=>In:S((e,n)=>{let r=[];e.subscribe(T(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function gp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?En((o,s)=>t(o,s,r)):re,Zs(1),n?Dn(e):$r(()=>new nt))}function mp(t,e){return S(tl(t,e,arguments.length>=2,!0))}function yp(...t){let e=Ue(t);return S((n,r)=>{(e?Vr(t,n,e):Vr(t,n)).subscribe(r)})}function vp(t,e){return S((n,r)=>{let o=null,s=0,i=!1,a=()=>i&&!o&&r.complete();n.subscribe(T(r,c=>{o?.unsubscribe();let l=0,u=s++;V(t(c,u)).subscribe(o=T(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{i=!0,a()}))})}function wp(t){return S((e,n)=>{V(t).subscribe(T(n,()=>n.complete(),_n)),!n.closed&&e.subscribe(n)})}function _p(t,e,n){let r=w(t)||e||n?{next:t,error:e,complete:n}:t;return r?S((o,s)=>{var i;(i=r.subscribe)===null||i===void 0||i.call(r);let a=!0;o.subscribe(T(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):re}var Ul="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",N=class extends Error{code;constructor(e,n){super(Ip(e,n)),this.code=e}};function bp(t){return`NG0${Math.abs(t)}`}function Ip(t,e){return`${bp(t)}${e?": "+e:""}`}var Bl=Symbol("InputSignalNode#UNSET"),Ep=Q(G({},mr),{transformFn:void 0,applyValueToInputSignal(t,e){yn(t,e)}});function ql(t,e){let n=Object.create(Ep);n.value=t,n.transformFn=e?.transform;function r(){if(mn(n),n.value===Bl){let o=null;throw new N(-950,o)}return n.value}return r[ce]=n,r}function Vn(t){return{toString:t}.toString()}var Hr="__parameters__";function Dp(t){return function(...n){if(t){let r=t(...n);for(let o in r)this[o]=r[o]}}}function zl(t,e,n){return Vn(()=>{let r=Dp(e);function o(...s){if(this instanceof o)return r.apply(this,s),this;let i=new o(...s);return a.annotation=i,a;function a(c,l,u){let d=c.hasOwnProperty(Hr)?c[Hr]:Object.defineProperty(c,Hr,{value:[]})[Hr];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(i),c}}return o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var qe=globalThis;function R(t){for(let e in t)if(t[e]===R)return e;throw Error("Could not find renamed property on target object.")}function xp(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ee(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ee).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function ui(t,e){return t?e?`${t} ${e}`:t:e||""}var Cp=R({__forward_ref__:R});function Wl(t){return t.__forward_ref__=Wl,t.toString=function(){return ee(this())},t}function J(t){return Gl(t)?t():t}function Gl(t){return typeof t=="function"&&t.hasOwnProperty(Cp)&&t.__forward_ref__===Wl}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function kT(t){return{providers:t.providers||[],imports:t.imports||[]}}function Co(t){return nl(t,Ql)||nl(t,Jl)}function AT(t){return Co(t)!==null}function nl(t,e){return t.hasOwnProperty(e)?t[e]:null}function Tp(t){let e=t&&(t[Ql]||t[Jl]);return e||null}function rl(t){return t&&(t.hasOwnProperty(ol)||t.hasOwnProperty(Mp))?t[ol]:null}var Ql=R({\u0275prov:R}),ol=R({\u0275inj:R}),Jl=R({ngInjectableDef:R}),Mp=R({ngInjectorDef:R}),P=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Zl(t){return t&&!!t.\u0275providers}var Sp=R({\u0275cmp:R}),Np=R({\u0275dir:R}),kp=R({\u0275pipe:R}),Ap=R({\u0275mod:R}),Kr=R({\u0275fac:R}),Mn=R({__NG_ELEMENT_ID__:R}),sl=R({__NG_ENV_ID__:R});function Ht(t){return typeof t=="string"?t:t==null?"":String(t)}function Op(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ht(t)}function Kl(t,e){throw new N(-200,t)}function la(t,e){throw new N(-201,!1)}var M=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(M||{}),di;function Yl(){return di}function Y(t){let e=di;return di=t,e}function Xl(t,e,n){let r=Co(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&M.Optional)return null;if(e!==void 0)return e;la(t,"Injector")}var Rp={},it=Rp,fi="__NG_DI_FLAG__",Yr=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?yr:it,r)}},Xr="ngTempTokenPath",Pp="ngTokenPath",jp=/\n/gm,Lp="\u0275",il="__source";function Fp(t,e=M.Default){if(vn()===void 0)throw new N(-203,!1);if(vn()===null)return Xl(t,void 0,e);{let n=vn(),r;return n instanceof Yr?r=n.injector:r=n,r.get(t,e&M.Optional?null:void 0,e)}}function Qe(t,e=M.Default){return(Yl()||Fp)(J(t),e)}function k(t,e=M.Default){return Qe(t,To(e))}function To(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hi(t){let e=[];for(let n=0;n<t.length;n++){let r=J(t[n]);if(Array.isArray(r)){if(r.length===0)throw new N(900,!1);let o,s=M.Default;for(let i=0;i<r.length;i++){let a=r[i],c=Vp(a);typeof c=="number"?c===-1?o=a.token:s|=c:o=a}e.push(Qe(o,s))}else e.push(Qe(r))}return e}function eu(t,e){return t[fi]=e,t.prototype[fi]=e,t}function Vp(t){return t[fi]}function $p(t,e,n,r){let o=t[Xr];throw e[il]&&o.unshift(e[il]),t.message=Hp(`
`+t.message,o,n,r),t[Pp]=o,t[Xr]=null,t}function Hp(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Lp?t.slice(2):t;let o=ee(e);if(Array.isArray(e))o=e.map(ee).join(" -> ");else if(typeof e=="object"){let s=[];for(let i in e)if(e.hasOwnProperty(i)){let a=e[i];s.push(i+":"+(typeof a=="string"?JSON.stringify(a):ee(a)))}o=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(jp,`
  `)}`}var Up=eu(zl("Optional"),8);var Bp=eu(zl("SkipSelf"),4);function ct(t,e){let n=t.hasOwnProperty(Kr);return n?t[Kr]:null}function qp(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],s=e[r];if(n&&(o=n(o),s=n(s)),s!==o)return!1}return!0}function zp(t){return t.flat(Number.POSITIVE_INFINITY)}function ua(t,e){t.forEach(n=>Array.isArray(n)?ua(n,e):e(n))}function tu(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function eo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Wp(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let s=o-2;t[o]=t[s],o--}t[e]=n,t[e+1]=r}}function da(t,e,n){let r=$n(t,e);return r>=0?t[r|1]=n:(r=~r,Wp(t,r,e,n)),r}function Ks(t,e){let n=$n(t,e);if(n>=0)return t[n|1]}function $n(t,e){return Gp(t,e,1)}function Gp(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let s=r+(o-r>>1),i=t[s<<n];if(e===i)return s<<n;i>e?o=s:r=s+1}return~(o<<n)}var lt={},X=[],to=new P(""),nu=new P("",-1),ru=new P(""),no=class{get(e,n=it){if(n===it){let r=new Error(`NullInjectorError: No provider for ${ee(e)}!`);throw r.name="NullInjectorError",r}return n}};function ou(t,e){let n=t[Ap]||null;if(!n&&e===!0)throw new Error(`Type ${ee(t)} does not have '\u0275mod' property.`);return n}function ut(t){return t[Sp]||null}function Qp(t){return t[Np]||null}function Jp(t){return t[kp]||null}function su(t){return{\u0275providers:t}}function Zp(...t){return{\u0275providers:iu(!0,t),\u0275fromNgModule:!0}}function iu(t,...e){let n=[],r=new Set,o,s=i=>{n.push(i)};return ua(e,i=>{let a=i;pi(a,s,[],r)&&(o||=[],o.push(a))}),o!==void 0&&au(o,s),n}function au(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];fa(o,s=>{e(s,r)})}}function pi(t,e,n,r){if(t=J(t),!t)return!1;let o=null,s=rl(t),i=!s&&ut(t);if(!s&&!i){let c=t.ngModule;if(s=rl(c),s)o=c;else return!1}else{if(i&&!i.standalone)return!1;o=t}let a=r.has(o);if(i){if(a)return!1;if(r.add(o),i.dependencies){let c=typeof i.dependencies=="function"?i.dependencies():i.dependencies;for(let l of c)pi(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(o);let l;try{ua(s.imports,u=>{pi(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&au(l,e)}if(!a){let l=ct(o)||(()=>new o);e({provide:o,useFactory:l,deps:X},o),e({provide:ru,useValue:o,multi:!0},o),e({provide:to,useValue:()=>Qe(o),multi:!0},o)}let c=s.providers;if(c!=null&&!a){let l=t;fa(c,u=>{e(u,l)})}}else return!1;return o!==t&&t.providers!==void 0}function fa(t,e){for(let n of t)Zl(n)&&(n=n.\u0275providers),Array.isArray(n)?fa(n,e):e(n)}var Kp=R({provide:String,useValue:R});function cu(t){return t!==null&&typeof t=="object"&&Kp in t}function Yp(t){return!!(t&&t.useExisting)}function Xp(t){return!!(t&&t.useFactory)}function Ut(t){return typeof t=="function"}function eg(t){return!!t.useClass}var lu=new P(""),zr={},al={},Ys;function ha(){return Ys===void 0&&(Ys=new no),Ys}var Je=class{},Nn=class extends Je{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,mi(e,i=>this.processProvider(i)),this.records.set(nu,Pt(void 0,this)),o.has("environment")&&this.records.set(Je,Pt(void 0,this));let s=this.records.get(lu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ru,X,M.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?yr:it,r)}destroy(){Cn(this),this._destroyed=!0;let e=C(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),C(e)}}onDestroy(e){return Cn(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Cn(this);let n=Oe(this),r=Y(void 0),o;try{return e()}finally{Oe(n),Y(r)}}get(e,n=it,r=M.Default){if(Cn(this),e.hasOwnProperty(sl))return e[sl](this);r=To(r);let o,s=Oe(this),i=Y(void 0);try{if(!(r&M.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=sg(e)&&Co(e);l&&this.injectableDefInScope(l)?c=Pt(gi(e),zr):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&M.Self?ha():this.parent;return n=r&M.Optional&&n===it?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Xr]=a[Xr]||[]).unshift(ee(e)),s)throw a;return $p(a,e,"R3InjectorError",this.source)}else throw a}finally{Y(i),Oe(s)}}resolveInjectorInitializers(){let e=C(null),n=Oe(this),r=Y(void 0),o;try{let s=this.get(to,X,M.Self);for(let i of s)i()}finally{Oe(n),Y(r),C(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ee(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=J(e);let n=Ut(e)?e:J(e&&e.provide),r=ng(e);if(!Ut(e)&&e.multi===!0){let o=this.records.get(n);o||(o=Pt(void 0,zr,!0),o.factory=()=>hi(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=C(null);try{return n.value===al?Kl(ee(e)):n.value===zr&&(n.value=al,n.value=n.factory()),typeof n.value=="object"&&n.value&&og(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{C(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=J(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function gi(t){let e=Co(t),n=e!==null?e.factory:ct(t);if(n!==null)return n;if(t instanceof P)throw new N(204,!1);if(t instanceof Function)return tg(t);throw new N(204,!1)}function tg(t){if(t.length>0)throw new N(204,!1);let n=Tp(t);return n!==null?()=>n.factory(t):()=>new t}function ng(t){if(cu(t))return Pt(void 0,t.useValue);{let e=uu(t);return Pt(e,zr)}}function uu(t,e,n){let r;if(Ut(t)){let o=J(t);return ct(o)||gi(o)}else if(cu(t))r=()=>J(t.useValue);else if(Xp(t))r=()=>t.useFactory(...hi(t.deps||[]));else if(Yp(t))r=()=>Qe(J(t.useExisting));else{let o=J(t&&(t.useClass||t.provide));if(rg(t))r=()=>new o(...hi(t.deps));else return ct(o)||gi(o)}return r}function Cn(t){if(t.destroyed)throw new N(205,!1)}function Pt(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function rg(t){return!!t.deps}function og(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function sg(t){return typeof t=="function"||typeof t=="object"&&t instanceof P}function mi(t,e){for(let n of t)Array.isArray(n)?mi(n,e):n&&Zl(n)?mi(n.\u0275providers,e):e(n)}function du(t,e){let n;t instanceof Nn?(Cn(t),n=t):n=new Yr(t);let r,o=Oe(n),s=Y(void 0);try{return e()}finally{Oe(o),Y(s)}}function fu(){return Yl()!==void 0||vn()!=null}function ig(t){if(!fu())throw new N(-203,!1)}function ag(t){return typeof t=="function"}var je=0,D=1,v=2,z=3,me=4,ye=5,ro=6,oo=7,te=8,Bt=9,Re=10,L=11,kn=12,cl=13,Kt=14,_e=15,dt=16,jt=17,Pe=18,Mo=19,hu=20,We=21,Xs=22,so=23,le=24,Vt=25,Z=26,pu=1;var ft=7,io=8,qt=9,oe=10;function Ge(t){return Array.isArray(t)&&typeof t[pu]=="object"}function Le(t){return Array.isArray(t)&&t[pu]===!0}function pa(t){return(t.flags&4)!==0}function Yt(t){return t.componentOffset>-1}function So(t){return(t.flags&1)===1}function be(t){return!!t.template}function ao(t){return(t[v]&512)!==0}function Hn(t){return(t[v]&256)===256}var yi=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function gu(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var OT=(()=>{let t=()=>mu;return t.ngInherit=!0,t})();function mu(t){return t.type.prototype.ngOnChanges&&(t.setInput=lg),cg}function cg(){let t=vu(this),e=t?.current;if(e){let n=t.previous;if(n===lt)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lg(t,e,n,r,o){let s=this.declaredInputs[r],i=vu(t)||ug(t,{previous:lt,current:null}),a=i.current||(i.current={}),c=i.previous,l=c[s];a[s]=new yi(l&&l.currentValue,n,c===lt),gu(t,e,o,n)}var yu="__ngSimpleChanges__";function vu(t){return t[yu]||null}function ug(t,e){return t[yu]=e}var ll=null;var O=function(t,e=null,n){ll?.(t,e,n)},wu="svg",dg="math";function Ie(t){for(;Array.isArray(t);)t=t[je];return t}function _u(t,e){return Ie(e[t])}function xe(t,e){return Ie(e[t.index])}function bu(t,e){return t.data[e]}function No(t,e){return t[e]}function Ee(t,e){let n=e[t];return Ge(n)?n:n[je]}function fg(t){return(t[v]&4)===4}function ga(t){return(t[v]&128)===128}function hg(t){return Le(t[z])}function zt(t,e){return e==null?null:t[e]}function Iu(t){t[jt]=0}function Eu(t){t[v]&1024||(t[v]|=1024,ga(t)&&Un(t))}function pg(t,e){for(;t>0;)e=e[Kt],t--;return e}function ko(t){return!!(t[v]&9216||t[le]?.dirty)}function vi(t){t[Re].changeDetectionScheduler?.notify(8),t[v]&64&&(t[v]|=1024),ko(t)&&Un(t)}function Un(t){t[Re].changeDetectionScheduler?.notify(0);let e=ht(t);for(;e!==null&&!(e[v]&8192||(e[v]|=8192,!ga(e)));)e=ht(e)}function Du(t,e){if(Hn(t))throw new N(911,!1);t[We]===null&&(t[We]=[]),t[We].push(e)}function gg(t,e){if(t[We]===null)return;let n=t[We].indexOf(e);n!==-1&&t[We].splice(n,1)}function ht(t){let e=t[z];return Le(e)?e[z]:e}function ma(t){return t[oo]??=[]}function ya(t){return t.cleanup??=[]}function mg(t,e,n,r){let o=ma(e);o.push(n),t.firstCreatePass&&ya(t).push(r,o.length-1)}var b={lFrame:ku(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wi=!1;function yg(){return b.lFrame.elementDepthCount}function vg(){b.lFrame.elementDepthCount++}function wg(){b.lFrame.elementDepthCount--}function va(){return b.bindingsEnabled}function _g(){return b.skipHydrationRootTNode!==null}function bg(t){return b.skipHydrationRootTNode===t}function Ig(){b.skipHydrationRootTNode=null}function I(){return b.lFrame.lView}function F(){return b.lFrame.tView}function RT(t){return b.lFrame.contextLView=t,t[te]}function PT(t){return b.lFrame.contextLView=null,t}function W(){let t=xu();for(;t!==null&&t.type===64;)t=t.parent;return t}function xu(){return b.lFrame.currentTNode}function Eg(){let t=b.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function vt(t,e){let n=b.lFrame;n.currentTNode=t,n.isParent=e}function wa(){return b.lFrame.isParent}function Cu(){b.lFrame.isParent=!1}function Dg(){return b.lFrame.contextLView}function Tu(){return wi}function ul(t){let e=wi;return wi=t,e}function Ze(){let t=b.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function xg(){return b.lFrame.bindingIndex}function Cg(t){return b.lFrame.bindingIndex=t}function Ao(){return b.lFrame.bindingIndex++}function _a(t){let e=b.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Tg(){return b.lFrame.inI18n}function Mg(t,e){let n=b.lFrame;n.bindingIndex=n.bindingRootIndex=t,_i(e)}function Sg(){return b.lFrame.currentDirectiveIndex}function _i(t){b.lFrame.currentDirectiveIndex=t}function Ng(t){let e=b.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Mu(){return b.lFrame.currentQueryIndex}function ba(t){b.lFrame.currentQueryIndex=t}function kg(t){let e=t[D];return e.type===2?e.declTNode:e.type===1?t[ye]:null}function Su(t,e,n){if(n&M.SkipSelf){let o=e,s=t;for(;o=o.parent,o===null&&!(n&M.Host);)if(o=kg(s),o===null||(s=s[Kt],o.type&10))break;if(o===null)return!1;e=o,t=s}let r=b.lFrame=Nu();return r.currentTNode=e,r.lView=t,!0}function Ia(t){let e=Nu(),n=t[D];b.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Nu(){let t=b.lFrame,e=t===null?null:t.child;return e===null?ku(t):e}function ku(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Au(){let t=b.lFrame;return b.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ou=Au;function Ea(){let t=Au();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ag(t){return(b.lFrame.contextLView=pg(t,b.lFrame.contextLView))[te]}function Ke(){return b.lFrame.selectedIndex}function pt(t){b.lFrame.selectedIndex=t}function Oo(){let t=b.lFrame;return bu(t.tView,t.selectedIndex)}function jT(){b.lFrame.currentNamespace=wu}function LT(){Og()}function Og(){b.lFrame.currentNamespace=null}function Rg(){return b.lFrame.currentNamespace}var Ru=!0;function Ro(){return Ru}function Po(t){Ru=t}function Pg(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:s}=e.type.prototype;if(r){let i=mu(e);(n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i)}o&&(n.preOrderHooks??=[]).push(0-t,o),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Da(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;i&&(t.contentHooks??=[]).push(-n,i),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Wr(t,e,n){Pu(t,e,3,n)}function Gr(t,e,n,r){(t[v]&3)===n&&Pu(t,e,n,r)}function ei(t,e){let n=t[v];(n&3)===e&&(n&=16383,n+=1,t[v]=n)}function Pu(t,e,n,r){let o=r!==void 0?t[jt]&65535:0,s=r??-1,i=e.length-1,a=0;for(let c=o;c<i;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[jt]+=65536),(a<s||s==-1)&&(jg(t,n,e,c),t[jt]=(t[jt]&4294901760)+c+2),c++}function dl(t,e){O(4,t,e);let n=C(null);try{e.call(t)}finally{C(n),O(5,t,e)}}function jg(t,e,n,r){let o=n[r]<0,s=n[r+1],i=o?-n[r]:n[r],a=t[i];o?t[v]>>14<t[jt]>>16&&(t[v]&3)===e&&(t[v]+=16384,dl(a,s)):dl(a,s)}var $t=-1,gt=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function Lg(t){return(t.flags&8)!==0}function Fg(t){return(t.flags&16)!==0}function Vg(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let s=n[r++],i=n[r++],a=n[r++];t.setAttribute(e,i,a,s)}else{let s=o,i=n[++r];$g(s)?t.setProperty(e,s,i):t.setAttribute(e,s,i),r++}}return r}function ju(t){return t===3||t===4||t===6}function $g(t){return t.charCodeAt(0)===64}function Wt(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?fl(t,n,o,null,e[++r]):fl(t,n,o,null,null))}}return t}function fl(t,e,n,r,o){let s=0,i=t.length;if(e===-1)i=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){i=-1;break}else if(a>e){i=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){o!==null&&(t[s+1]=o);return}s++,o!==null&&s++}i!==-1&&(t.splice(i,0,e),s=i+1),t.splice(s++,0,n),o!==null&&t.splice(s++,0,o)}function Lu(t){return t!==$t}function co(t){return t&32767}function Hg(t){return t>>16}function lo(t,e){let n=Hg(t),r=e;for(;n>0;)r=r[Kt],n--;return r}var bi=!0;function uo(t){let e=bi;return bi=t,e}var Ug=256,Fu=Ug-1,Vu=5,Bg=0,we={};function qg(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mn)&&(r=n[Mn]),r==null&&(r=n[Mn]=Bg++);let o=r&Fu,s=1<<o;e.data[t+(o>>Vu)]|=s}function fo(t,e){let n=$u(t,e);if(n!==-1)return n;let r=e[D];r.firstCreatePass&&(t.injectorIndex=e.length,ti(r.data,t),ti(e,null),ti(r.blueprint,null));let o=xa(t,e),s=t.injectorIndex;if(Lu(o)){let i=co(o),a=lo(o,e),c=a[D].data;for(let l=0;l<8;l++)e[s+l]=a[i+l]|c[i+l]}return e[s+8]=o,s}function ti(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $u(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function xa(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=zu(o),r===null)return $t;if(n++,o=o[Kt],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $t}function Ii(t,e,n){qg(t,e,n)}function zg(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,o=0;for(;o<r;){let s=n[o];if(ju(s))break;if(s===0)o=o+2;else if(typeof s=="number")for(o++;o<r&&typeof n[o]=="string";)o++;else{if(s===e)return n[o+1];o=o+2}}}return null}function Hu(t,e,n){if(n&M.Optional||t!==void 0)return t;la(e,"NodeInjector")}function Uu(t,e,n,r){if(n&M.Optional&&r===void 0&&(r=null),(n&(M.Self|M.Host))===0){let o=t[Bt],s=Y(void 0);try{return o?o.get(e,r,n&M.Optional):Xl(e,r,n&M.Optional)}finally{Y(s)}}return Hu(r,e,n)}function Bu(t,e,n,r=M.Default,o){if(t!==null){if(e[v]&2048&&!(r&M.Self)){let i=Jg(t,e,n,r,we);if(i!==we)return i}let s=qu(t,e,n,r,we);if(s!==we)return s}return Uu(e,n,r,o)}function qu(t,e,n,r,o){let s=Gg(n);if(typeof s=="function"){if(!Su(e,t,r))return r&M.Host?Hu(o,n,r):Uu(e,n,r,o);try{let i;if(i=s(r),i==null&&!(r&M.Optional))la(n);else return i}finally{Ou()}}else if(typeof s=="number"){let i=null,a=$u(t,e),c=$t,l=r&M.Host?e[_e][ye]:null;for((a===-1||r&M.SkipSelf)&&(c=a===-1?xa(t,e):e[a+8],c===$t||!pl(r,!1)?a=-1:(i=e[D],a=co(c),e=lo(c,e)));a!==-1;){let u=e[D];if(hl(s,a,u.data)){let d=Wg(a,e,n,i,r,l);if(d!==we)return d}c=e[a+8],c!==$t&&pl(r,e[D].data[a+8]===l)&&hl(s,a,e)?(i=u,a=co(c),e=lo(c,e)):a=-1}}return o}function Wg(t,e,n,r,o,s){let i=e[D],a=i.data[t+8],c=r==null?Yt(a)&&bi:r!=i&&(a.type&3)!==0,l=o&M.Host&&s===a,u=Qr(a,i,n,c,l);return u!==null?An(e,i,u,a):we}function Qr(t,e,n,r,o){let s=t.providerIndexes,i=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,p=o?a+u:l;for(let f=d;f<p;f++){let g=i[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(o){let f=i[c];if(f&&be(f)&&f.type===n)return c}return null}function An(t,e,n,r){let o=t[n],s=e.data;if(o instanceof gt){let i=o;i.resolving&&Kl(Op(s[n]));let a=uo(i.canSeeViewProviders);i.resolving=!0;let c,l=i.injectImpl?Y(i.injectImpl):null,u=Su(t,r,M.Default);try{o=t[n]=i.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Pg(n,s[n],e)}finally{l!==null&&Y(l),uo(a),i.resolving=!1,Ou()}}return o}function Gg(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Mn)?t[Mn]:void 0;return typeof e=="number"?e>=0?e&Fu:Qg:e}function hl(t,e,n){let r=1<<t;return!!(n[e+(t>>Vu)]&r)}function pl(t,e){return!(t&M.Self)&&!(t&M.Host&&e)}var at=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Bu(this._tNode,this._lView,e,To(r),n)}};function Qg(){return new at(W(),I())}function FT(t){return Vn(()=>{let e=t.prototype.constructor,n=e[Kr]||Ei(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let s=o[Kr]||Ei(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function Ei(t){return Gl(t)?()=>{let e=Ei(J(t));return e&&e()}:ct(t)}function Jg(t,e,n,r,o){let s=t,i=e;for(;s!==null&&i!==null&&i[v]&2048&&!ao(i);){let a=qu(s,i,n,r|M.Self,we);if(a!==we)return a;let c=s.parent;if(!c){let l=i[hu];if(l){let u=l.get(n,we,r);if(u!==we)return u}c=zu(i),i=i[Kt]}s=c}return o}function zu(t){let e=t[D],n=e.type;return n===2?e.declTNode:n===1?t[ye]:null}function VT(t){return zg(W(),t)}function gl(t,e=null,n=null,r){let o=Wu(t,e,n,r);return o.resolveInjectorInitializers(),o}function Wu(t,e=null,n=null,r,o=new Set){let s=[n||X,Zp(t)];return r=r||(typeof t=="object"?void 0:ee(t)),new Nn(s,e||ha(),r||null,o)}var Gt=class t{static THROW_IF_NOT_FOUND=it;static NULL=new no;static create(e,n){if(Array.isArray(e))return gl({name:""},n,e,"");{let r=e.name??"";return gl({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>Qe(nu)});static __NG_ELEMENT_ID__=-1};var Zg=new P("");Zg.__NG_ELEMENT_ID__=t=>{let e=W();if(e===null)throw new N(204,!1);if(e.type&2)return e.value;if(t&M.Optional)return null;throw new N(204,!1)};var Gu=!1,Ca=(()=>{class t{static __NG_ELEMENT_ID__=Kg;static __NG_ENV_ID__=n=>n}return t})(),Di=class extends Ca{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return Du(this._lView,e),()=>gg(this._lView,e)}};function Kg(){return new Di(I())}var Qt=class{},Ta=new P("",{providedIn:"root",factory:()=>!1});var Qu=new P(""),Ju=new P(""),jo=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new bn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var xi=class extends He{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,fu()&&(this.destroyRef=k(Ca,{optional:!0})??void 0,this.pendingTasks=k(jo,{optional:!0})??void 0)}emit(e){let n=C(null);try{super.next(e)}finally{C(n)}}subscribe(e,n,r){let o=e,s=n||(()=>null),i=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),s=c.error?.bind(c),i=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),i&&(i=this.wrapInTimeout(i)));let a=super.subscribe({next:o,error:s,complete:i});return e instanceof U&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ze=xi;function ho(...t){}function Zu(t){let e,n;function r(){t=ho;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ml(t){return queueMicrotask(()=>t()),()=>{t=ho}}var Ma="isAngularZone",po=Ma+"_ID",Yg=0,se=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ze(!1);onMicrotaskEmpty=new ze(!1);onStable=new ze(!1);onError=new ze(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:s=Gu}=e;if(typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!o&&r,i.shouldCoalesceRunChangeDetection=o,i.callbackScheduled=!1,i.scheduleInRootZone=s,tm(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ma)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new N(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+o,e,Xg,ho,ho);try{return s.runTask(i,n,r)}finally{s.cancelTask(i)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Xg={};function Sa(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function em(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Zu(()=>{t.callbackScheduled=!1,Ci(t),t.isCheckStableRunning=!0,Sa(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Ci(t)}function tm(t){let e=()=>{em(t)},n=Yg++;t._inner=t._inner.fork({name:"angular",properties:{[Ma]:!0,[po]:n,[po+n]:!0},onInvokeTask:(r,o,s,i,a,c)=>{if(nm(c))return r.invokeTask(s,i,a,c);try{return yl(t),r.invokeTask(s,i,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),vl(t)}},onInvoke:(r,o,s,i,a,c,l)=>{try{return yl(t),r.invoke(s,i,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rm(c)&&e(),vl(t)}},onHasTask:(r,o,s,i)=>{r.hasTask(s,i),o===s&&(i.change=="microTask"?(t._hasPendingMicrotasks=i.microTask,Ci(t),Sa(t)):i.change=="macroTask"&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(r,o,s,i)=>(r.handleError(s,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}function Ci(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function yl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vl(t){t._nesting--,Sa(t)}var Ti=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ze;onMicrotaskEmpty=new ze;onStable=new ze;onError=new ze;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function nm(t){return Ku(t,"__ignore_ng_zone__")}function rm(t){return Ku(t,"__scheduler_tick__")}function Ku(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var mt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},om=new P("",{providedIn:"root",factory:()=>{let t=k(se),e=k(mt);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function wl(t,e){return ql(t,e)}function sm(t){return ql(Bl,t)}var $T=(wl.required=sm,wl);function im(){return Xt(W(),I())}function Xt(t,e){return new Lo(xe(t,e))}var Lo=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=im}return t})();function am(t){return t instanceof Lo?t.nativeElement:t}function cm(t){return typeof t=="function"&&t[ce]!==void 0}function HT(t,e){let n=Rs(t,e?.equal),r=n[ce];return n.set=o=>yn(r,o),n.update=o=>Ps(r,o),n.asReadonly=lm.bind(n),n}function lm(){let t=this[ce];if(t.readonlyFn===void 0){let e=()=>this();e[ce]=t,t.readonlyFn=e}return t.readonlyFn}function Yu(t){return cm(t)&&typeof t.set=="function"}function um(){return this._results[Symbol.iterator]()}var Mi=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new He}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=zp(e);(this._changesDetected=!qp(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=um};function Xu(t){return(t.flags&128)===128}var ed=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ed||{}),td=new Map,dm=0;function fm(){return dm++}function hm(t){td.set(t[Mo],t)}function Si(t){td.delete(t[Mo])}var _l="__ngContext__";function en(t,e){Ge(e)?(t[_l]=e[Mo],hm(e)):t[_l]=e}function nd(t){return od(t[kn])}function rd(t){return od(t[me])}function od(t){for(;t!==null&&!Le(t);)t=t[me];return t}var Ni;function UT(t){Ni=t}function pm(){if(Ni!==void 0)return Ni;if(typeof document<"u")return document;throw new N(210,!1)}var BT=new P("",{providedIn:"root",factory:()=>gm}),gm="ng",mm=new P(""),qT=new P("",{providedIn:"platform",factory:()=>"unknown"});var zT=new P("",{providedIn:"root",factory:()=>pm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ym="h",vm="b";var sd=!1,wm=new P("",{providedIn:"root",factory:()=>sd});var Na=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Na||{}),Fo=new P(""),bl=new Set;function ka(t){bl.has(t)||(bl.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var id=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=_m}return t})();function _m(){return new id(I(),W())}var Lt=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Lt||{}),ad=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),bm=[Lt.EarlyRead,Lt.Write,Lt.MixedReadWrite,Lt.Read],Im=(()=>{class t{ngZone=k(se);scheduler=k(Qt);errorHandler=k(mt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Fo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&O(16),this.executing=!0;for(let r of bm)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=o.hooks[r];return s(o.pipelinedValue)},o.snapshot))}catch(s){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&O(17)}register(n){let{view:r}=n;r!==void 0?((r[Vt]??=[]).push(n),Un(r),r[v]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Na.AFTER_NEXT_RENDER,n):n()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),ki=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,o,s,i=null){this.impl=e,this.hooks=n,this.view=r,this.once=o,this.snapshot=i,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Vt];e&&(this.view[Vt]=e.filter(n=>n!==this))}};function Em(t,e){!e?.injector&&ig(Em);let n=e?.injector??k(Gt);return ka("NgAfterNextRender"),xm(t,n,e,!0)}function Dm(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function xm(t,e,n,r){let o=e.get(ad);o.impl??=e.get(Im);let s=e.get(Fo,null,{optional:!0}),i=n?.phase??Lt.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Ca):null,c=e.get(id,null,{optional:!0}),l=new ki(o.impl,Dm(t,i),c?.view,r,a,s?.snapshot(null));return o.impl.register(l),l}var Cm=()=>null;function cd(t,e,n=!1){return Cm(t,e,n)}function ld(t,e){let n=t.contentQueries;if(n!==null){let r=C(null);try{for(let o=0;o<n.length;o+=2){let s=n[o],i=n[o+1];if(i!==-1){let a=t.data[i];ba(s),a.contentQueries(2,e[i],i)}}}finally{C(r)}}}function Ai(t,e,n){ba(0);let r=C(null);try{e(t,n)}finally{C(r)}}function Aa(t,e,n){if(pa(e)){let r=C(null);try{let o=e.directiveStart,s=e.directiveEnd;for(let i=o;i<s;i++){let a=t.data[i];if(a.contentQueries){let c=n[i];a.contentQueries(1,c,i)}}}finally{C(r)}}}var On=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(On||{}),Ur;function Tm(){if(Ur===void 0&&(Ur=null,qe.trustedTypes))try{Ur=qe.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ur}function Mm(t){return Tm()?.createScriptURL(t)||t}var Br;function Sm(){if(Br===void 0&&(Br=null,qe.trustedTypes))try{Br=qe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Br}function Il(t){return Sm()?.createScriptURL(t)||t}var go=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ul})`}};function Vo(t){return t instanceof go?t.changingThisBreaksApplicationSecurity:t}function ud(t,e){let n=Nm(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ul})`)}return n===e}function Nm(t){return t instanceof go&&t.getTypeName()||null}var km=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Am(t){return t=String(t),t.match(km)?t:"unsafe:"+t}var Oa=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Oa||{});function Om(t){let e=dd();return e?e.sanitize(Oa.URL,t)||"":ud(t,"URL")?Vo(t):Am(Ht(t))}function Rm(t){let e=dd();if(e)return Il(e.sanitize(Oa.RESOURCE_URL,t)||"");if(ud(t,"ResourceURL"))return Il(Vo(t));throw new N(904,!1)}function WT(t){return Mm(t[0])}function Pm(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Rm:Om}function GT(t,e,n){return Pm(e,n)(t)}function dd(){let t=I();return t&&t[Re].sanitizer}var jm=/^>|^->|<!--|-->|--!>|<!-$/g,Lm=/(<|>)/g,Fm="\u200B$1\u200B";function Vm(t){return t.replace(jm,e=>e.replace(Lm,Fm))}function QT(t){return t.ownerDocument}function fd(t){return t instanceof Function?t():t}function $m(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let s=e.length;if(o+s===r||t.charCodeAt(o+s)<=32)return o}n=o+1}}var hd="ng-template";function Hm(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&$m(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Ra(t))return!1;if(o=e.indexOf(1,o),o>-1){let s;for(;++o<e.length&&typeof(s=e[o])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Ra(t){return t.type===4&&t.value!==hd}function Um(t,e,n){let r=t.type===4&&!n?hd:t.value;return e===r}function Bm(t,e,n){let r=4,o=t.attrs,s=o!==null?Wm(o):0,i=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!i&&!pe(r)&&!pe(c))return!1;if(i&&pe(c))continue;i=!1,r=c|r&1;continue}if(!i)if(r&4){if(r=2|r&1,c!==""&&!Um(t,c,n)||c===""&&e.length===1){if(pe(r))return!1;i=!0}}else if(r&8){if(o===null||!Hm(t,o,c,n)){if(pe(r))return!1;i=!0}}else{let l=e[++a],u=qm(c,o,Ra(t),n);if(u===-1){if(pe(r))return!1;i=!0;continue}if(l!==""){let d;if(u>s?d="":d=o[u+1].toLowerCase(),r&2&&l!==d){if(pe(r))return!1;i=!0}}}}return pe(r)||i}function pe(t){return(t&1)===0}function qm(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let s=!1;for(;o<e.length;){let i=e[o];if(i===t)return o;if(i===3||i===6)s=!0;else if(i===1||i===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(i===4)break;if(i===0){o+=4;continue}}o+=s?1:2}return-1}else return Gm(e,t)}function zm(t,e,n=!1){for(let r=0;r<e.length;r++)if(Bm(t,e[r],n))return!0;return!1}function Wm(t){for(let e=0;e<t.length;e++){let n=t[e];if(ju(n))return e}return t.length}function Gm(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function El(t,e){return t?":not("+e.trim()+")":e}function Qm(t){let e=t[0],n=1,r=2,o="",s=!1;for(;n<t.length;){let i=t[n];if(typeof i=="string")if(r&2){let a=t[++n];o+="["+i+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+i:r&4&&(o+=" "+i);else o!==""&&!pe(i)&&(e+=El(s,o),o=""),r=i,s=s||!pe(r);n++}return o!==""&&(e+=El(s,o)),e}function Jm(t){return t.map(Qm).join(",")}function Zm(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")o===2?s!==""&&e.push(s,t[++r]):o===8&&n.push(s);else{if(!pe(o))break;o=s}r++}return n.length&&e.push(1,...n),e}var ie={};function Km(t,e){return t.createText(e)}function Ym(t,e,n){t.setValue(e,n)}function Xm(t,e){return t.createComment(Vm(e))}function pd(t,e,n){return t.createElement(e,n)}function mo(t,e,n,r,o){t.insertBefore(e,n,r,o)}function gd(t,e,n){t.appendChild(e,n)}function Dl(t,e,n,r,o){r!==null?mo(t,e,n,r,o):gd(t,e,n)}function ey(t,e,n){t.removeChild(null,e,n)}function ty(t,e,n){t.setAttribute(e,"style",n)}function ny(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function md(t,e,n){let{mergedAttrs:r,classes:o,styles:s}=n;r!==null&&Vg(t,e,r),o!==null&&ny(t,e,o),s!==null&&ty(t,e,s)}function Pa(t,e,n,r,o,s,i,a,c,l,u){let d=Z+r,p=d+o,f=ry(d,p),g=typeof l=="function"?l():l;return f[D]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof i=="function"?i():i,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function ry(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ie);return n}function oy(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Pa(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ja(t,e,n,r,o,s,i,a,c,l,u){let d=e.blueprint.slice();return d[je]=o,d[v]=r|4|128|8|64|1024,(l!==null||t&&t[v]&2048)&&(d[v]|=2048),Iu(d),d[z]=d[Kt]=t,d[te]=n,d[Re]=i||t&&t[Re],d[L]=a||t&&t[L],d[Bt]=c||t&&t[Bt]||null,d[ye]=s,d[Mo]=fm(),d[ro]=u,d[hu]=l,d[_e]=e.type==2?t[_e]:d,d}function sy(t,e,n){let r=xe(e,t),o=oy(n),s=t[Re].rendererFactory,i=La(t,ja(t,o,null,yd(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=i}function yd(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function vd(t,e,n,r){if(n===0)return-1;let o=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function La(t,e){return t[kn]?t[cl][me]=e:t[kn]=e,t[cl]=e,e}function JT(t=1){wd(F(),I(),Ke()+t,!1)}function wd(t,e,n,r){if(!r)if((e[v]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Wr(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Gr(e,s,0,n)}pt(n)}var $o=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}($o||{});function Oi(t,e,n,r){let o=C(null);try{let[s,i,a]=t.inputs[n],c=null;(i&$o.SignalBased)!==0&&(c=e[s][ce]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,s):gu(e,c,s,r)}finally{C(o)}}function _d(t,e,n,r,o){let s=Ke(),i=r&2;try{pt(-1),i&&e.length>Z&&wd(t,e,Z,!1),O(i?2:0,o),n(r,o)}finally{pt(s),O(i?3:1,o)}}function Ho(t,e,n){dy(t,e,n),(n.flags&64)===64&&fy(t,e,n)}function Fa(t,e,n=xe){let r=e.localNames;if(r!==null){let o=e.index+1;for(let s=0;s<r.length;s+=2){let i=r[s+1],a=i===-1?n(e,t):t[i];t[o++]=a}}}function iy(t,e,n,r){let s=r.get(wm,sd)||n===On.ShadowDom,i=t.selectRootElement(e,s);return ay(i),i}function ay(t){cy(t)}var cy=()=>null;function ly(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Va(t,e,n,r,o,s,i,a){if(!a&&Ha(e,t,n,r,o)){Yt(e)&&uy(n,e.index);return}if(e.type&3){let c=xe(e,n);r=ly(r),o=i!=null?i(o,e.value||"",r):o,s.setProperty(c,r,o)}else e.type&12}function uy(t,e){let n=Ee(e,t);n[v]&16||(n[v]|=64)}function dy(t,e,n){let r=n.directiveStart,o=n.directiveEnd;Yt(n)&&sy(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||fo(n,e);let s=n.initialInputs;for(let i=r;i<o;i++){let a=t.data[i],c=An(e,t,i,n);if(en(c,e),s!==null&&my(e,i-r,c,a,n,s),be(a)){let l=Ee(n.index,e);l[te]=An(e,t,i,n)}}}function fy(t,e,n){let r=n.directiveStart,o=n.directiveEnd,s=n.index,i=Sg();try{pt(s);for(let a=r;a<o;a++){let c=t.data[a],l=e[a];_i(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hy(c,l)}}finally{pt(-1),_i(i)}}function hy(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function $a(t,e){let n=t.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];zm(e,s.selectors,!1)&&(r??=[],be(s)?r.unshift(s):r.push(s))}return r}function py(t,e,n,r,o,s){let i=xe(t,e);gy(e[L],i,s,t.value,n,r,o)}function gy(t,e,n,r,o,s,i){if(s==null)t.removeAttribute(e,o,n);else{let a=i==null?Ht(s):i(s,r||"",o);t.setAttribute(e,o,a,n)}}function my(t,e,n,r,o,s){let i=s[e];if(i!==null)for(let a=0;a<i.length;a+=2){let c=i[a],l=i[a+1];Oi(r,n,c,l)}}function yy(t,e){let n=t[Bt],r=n?n.get(mt,null):null;r&&r.handleError(e)}function Ha(t,e,n,r,o){let s=t.inputs?.[r],i=t.hostDirectiveInputs?.[r],a=!1;if(i)for(let c=0;c<i.length;c+=2){let l=i[c],u=i[c+1],d=e.data[l];Oi(d,n[l],u,o),a=!0}if(s)for(let c of s){let l=n[c],u=e.data[c];Oi(u,l,r,o),a=!0}return a}function vy(t,e){let n=Ee(e,t),r=n[D];wy(r,n);let o=n[je];o!==null&&n[ro]===null&&(n[ro]=cd(o,n[Bt])),O(18),Ua(r,n,n[te]),O(19,n[te])}function wy(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ua(t,e,n){Ia(e);try{let r=t.viewQuery;r!==null&&Ai(1,r,n);let o=t.template;o!==null&&_d(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Pe]?.finishViewCreation(t),t.staticContentQueries&&ld(t,e),t.staticViewQueries&&Ai(2,t.viewQuery,n);let s=t.components;s!==null&&_y(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[v]&=-5,Ea()}}function _y(t,e){for(let n=0;n<e.length;n++)vy(t,e[n])}function by(t,e,n,r){let o=C(null);try{let s=e.tView,a=t[v]&4096?4096:16,c=ja(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[dt]=l;let u=t[Pe];return u!==null&&(c[Pe]=u.createEmbeddedView(s)),Ua(s,c,n),c}finally{C(o)}}function xl(t,e){return!e||e.firstChild===null||Xu(t)}var Iy;function Ba(t,e){return Iy(t,e)}var Ri=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ri||{});function bd(t){return(t.flags&32)===32}function Ft(t,e,n,r,o){if(r!=null){let s,i=!1;Le(r)?s=r:Ge(r)&&(i=!0,r=r[je]);let a=Ie(r);t===0&&n!==null?o==null?gd(e,n,a):mo(e,n,a,o||null,!0):t===1&&n!==null?mo(e,n,a,o||null,!0):t===2?ey(e,a,i):t===3&&e.destroyNode(a),s!=null&&Ry(e,t,s,n,o)}}function Ey(t,e){Id(t,e),e[je]=null,e[ye]=null}function Dy(t,e,n,r,o,s){r[je]=o,r[ye]=e,Bo(t,r,n,1,o,s)}function Id(t,e){e[Re].changeDetectionScheduler?.notify(9),Bo(t,e,e[L],2,null,null)}function xy(t){let e=t[kn];if(!e)return ni(t[D],t);for(;e;){let n=null;if(Ge(e))n=e[kn];else{let r=e[oe];r&&(n=r)}if(!n){for(;e&&!e[me]&&e!==t;)Ge(e)&&ni(e[D],e),e=e[z];e===null&&(e=t),Ge(e)&&ni(e[D],e),n=e&&e[me]}e=n}}function qa(t,e){let n=t[qt],r=n.indexOf(e);n.splice(r,1)}function Ed(t,e){if(Hn(e))return;let n=e[L];n.destroyNode&&Bo(t,e,n,3,null,null),xy(e)}function ni(t,e){if(Hn(e))return;let n=C(null);try{e[v]&=-129,e[v]|=256,e[le]&&ks(e[le]),Ty(t,e),Cy(t,e),e[D].type===1&&e[L].destroy();let r=e[dt];if(r!==null&&Le(e[z])){r!==e[z]&&qa(r,e);let o=e[Pe];o!==null&&o.detachView(t)}Si(e)}finally{C(n)}}function Cy(t,e){let n=t.cleanup,r=e[oo];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let a=n[i+3];a>=0?r[a]():r[-a].unsubscribe(),i+=2}else{let a=r[n[i+1]];n[i].call(a)}r!==null&&(e[oo]=null);let o=e[We];if(o!==null){e[We]=null;for(let i=0;i<o.length;i++){let a=o[i];a()}}let s=e[so];if(s!==null){e[so]=null;for(let i of s)i.destroy()}}function Ty(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof gt)){let s=n[r+1];if(Array.isArray(s))for(let i=0;i<s.length;i+=2){let a=o[s[i]],c=s[i+1];O(4,a,c);try{c.call(a)}finally{O(5,a,c)}}else{O(4,o,s);try{s.call(o)}finally{O(5,o,s)}}}}}function My(t,e,n){return Sy(t,e.parent,n)}function Sy(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[je];if(Yt(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===On.None||o===On.Emulated)return null}return xe(r,n)}function Ny(t,e,n){return Ay(t,e,n)}function ky(t,e,n){return t.type&40?xe(t,n):null}var Ay=ky,Cl;function Uo(t,e,n,r){let o=My(t,r,e),s=e[L],i=r.parent||e[ye],a=Ny(i,r,e);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Dl(s,o,n[c],a,!1);else Dl(s,o,n,a,!1);Cl!==void 0&&Cl(s,r,e,n,o)}function Tn(t,e){if(e!==null){let n=e.type;if(n&3)return xe(e,t);if(n&4)return Pi(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Tn(t,r);{let o=t[e.index];return Le(o)?Pi(-1,o):Ie(o)}}else{if(n&128)return Tn(t,e.next);if(n&32)return Ba(e,t)()||Ie(t[e.index]);{let r=Dd(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=ht(t[_e]);return Tn(o,r)}else return Tn(t,e.next)}}}return null}function Dd(t,e){if(e!==null){let r=t[_e][ye],o=e.projection;return r.projection[o]}return null}function Pi(t,e){let n=oe+t+1;if(n<e.length){let r=e[n],o=r[D].firstChild;if(o!==null)return Tn(r,o)}return e[ft]}function za(t,e,n,r,o,s,i){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(i&&e===0&&(a&&en(Ie(a),r),n.flags|=2),!bd(n))if(c&8)za(t,e,n.child,r,o,s,!1),Ft(e,t,o,a,s);else if(c&32){let l=Ba(n,r),u;for(;u=l();)Ft(e,t,o,u,s);Ft(e,t,o,a,s)}else c&16?Oy(t,e,r,n,o,s):Ft(e,t,o,a,s);n=i?n.projectionNext:n.next}}function Bo(t,e,n,r,o,s){za(n,r,t.firstChild,e,o,s,!1)}function Oy(t,e,n,r,o,s){let i=n[_e],c=i[ye].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ft(e,t,o,u,s)}else{let l=c,u=i[z];Xu(r)&&(l.flags|=128),za(t,e,l,u,o,s,!0)}}function Ry(t,e,n,r,o){let s=n[ft],i=Ie(n);s!==i&&Ft(e,t,r,s,o);for(let a=oe;a<n.length;a++){let c=n[a];Bo(c[D],c,t,e,r,s)}}function Py(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ri.DashCase;o==null?t.removeStyle(n,r,s):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),s|=Ri.Important),t.setStyle(n,r,o,s))}}function yo(t,e,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Ie(s)),Le(s)&&jy(s,r);let i=n.type;if(i&8)yo(t,e,n.child,r);else if(i&32){let a=Ba(n,e),c;for(;c=a();)r.push(c)}else if(i&16){let a=Dd(e,n);if(Array.isArray(a))r.push(...a);else{let c=ht(e[_e]);yo(c[D],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function jy(t,e){for(let n=oe;n<t.length;n++){let r=t[n],o=r[D].firstChild;o!==null&&yo(r[D],r,o,e)}t[ft]!==t[je]&&e.push(t[ft])}function xd(t){if(t[Vt]!==null){for(let e of t[Vt])e.impl.addSequence(e);t[Vt].length=0}}var Cd=[];function Ly(t){return t[le]??Fy(t)}function Fy(t){let e=Cd.pop()??Object.create($y);return e.lView=t,e}function Vy(t){t.lView[le]!==t&&(t.lView=null,Cd.push(t))}var $y=Q(G({},gn),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Un(t.lView)},consumerOnSignalRead(){this.lView[le]=this}});function Hy(t){let e=t[le]??Object.create(Uy);return e.lView=t,e}var Uy=Q(G({},gn),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ht(t.lView);for(;e&&!Td(e[D]);)e=ht(e);e&&Eu(e)},consumerOnSignalRead(){this.lView[le]=this}});function Td(t){return t.type!==2}function Md(t){if(t[so]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[so])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[v]&8192)}}var By=100;function Sd(t,e=!0,n=0){let o=t[Re].rendererFactory,s=!1;s||o.begin?.();try{qy(t,n)}catch(i){throw e&&yy(t,i),i}finally{s||o.end?.()}}function qy(t,e){let n=Tu();try{ul(!0),ji(t,e);let r=0;for(;ko(t);){if(r===By)throw new N(103,!1);r++,ji(t,1)}}finally{ul(n)}}function zy(t,e,n,r){if(Hn(e))return;let o=e[v],s=!1,i=!1;Ia(e);let a=!0,c=null,l=null;s||(Td(t)?(l=Ly(e),c=hr(l)):xs()===null?(a=!1,l=Hy(e),c=hr(l)):e[le]&&(ks(e[le]),e[le]=null));try{Iu(e),Cg(t.bindingStartIndex),n!==null&&_d(t,e,n,2,r);let u=(o&3)===3;if(!s)if(u){let f=t.preOrderCheckHooks;f!==null&&Wr(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Gr(e,f,0,null),ei(e,0)}if(i||Wy(e),Md(e),Nd(e,0),t.contentQueries!==null&&ld(t,e),!s)if(u){let f=t.contentCheckHooks;f!==null&&Wr(e,f)}else{let f=t.contentHooks;f!==null&&Gr(e,f,1),ei(e,1)}Qy(t,e);let d=t.components;d!==null&&Ad(e,d,0);let p=t.viewQuery;if(p!==null&&Ai(2,p,r),!s)if(u){let f=t.viewCheckHooks;f!==null&&Wr(e,f)}else{let f=t.viewHooks;f!==null&&Gr(e,f,2),ei(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xs]){for(let f of e[Xs])f();e[Xs]=null}s||(xd(e),e[v]&=-73)}catch(u){throw s||Un(e),u}finally{l!==null&&(Ss(l,c),a&&Vy(l)),Ea()}}function Nd(t,e){for(let n=nd(t);n!==null;n=rd(n))for(let r=oe;r<n.length;r++){let o=n[r];kd(o,e)}}function Wy(t){for(let e=nd(t);e!==null;e=rd(e)){if(!(e[v]&2))continue;let n=e[qt];for(let r=0;r<n.length;r++){let o=n[r];Eu(o)}}}function Gy(t,e,n){O(18);let r=Ee(e,t);kd(r,n),O(19,r[te])}function kd(t,e){ga(t)&&ji(t,e)}function ji(t,e){let r=t[D],o=t[v],s=t[le],i=!!(e===0&&o&16);if(i||=!!(o&64&&e===0),i||=!!(o&1024),i||=!!(s?.dirty&&Ns(s)),i||=!1,s&&(s.dirty=!1),t[v]&=-9217,i)zy(r,t,r.template,t[te]);else if(o&8192){Md(t),Nd(t,1);let a=r.components;a!==null&&Ad(t,a,1),xd(t)}}function Ad(t,e,n){for(let r=0;r<e.length;r++)Gy(t,e[r],n)}function Qy(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)pt(~o);else{let s=o,i=n[++r],a=n[++r];Mg(i,s);let c=e[s];O(24,c),a(2,c),O(25,c)}}}finally{pt(-1)}}function Wa(t,e){let n=Tu()?64:1088;for(t[Re].changeDetectionScheduler?.notify(e);t;){t[v]|=n;let r=ht(t);if(ao(t)&&!r)return t;t=r}return null}function Od(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Jy(t,e,n,r=!0){let o=e[D];if(Zy(o,e,t,n),r){let i=Pi(n,t),a=e[L],c=a.parentNode(t[ft]);c!==null&&Dy(o,t[ye],a,e,c,i)}let s=e[ro];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Li(t,e){if(t.length<=oe)return;let n=oe+e,r=t[n];if(r){let o=r[dt];o!==null&&o!==t&&qa(o,r),e>0&&(t[n-1][me]=r[me]);let s=eo(t,oe+e);Ey(r[D],r);let i=s[Pe];i!==null&&i.detachView(s[D]),r[z]=null,r[me]=null,r[v]&=-129}return r}function Zy(t,e,n,r){let o=oe+r,s=n.length;r>0&&(n[o-1][me]=e),r<s-oe?(e[me]=n[o],tu(n,oe+r,e)):(n.push(e),e[me]=null),e[z]=n;let i=e[dt];i!==null&&n!==i&&Rd(i,e);let a=e[Pe];a!==null&&a.insertView(t),vi(e),e[v]|=128}function Rd(t,e){let n=t[qt],r=e[z];if(Ge(r))t[v]|=2;else{let o=r[z][_e];e[_e]!==o&&(t[v]|=2)}n===null?t[qt]=[e]:n.push(e)}var Rn=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[D];return yo(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[te]}set context(e){this._lView[te]=e}get destroyed(){return Hn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[z];if(Le(e)){let n=e[io],r=n?n.indexOf(this):-1;r>-1&&(Li(e,r),eo(n,r))}this._attachedToViewContainer=!1}Ed(this._lView[D],this._lView)}onDestroy(e){Du(this._lView,e)}markForCheck(){Wa(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[v]&=-129}reattach(){vi(this._lView),this._lView[v]|=128}detectChanges(){this._lView[v]|=1024,Sd(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ao(this._lView),n=this._lView[dt];n!==null&&!e&&qa(n,this._lView),Id(this._lView[D],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e;let n=ao(this._lView),r=this._lView[dt];r!==null&&!n&&Rd(r,this._lView),vi(this._lView)}};var vo=(()=>{class t{static __NG_ELEMENT_ID__=Xy}return t})(),Ky=vo,Yy=class extends Ky{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let o=by(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Rn(o)}};function Xy(){return qo(W(),I())}function qo(t,e){return t.type&4?new Yy(e,t,Xt(t,e)):null}function zo(t,e,n,r,o){let s=t.data[e];if(s===null)s=ev(t,e,n,r,o),Tg()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=o;let i=Eg();s.injectorIndex=i===null?-1:i.injectorIndex}return vt(s,!0),s}function ev(t,e,n,r,o){let s=xu(),i=wa(),a=i?s:s&&s.parent,c=t.data[e]=nv(t,a,n,e,r,o);return tv(t,c,s,i),c}function tv(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function nv(t,e,n,r,o,s){let i=e?e.injectorIndex:-1,a=0;return _g()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:i,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var YT=new RegExp(`^(\\d+)*(${vm}|${ym})*(.*)`);var rv=()=>null;function Tl(t,e){return rv(t,e)}var ov=class{},Pd=class{},Fi=class{resolveComponentFactory(e){throw Error(`No component factory found for ${ee(e)}.`)}},Wo=class{static NULL=new Fi},wo=class{},nM=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>sv()}return t})();function sv(){let t=I(),e=W(),n=Ee(e.index,t);return(Ge(n)?n:t)[L]}var iv=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var ri={},Vi=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=To(r);let o=this.injector.get(e,ri,r);return o!==ri||n===ri?o:this.parentInjector.get(e,n,r)}};function $i(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,s=0;if(e!==null)for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")s=a;else if(s==1)o=ui(o,a);else if(s==2){let c=a,l=e[++i];r=ui(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function Go(t,e=M.Default){let n=I();if(n===null)return Qe(t,e);let r=W();return Bu(r,n,J(t),e)}function rM(){let t="invalid";throw new Error(t)}function Ga(t,e,n,r,o){let s=r===null?null:{"":-1},i=o(t,n);if(i!==null){let a,c=null,l=null,u=cv(i);u===null?a=i:[a,c,l]=u,dv(t,e,n,a,s,c,l)}s!==null&&r!==null&&av(n,r,s)}function av(t,e,n){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let s=n[e[o+1]];if(s==null)throw new N(-301,!1);r.push(e[o],s)}}function cv(t){let e=null,n=!1;for(let i=0;i<t.length;i++){let a=t[i];if(i===0&&be(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,o=null,s=null;for(let i of t)i.findHostDirectiveDefs!==null&&(r??=[],o??=new Map,s??=new Map,lv(i,r,s,o)),i===e&&(r??=[],r.push(i));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,o,s]):null}function lv(t,e,n,r){let o=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[o,e.length-1])}function uv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function dv(t,e,n,r,o,s,i){let a=r.length,c=!1;for(let p=0;p<a;p++){let f=r[p];!c&&be(f)&&(c=!0,uv(t,n,p)),Ii(fo(n,e),t,f.type)}yv(n,t.data.length,a);for(let p=0;p<a;p++){let f=r[p];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=vd(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let f=r[p];if(n.mergedAttrs=Wt(n.mergedAttrs,f.hostAttrs),hv(t,n,e,d,f),mv(d,f,o),i!==null&&i.has(f)){let[m,y]=i.get(f);n.directiveToIndex.set(f.type,[d,m+n.directiveStart,y+n.directiveStart])}else(s===null||!s.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let g=f.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}fv(t,n,s)}function fv(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=t.data[r];if(n===null||!n.has(o))Ml(0,e,o,r),Ml(1,e,o,r),Nl(e,r,!1);else{let s=n.get(o);Sl(0,e,s,r),Sl(1,e,s,r),Nl(e,r,!0)}}}function Ml(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let s in o)if(o.hasOwnProperty(s)){let i;t===0?i=e.inputs??={}:i=e.outputs??={},i[s]??=[],i[s].push(r),jd(e,s)}}function Sl(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let s in o)if(o.hasOwnProperty(s)){let i=o[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[i]??=[],a[i].push(r,s),jd(e,i)}}function jd(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Nl(t,e,n){let{attrs:r,inputs:o,hostDirectiveInputs:s}=t;if(r===null||!n&&o===null||n&&s===null||Ra(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let i=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&o.hasOwnProperty(c)){let l=o[c];for(let u of l)if(u===e){i??=[],i.push(c,r[a+1]);break}}else if(n&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){i??=[],i.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(i)}function hv(t,e,n,r,o){t.data[r]=o;let s=o.factory||(o.factory=ct(o.type,!0)),i=new gt(s,be(o),Go);t.blueprint[r]=i,n[r]=i,pv(t,e,r,vd(t,n,o.hostVars,ie),o)}function pv(t,e,n,r,o){let s=o.hostBindings;if(s){let i=t.hostBindingOpCodes;i===null&&(i=t.hostBindingOpCodes=[]);let a=~e.index;gv(i)!=a&&i.push(a),i.push(n,r,s)}}function gv(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function mv(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;be(e)&&(n[""]=t)}}function yv(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ld(t,e,n,r,o,s,i,a){let c=e.consts,l=zt(c,i),u=zo(e,t,2,r,l);return s&&Ga(e,n,u,zt(c,a),o),u.mergedAttrs=Wt(u.mergedAttrs,u.attrs),u.attrs!==null&&$i(u,u.attrs,!1),u.mergedAttrs!==null&&$i(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Fd(t,e){Da(t,e),pa(e)&&t.queries.elementEnd(e)}var _o=class extends Wo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ut(e);return new Jt(n,this.ngModule)}};function vv(t){return Object.keys(t).map(e=>{let[n,r,o]=t[e],s={propName:n,templateName:e,isSignal:(r&$o.SignalBased)!==0};return o&&(s.transform=o),s})}function wv(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function _v(t,e,n){let r=e instanceof Je?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Vi(n,r):n}function bv(t){let e=t.get(wo,null);if(e===null)throw new N(407,!1);let n=t.get(iv,null),r=t.get(Qt,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function Iv(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return pd(e,n,n==="svg"?wu:n==="math"?dg:null)}var Jt=class extends Pd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vv(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=wv(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Jm(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o){O(22);let s=C(null);try{let i=this.componentDef,a=r?["ng-version","19.2.8"]:Zm(this.componentDef.selectors[0]),c=Pa(0,null,null,1,0,null,null,null,null,[a],null),l=_v(i,o||this.ngModule,e),u=bv(l),d=u.rendererFactory.createRenderer(null,i),p=r?iy(d,r,i.encapsulation,l):Iv(i,d),f=ja(null,c,null,512|yd(i),null,null,u,d,l,null,cd(p,l,!0));f[Z]=p,Ia(f);let g=null;try{let m=Ld(Z,c,f,"#host",()=>[this.componentDef],!0,0);p&&(md(d,p,m),en(p,f)),Ho(c,f,m),Aa(c,m,f),Fd(c,m),n!==void 0&&Ev(m,this.ngContentSelectors,n),g=Ee(m.index,f),f[te]=g[te],Ua(c,f,null)}catch(m){throw g!==null&&Si(g),Si(f),m}finally{O(23),Ea()}return new Hi(this.componentType,f)}finally{C(s)}}},Hi=class extends ov{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=bu(n[D],Z),this.location=Xt(this._tNode,n),this.instance=Ee(this._tNode.index,n)[te],this.hostView=this.changeDetectorRef=new Rn(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView,s=Ha(r,o[D],o,e,n);this.previousInputValues.set(e,n);let i=Ee(r.index,o);Wa(i,1)}get injector(){return new at(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ev(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let s=n[o];r.push(s!=null&&s.length?Array.from(s):null)}}var Qa=(()=>{class t{static __NG_ELEMENT_ID__=Dv}return t})();function Dv(){let t=W();return $d(t,I())}var xv=Qa,Vd=class extends xv{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xt(this._hostTNode,this._hostLView)}get injector(){return new at(this._hostTNode,this._hostLView)}get parentInjector(){let e=xa(this._hostTNode,this._hostLView);if(Lu(e)){let n=lo(e,this._hostLView),r=co(e),o=n[D].data[r+8];return new at(o,n)}else return new at(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=kl(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-oe}createEmbeddedView(e,n,r){let o,s;typeof r=="number"?o=r:r!=null&&(o=r.index,s=r.injector);let i=Tl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,i);return this.insertImpl(a,o,xl(this._hostTNode,i)),a}createComponent(e,n,r,o,s){let i=e&&!ag(e),a;if(i)a=n;else{let g=n||{};a=g.index,r=g.injector,o=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=i?e:new Jt(ut(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let m=(i?l:this.parentInjector).get(Je,null);m&&(s=m)}let u=ut(c.componentType??{}),d=Tl(this._lContainer,u?.id??null),p=d?.firstChild??null,f=c.create(l,o,p,s);return this.insertImpl(f.hostView,a,xl(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(hg(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[z],l=new Vd(c,c[ye],c[z]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),i=this._lContainer;return Jy(i,o,s,r),e.attachToViewContainerRef(),tu(oi(i),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=kl(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Li(this._lContainer,n);r&&(eo(oi(this._lContainer),n),Ed(r[D],r))}detach(e){let n=this._adjustIndex(e,-1),r=Li(this._lContainer,n);return r&&eo(oi(this._lContainer),n)!=null?new Rn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kl(t){return t[io]}function oi(t){return t[io]||(t[io]=[])}function $d(t,e){let n,r=e[t.index];return Le(r)?n=r:(n=Od(r,e,null,t),e[t.index]=n,La(e,n)),Tv(n,e,t,r),new Vd(n,t,e)}function Cv(t,e){let n=t[L],r=n.createComment(""),o=xe(e,t),s=n.parentNode(o);return mo(n,s,r,n.nextSibling(o),!1),r}var Tv=Nv,Mv=()=>!1;function Sv(t,e,n){return Mv(t,e,n)}function Nv(t,e,n,r){if(t[ft])return;let o;n.type&8?o=Ie(r):o=Cv(e,n),t[ft]=o}var Ui=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Bi=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,o=[];for(let s=0;s<r;s++){let i=n.getByIndex(s),a=this.queries[i.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Ja(e,n).matches!==null&&this.queries[n].setDirty()}},bo=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Fv(e):this.predicate=e}},qi=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,o);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},zi=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let s=r[o];this.matchTNodeWithReadOption(e,n,kv(n,s)),this.matchTNodeWithReadOption(e,n,Qr(n,e,s,!1,!1))}else r===vo?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Qr(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Lo||o===Qa||o===vo&&n.type&4)this.addMatch(n.index,-2);else{let s=Qr(n,e,o,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function kv(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Av(t,e){return t.type&11?Xt(t,e):t.type&4?qo(t,e):null}function Ov(t,e,n,r){return n===-1?Av(e,t):n===-2?Rv(t,e,r):An(t,t[D],n,e)}function Rv(t,e,n){if(n===Lo)return Xt(e,t);if(n===vo)return qo(e,t);if(n===Qa)return $d(e,t)}function Hd(t,e,n,r){let o=e[Pe].queries[r];if(o.matches===null){let s=t.data,i=n.matches,a=[];for(let c=0;i!==null&&c<i.length;c+=2){let l=i[c];if(l<0)a.push(null);else{let u=s[l];a.push(Ov(e,u,i[c+1],n.metadata.read))}}o.matches=a}return o.matches}function Wi(t,e,n,r){let o=t.queries.getByIndex(n),s=o.matches;if(s!==null){let i=Hd(t,e,o,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(i[a/2]);else{let l=s[a+1],u=e[-c];for(let d=oe;d<u.length;d++){let p=u[d];p[dt]===p[z]&&Wi(p[D],p,l,r)}if(u[qt]!==null){let d=u[qt];for(let p=0;p<d.length;p++){let f=d[p];Wi(f[D],f,l,r)}}}}}return r}function Pv(t,e){return t[Pe].queries[e].queryList}function Ud(t,e,n){let r=new Mi((n&4)===4);return mg(t,e,r,r.destroy),(e[Pe]??=new Bi).queries.push(new Ui(r))-1}function jv(t,e,n){let r=F();return r.firstCreatePass&&(Bd(r,new bo(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Ud(r,I(),e)}function Lv(t,e,n,r){let o=F();if(o.firstCreatePass){let s=W();Bd(o,new bo(e,n,r),s.index),Vv(o,t),(n&2)===2&&(o.staticContentQueries=!0)}return Ud(o,I(),n)}function Fv(t){return t.split(",").map(e=>e.trim())}function Bd(t,e,n){t.queries===null&&(t.queries=new qi),t.queries.track(new zi(e,n))}function Vv(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Ja(t,e){return t.queries.getByIndex(e)}function $v(t,e){let n=t[D],r=Ja(n,e);return r.crossesNgTemplate?Wi(n,t,e,[]):Hd(n,t,r,e)}var Pn=class{},Hv=class{};var Gi=class extends Pn{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _o(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;let s=ou(e);this._bootstrapComponents=fd(s.bootstrap),this._r3Injector=Wu(e,n,[{provide:Pn,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver},...r],ee(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Qi=class extends Hv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gi(this.moduleType,e,[])}};var Io=class extends Pn{injector;componentFactoryResolver=new _o(this);instance=null;constructor(e){super();let n=new Nn([...e.providers,{provide:Pn,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver}],e.parent||ha(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Uv(t,e,n=null){return new Io({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Bv=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=iu(!1,n.type),o=r.length>0?Uv([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(Qe(Je))})}return t})();function aM(t){return Vn(()=>{let e=qd(t),n=Q(G({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ed.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(Bv).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||On.Emulated,styles:t.styles||X,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ka("NgStandalone"),zd(n);let r=t.dependencies;return n.directiveDefs=Al(r,!1),n.pipeDefs=Al(r,!0),n.id=Qv(n),n})}function qv(t){return ut(t)||Qp(t)}function zv(t){return t!==null}function cM(t){return Vn(()=>({type:t.type,bootstrap:t.bootstrap||X,declarations:t.declarations||X,imports:t.imports||X,exports:t.exports||X,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Wv(t,e){if(t==null)return lt;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],s,i,a,c;Array.isArray(o)?(a=o[0],s=o[1],i=o[2]??s,c=o[3]||null):(s=o,i=o,a=$o.None,c=null),n[s]=[r,a,c],e[s]=i}return n}function Gv(t){if(t==null)return lt;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function lM(t){return Vn(()=>{let e=qd(t);return zd(e),e})}function uM(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function qd(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||lt,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||X,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Wv(t.inputs,e),outputs:Gv(t.outputs),debugInfo:null}}function zd(t){t.features?.forEach(e=>e(t))}function Al(t,e){if(!t)return null;let n=e?Jp:qv;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(zv)}function Qv(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Jv(t){return Object.getPrototypeOf(t.prototype).constructor}function Zv(t){let e=Jv(t.type),n=!0,r=[t];for(;e;){let o;if(be(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new N(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);let i=t;i.inputs=si(t.inputs),i.declaredInputs=si(t.declaredInputs),i.outputs=si(t.outputs);let a=o.hostBindings;a&&tw(t,a);let c=o.viewQuery,l=o.contentQueries;if(c&&Xv(t,c),l&&ew(t,l),Kv(t,o),xp(t.outputs,o.outputs),be(o)&&o.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let s=o.features;if(s)for(let i=0;i<s.length;i++){let a=s[i];a&&a.ngInherit&&a(t),a===Zv&&(n=!1)}}e=Object.getPrototypeOf(e)}Yv(r)}function Kv(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function Yv(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Wt(o.hostAttrs,n=Wt(n,o.hostAttrs))}}function si(t){return t===lt?{}:t===X?[]:t}function Xv(t,e){let n=t.viewQuery;n?t.viewQuery=(r,o)=>{e(r,o),n(r,o)}:t.viewQuery=e}function ew(t,e){let n=t.contentQueries;n?t.contentQueries=(r,o,s)=>{e(r,o,s),n(r,o,s)}:t.contentQueries=e}function tw(t,e){let n=t.hostBindings;n?t.hostBindings=(r,o)=>{e(r,o),n(r,o)}:t.hostBindings=e}function Wd(t){return rw(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function nw(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function rw(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function tn(t,e,n){return t[e]=n}function Gd(t,e){return t[e]}function De(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function jn(t,e,n,r){let o=De(t,e,n);return De(t,e+1,r)||o}function ow(t,e,n,r,o){let s=jn(t,e,n,r);return De(t,e+2,o)||s}function Ji(t,e,n,r,o,s){let i=jn(t,e,n,r);return jn(t,e+2,o,s)||i}function sw(t,e,n,r,o,s,i,a,c){let l=e.consts,u=zo(e,t,4,i||null,a||null);va()&&Ga(e,n,u,zt(l,c),$a),u.mergedAttrs=Wt(u.mergedAttrs,u.attrs),Da(e,u);let d=u.tView=Pa(2,u,r,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function iw(t,e,n,r,o,s,i,a,c,l){let u=n+Z,d=e.firstCreatePass?sw(u,e,t,r,o,s,i,a,c):e.data[u];vt(d,!1);let p=cw(e,t,d,n);Ro()&&Uo(e,t,p,d),en(p,t);let f=Od(p,t,p,d);return t[u]=f,La(t,f),Sv(f,d,t),So(d)&&Ho(e,t,d),c!=null&&Fa(t,d,l),d}function aw(t,e,n,r,o,s,i,a){let c=I(),l=F(),u=zt(l.consts,s);return iw(c,l,t,e,n,r,o,u,i,a),aw}var cw=lw;function lw(t,e,n,r){return Po(!0),e[L].createComment("")}var dM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var uw=new P("");var dw=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new Zi})}return t})(),Zi=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Qd(t){return!!t&&typeof t.then=="function"}function fw(t){return!!t&&typeof t.subscribe=="function"}var Jd=new P("");function fM(t){return su([{provide:Jd,multi:!0,useValue:t}])}var Zd=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(Jd,{optional:!0})??[];injector=k(Gt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let s=du(this.injector,o);if(Qd(s))n.push(s);else if(fw(s)){let i=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(i)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hw=new P("");function pw(){Os(()=>{throw new N(600,!1)})}function gw(t){return t.isBoundToModule}var mw=10;var Ln=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(om);afterRenderManager=k(ad);zonelessEnabled=k(Ta);rootEffectScheduler=k(dw);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new He;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(jo).hasPendingTasks.pipe(rt(n=>!n));constructor(){k(Fo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Je);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Gt.NULL){O(10);let s=n instanceof Pd;if(!this._injector.get(Zd).done){let f="";throw new N(405,f)}let a;s?a=n:a=this._injector.get(Wo).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let c=gw(a)?void 0:this._injector.get(Pn),l=r||a.selector,u=a.create(o,[],l,c),d=u.location.nativeElement,p=u.injector.get(uw,null);return p?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Jr(this.components,u),p?.unregisterApplication(d)}),this._loadComponent(u),O(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){O(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Na.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new N(101,!1);let n=C(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,C(n),this.afterTick.next(),O(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<mw;)O(14),this.synchronizeOnce(),O(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:o}of this.allViews)yw(r,o,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ko(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Jr(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(hw,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Jr(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new N(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jr(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function yw(t,e,n,r){if(!n&&!ko(t))return;Sd(t,e,n&&!r?0:1)}function vw(t,e,n,r){let o=I(),s=Ao();if(De(o,s,e)){let i=F(),a=Oo();py(a,o,t,e,n,r)}return vw}function Kd(t,e,n,r){return De(t,Ao(),n)?e+Ht(n)+r:ie}function ww(t,e,n,r,o,s){let i=xg(),a=jn(t,i,n,o);return _a(2),a?e+Ht(n)+r+Ht(o)+s:ie}function qr(t,e){return t<<17|e<<2}function yt(t){return t>>17&32767}function _w(t){return(t&2)==2}function bw(t,e){return t&131071|e<<17}function Ki(t){return t|2}function Zt(t){return(t&131068)>>2}function ii(t,e){return t&-131069|e<<2}function Iw(t){return(t&1)===1}function Yi(t){return t|1}function Ew(t,e,n,r,o,s){let i=s?e.classBindings:e.styleBindings,a=yt(i),c=Zt(i);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||$n(d,u)>0)&&(l=!0)}else u=n;if(o)if(c!==0){let p=yt(t[a+1]);t[r+1]=qr(p,a),p!==0&&(t[p+1]=ii(t[p+1],r)),t[a+1]=bw(t[a+1],r)}else t[r+1]=qr(a,0),a!==0&&(t[a+1]=ii(t[a+1],r)),a=r;else t[r+1]=qr(c,0),a===0?a=r:t[c+1]=ii(t[c+1],r),c=r;l&&(t[r+1]=Ki(t[r+1])),Ol(t,u,r,!0),Ol(t,u,r,!1),Dw(e,u,t,r,s),i=qr(a,c),s?e.classBindings=i:e.styleBindings=i}function Dw(t,e,n,r,o){let s=o?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&$n(s,e)>=0&&(n[r+1]=Yi(n[r+1]))}function Ol(t,e,n,r){let o=t[n+1],s=e===null,i=r?yt(o):Zt(o),a=!1;for(;i!==0&&(a===!1||s);){let c=t[i],l=t[i+1];xw(c,e)&&(a=!0,t[i+1]=r?Yi(l):Ki(l)),i=r?yt(l):Zt(l)}a&&(t[n+1]=r?Ki(o):Yi(o))}function xw(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?$n(t,e)>=0:!1}var ge={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Cw(t){return t.substring(ge.key,ge.keyEnd)}function Tw(t){return Mw(t),Yd(t,Xd(t,0,ge.textEnd))}function Yd(t,e){let n=ge.textEnd;return n===e?-1:(e=ge.keyEnd=Sw(t,ge.key=e,n),Xd(t,e,n))}function Mw(t){ge.key=0,ge.keyEnd=0,ge.value=0,ge.valueEnd=0,ge.textEnd=t.length}function Xd(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Sw(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Nw(t,e,n){let r=I(),o=Ao();if(De(r,o,e)){let s=F(),i=Oo();Va(s,i,r,t,e,r[L],n,!1)}return Nw}function Xi(t,e,n,r,o){Ha(e,t,n,o?"class":"style",r)}function kw(t,e){return Ow(t,e,null,!0),kw}function hM(t){Rw($w,Aw,t,!0)}function Aw(t,e){for(let n=Tw(e);n>=0;n=Yd(e,n))da(t,Cw(e),!0)}function Ow(t,e,n,r){let o=I(),s=F(),i=_a(2);if(s.firstUpdatePass&&tf(s,t,i,r),e!==ie&&De(o,i,e)){let a=s.data[Ke()];nf(s,a,o,o[L],t,o[i+1]=Uw(e,n),r,i)}}function Rw(t,e,n,r){let o=F(),s=_a(2);o.firstUpdatePass&&tf(o,null,s,r);let i=I();if(n!==ie&&De(i,s,n)){let a=o.data[Ke()];if(rf(a,r)&&!ef(o,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=ui(c,n||"")),Xi(o,a,i,n,r)}else Hw(o,a,i,i[L],i[s+1],i[s+1]=Vw(t,e,n),r,s)}}function ef(t,e){return e>=t.expandoStartIndex}function tf(t,e,n,r){let o=t.data;if(o[n+1]===null){let s=o[Ke()],i=ef(t,n);rf(s,r)&&e===null&&!i&&(e=!1),e=Pw(o,s,e,r),Ew(o,s,e,n,i,r)}}function Pw(t,e,n,r){let o=Ng(t),s=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=ai(null,t,e,n,r),n=Fn(n,e.attrs,r),s=null);else{let i=e.directiveStylingLast;if(i===-1||t[i]!==o)if(n=ai(o,t,e,n,r),s===null){let c=jw(t,e,r);c!==void 0&&Array.isArray(c)&&(c=ai(null,t,e,c[1],r),c=Fn(c,e.attrs,r),Lw(t,e,r,c))}else s=Fw(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function jw(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Zt(r)!==0)return t[yt(r)]}function Lw(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[yt(o)]=r}function Fw(t,e,n){let r,o=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<o;s++){let i=t[s].hostAttrs;r=Fn(r,i,n)}return Fn(r,e.attrs,n)}function ai(t,e,n,r,o){let s=null,i=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<i&&(s=e[a],r=Fn(r,s.hostAttrs,o),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Fn(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let s=0;s<e.length;s++){let i=e[s];typeof i=="number"?o=i:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),da(t,i,n?!0:e[++s]))}return t===void 0?null:t}function Vw(t,e,n){if(n==null||n==="")return X;let r=[],o=Vo(n);if(Array.isArray(o))for(let s=0;s<o.length;s++)t(r,o[s],!0);else if(typeof o=="object")for(let s in o)o.hasOwnProperty(s)&&t(r,s,o[s]);else typeof o=="string"&&e(r,o);return r}function $w(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&da(t,r,n)}function Hw(t,e,n,r,o,s,i,a){o===ie&&(o=X);let c=0,l=0,u=0<o.length?o[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let p=c<o.length?o[c+1]:void 0,f=l<s.length?s[l+1]:void 0,g=null,m;u===d?(c+=2,l+=2,p!==f&&(g=d,m=f)):d===null||u!==null&&u<d?(c+=2,g=u):(l+=2,g=d,m=f),g!==null&&nf(t,e,n,r,g,m,i,a),u=c<o.length?o[c]:null,d=l<s.length?s[l]:null}}function nf(t,e,n,r,o,s,i,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=Iw(l)?Rl(c,e,n,o,Zt(l),i):void 0;if(!Eo(u)){Eo(s)||_w(l)&&(s=Rl(c,null,n,o,a,i));let d=_u(Ke(),n);Py(r,i,d,o,s)}}function Rl(t,e,n,r,o,s){let i=e===null,a;for(;o>0;){let c=t[o],l=Array.isArray(c),u=l?c[1]:c,d=u===null,p=n[o+1];p===ie&&(p=d?X:void 0);let f=d?Ks(p,r):u===r?p:void 0;if(l&&!Eo(f)&&(f=Ks(c,r)),Eo(f)&&(a=f,i))return a;let g=t[o+1];o=i?yt(g):Zt(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ks(c,r))}return a}function Eo(t){return t!==void 0}function Uw(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ee(Vo(t)))),t}function rf(t,e){return(t.flags&(e?8:16))!==0}function of(t,e,n,r){let o=I(),s=F(),i=Z+t,a=o[L],c=s.firstCreatePass?Ld(i,s,o,e,$a,va(),n,r):s.data[i],l=qw(s,o,c,a,e,t);o[i]=l;let u=So(c);return vt(c,!0),md(a,l,c),!bd(c)&&Ro()&&Uo(s,o,l,c),(yg()===0||u)&&en(l,o),vg(),u&&(Ho(s,o,c),Aa(s,c,o)),r!==null&&Fa(o,c),of}function sf(){let t=W();wa()?Cu():(t=t.parent,vt(t,!1));let e=t;bg(e)&&Ig(),wg();let n=F();return n.firstCreatePass&&Fd(n,e),e.classesWithoutHost!=null&&Lg(e)&&Xi(n,e,I(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Fg(e)&&Xi(n,e,I(),e.stylesWithoutHost,!1),sf}function Bw(t,e,n,r){return of(t,e,n,r),sf(),Bw}var qw=(t,e,n,r,o,s)=>(Po(!0),pd(r,o,Rg()));function zw(t,e,n,r,o){let s=e.consts,i=zt(s,r),a=zo(e,t,8,"ng-container",i);i!==null&&$i(a,i,!0);let c=zt(s,o);return va()&&Ga(e,n,a,c,$a),a.mergedAttrs=Wt(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Ww(t,e,n){let r=I(),o=F(),s=t+Z,i=o.firstCreatePass?zw(s,o,r,e,n):o.data[s];vt(i,!0);let a=Qw(o,r,i,t);return r[s]=a,Ro()&&Uo(o,r,a,i),en(a,r),So(i)&&(Ho(o,r,i),Aa(o,i,r)),n!=null&&Fa(r,i),Ww}function Gw(){let t=W(),e=F();return wa()?Cu():(t=t.parent,vt(t,!1)),e.firstCreatePass&&(Da(e,t),pa(t)&&e.queries.elementEnd(t)),Gw}var Qw=(t,e,n,r)=>(Po(!0),Xm(e[L],""));function pM(){return I()}var st=void 0;function Jw(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var Zw=["en",[["a","p"],["AM","PM"],st],[["AM","PM"],st,st],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],st,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],st,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",st,"{1} 'at' {0}",st],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Jw],Sn={};function gM(t,e,n){typeof e!="string"&&(n=e,e=t[ea.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Sn[e]=t,n&&(Sn[e][ea.ExtraData]=n)}function mM(t){let e=Kw(t),n=Pl(e);if(n)return n;let r=e.split("-")[0];if(n=Pl(r),n)return n;if(r==="en")return Zw;throw new N(701,!1)}function Pl(t){return t in Sn||(Sn[t]=qe.ng&&qe.ng.common&&qe.ng.common.locales&&qe.ng.common.locales[t]),Sn[t]}var ea=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ea||{});function Kw(t){return t.toLowerCase().replace(/_/g,"-")}var Do="en-US",Yw="USD";var Xw=Do;function e_(t){typeof t=="string"&&(Xw=t.toLowerCase().replace(/_/g,"-"))}function jl(t,e,n){return function r(o){if(o===Function)return n;let s=Yt(t)?Ee(t.index,e):e;Wa(s,5);let i=e[te],a=Ll(e,i,n,o),c=r.__ngNextListenerFn__;for(;c;)a=Ll(e,i,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ll(t,e,n,r){let o=C(null);try{return O(6,e,n),n(r)!==!1}catch(s){return t_(t,s),!1}finally{O(7,e,n),C(o)}}function t_(t,e){let n=t[Bt],r=n?n.get(mt,null):null;r&&r.handleError(e)}function Fl(t,e,n,r,o,s){let i=e[n],a=e[D],l=a.data[n].outputs[r],u=i[l],d=a.firstCreatePass?ya(a):null,p=ma(e),f=u.subscribe(s),g=p.length;p.push(s,f),d&&d.push(o,t.index,g,-(g+1))}var n_=(t,e,n)=>{};function r_(t,e,n,r){let o=I(),s=F(),i=W();return af(s,o,o[L],i,t,e,r),r_}function o_(t,e,n,r){let o=t.cleanup;if(o!=null)for(let s=0;s<o.length-1;s+=2){let i=o[s];if(i===n&&o[s+1]===r){let a=e[oo],c=o[s+2];return a.length>c?a[c]:null}typeof i=="string"&&(s+=2)}return null}function af(t,e,n,r,o,s,i){let a=So(r),l=t.firstCreatePass?ya(t):null,u=ma(e),d=!0;if(r.type&3||i){let p=xe(r,e),f=i?i(p):p,g=u.length,m=i?E=>i(Ie(E[r.index])):r.index,y=null;if(!i&&a&&(y=o_(t,e,o,r.index)),y!==null){let E=y.__ngLastListenerFn__||y;E.__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,d=!1}else{s=jl(r,e,s),n_(f,o,s);let E=n.listen(f,o,s);u.push(s,E),l&&l.push(o,m,g,g+1)}}else s=jl(r,e,s);if(d){let p=r.outputs?.[o],f=r.hostDirectiveOutputs?.[o];if(f&&f.length)for(let g=0;g<f.length;g+=2){let m=f[g],y=f[g+1];Fl(r,e,m,y,o,s)}if(p&&p.length)for(let g of p)Fl(r,e,g,o,o,s)}}function yM(t=1){return Ag(t)}function s_(t,e,n,r,o){let s=I(),i=Kd(s,e,n,r);if(i!==ie){let a=F(),c=Oo();Va(a,c,s,t,i,s[L],o,!1)}return s_}function vM(t,e,n,r){Lv(t,e,n,r)}function wM(t,e,n){jv(t,e,n)}function _M(t){let e=I(),n=F(),r=Mu();ba(r+1);let o=Ja(n,r);if(t.dirty&&fg(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let s=$v(e,r);t.reset(s,am),t.notifyOnChanges()}return!0}return!1}function bM(){return Pv(I(),Mu())}function i_(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function IM(t){let e=Dg();return No(e,Z+t)}function EM(t,e=""){let n=I(),r=F(),o=t+Z,s=r.firstCreatePass?zo(r,o,1,e,null):r.data[o],i=a_(r,n,s,e,t);n[o]=i,Ro()&&Uo(r,n,i,s),vt(s,!1)}var a_=(t,e,n,r,o)=>(Po(!0),Km(e[L],r));function c_(t){return cf("",t,""),c_}function cf(t,e,n){let r=I(),o=Kd(r,t,e,n);return o!==ie&&lf(r,Ke(),o),cf}function l_(t,e,n,r,o){let s=I(),i=ww(s,t,e,n,r,o);return i!==ie&&lf(s,Ke(),i),l_}function lf(t,e,n){let r=_u(e,t);Ym(t[L],r,n)}function u_(t,e,n){Yu(e)&&(e=e());let r=I(),o=Ao();if(De(r,o,e)){let s=F(),i=Oo();Va(s,i,r,t,e,r[L],n,!1)}return u_}function DM(t,e){let n=Yu(t);return n&&t.set(e),n}function d_(t,e){let n=I(),r=F(),o=W();return af(r,n,n[L],o,t,e),d_}function f_(t,e,n){let r=F();if(r.firstCreatePass){let o=be(t);ta(n,r.data,r.blueprint,o,!0),ta(e,r.data,r.blueprint,o,!1)}}function ta(t,e,n,r,o){if(t=J(t),Array.isArray(t))for(let s=0;s<t.length;s++)ta(t[s],e,n,r,o);else{let s=F(),i=I(),a=W(),c=Ut(t)?t:J(t.provide),l=uu(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Ut(t)||!t.multi){let f=new gt(l,o,Go),g=li(c,e,o?u:u+p,d);g===-1?(Ii(fo(a,i),s,c),ci(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(f),i.push(f)):(n[g]=f,i[g]=f)}else{let f=li(c,e,u+p,d),g=li(c,e,u,u+p),m=f>=0&&n[f],y=g>=0&&n[g];if(o&&!y||!o&&!m){Ii(fo(a,i),s,c);let E=g_(o?p_:h_,n.length,o,r,l);!o&&y&&(n[g].providerFactory=E),ci(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(E),i.push(E)}else{let E=uf(n[o?g:f],l,!o&&r);ci(s,t,f>-1?f:g,E)}!o&&r&&y&&n[g].componentProviders++}}}function ci(t,e,n,r){let o=Ut(e),s=eg(e);if(o||s){let c=(s?J(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function uf(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function li(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function h_(t,e,n,r){return na(this.multi,[])}function p_(t,e,n,r){let o=this.multi,s;if(this.providerFactory){let i=this.providerFactory.componentProviders,a=An(n,n[D],this.providerFactory.index,r);s=a.slice(0,i),na(o,s);for(let c=i;c<a.length;c++)s.push(a[c])}else s=[],na(o,s);return s}function na(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function g_(t,e,n,r,o){let s=new gt(t,n,Go);return s.multi=[],s.index=e,s.componentProviders=0,uf(s,o,r&&!n),s}function xM(t,e=[]){return n=>{n.providersResolver=(r,o)=>f_(r,o?o(t):t,e)}}function CM(t,e,n){let r=Ze()+t,o=I();return o[r]===ie?tn(o,r,n?e.call(n):e()):Gd(o,r)}function TM(t,e,n,r){return df(I(),Ze(),t,e,n,r)}function MM(t,e,n,r,o){return ff(I(),Ze(),t,e,n,r,o)}function SM(t,e,n,r,o,s){return m_(I(),Ze(),t,e,n,r,o,s)}function NM(t,e,n,r,o,s,i,a,c,l,u){let d=Ze()+t,p=I(),f=Ji(p,d,n,r,o,s);return Ji(p,d+4,i,a,c,l)||f?tn(p,d+8,u?e.call(u,n,r,o,s,i,a,c,l):e(n,r,o,s,i,a,c,l)):Gd(p,d+8)}function Qo(t,e){let n=t[e];return n===ie?void 0:n}function df(t,e,n,r,o,s){let i=e+n;return De(t,i,o)?tn(t,i+1,s?r.call(s,o):r(o)):Qo(t,i+1)}function ff(t,e,n,r,o,s,i){let a=e+n;return jn(t,a,o,s)?tn(t,a+2,i?r.call(i,o,s):r(o,s)):Qo(t,a+2)}function m_(t,e,n,r,o,s,i,a){let c=e+n;return ow(t,c,o,s,i)?tn(t,c+3,a?r.call(a,o,s,i):r(o,s,i)):Qo(t,c+3)}function y_(t,e,n,r,o,s,i,a,c){let l=e+n;return Ji(t,l,o,s,i,a)?tn(t,l+4,c?r.call(c,o,s,i,a):r(o,s,i,a)):Qo(t,l+4)}function kM(t,e){let n=F(),r,o=t+Z;n.firstCreatePass?(r=v_(e,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks??=[]).push(o,r.onDestroy)):r=n.data[o];let s=r.factory||(r.factory=ct(r.type,!0)),i,a=Y(Go);try{let c=uo(!1),l=s();return uo(c),i_(n,I(),o,l),l}finally{Y(a)}}function v_(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function AM(t,e,n){let r=t+Z,o=I(),s=No(o,r);return Za(o,r)?df(o,Ze(),e,s.transform,n,s):s.transform(n)}function OM(t,e,n,r){let o=t+Z,s=I(),i=No(s,o);return Za(s,o)?ff(s,Ze(),e,i.transform,n,r,i):i.transform(n,r)}function RM(t,e,n,r,o,s){let i=t+Z,a=I(),c=No(a,i);return Za(a,i)?y_(a,Ze(),e,c.transform,n,r,o,s,c):c.transform(n,r,o,s)}function Za(t,e){return t[D].data[e].pure}function PM(t,e){return qo(t,e)}var ra=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},jM=(()=>{class t{compileModuleSync(n){return new Qi(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=ou(n),s=fd(o.declarations).reduce((i,a)=>{let c=ut(a);return c&&i.push(new Jt(c)),i},[]);return new ra(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var w_=(()=>{class t{zone=k(se);changeDetectionScheduler=k(Qt);applicationRef=k(Ln);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),__=new P("",{factory:()=>!1});function hf({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new se(Q(G({},pf()),{scheduleInRootZone:n})),[{provide:se,useFactory:t},{provide:to,multi:!0,useFactory:()=>{let r=k(w_,{optional:!0});return()=>r.initialize()}},{provide:to,multi:!0,useFactory:()=>{let r=k(b_);return()=>{r.initialize()}}},e===!0?{provide:Qu,useValue:!0}:[],{provide:Ju,useValue:n??Gu}]}function LM(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=hf({ngZoneFactory:()=>{let o=pf(t);return o.scheduleInRootZone=n,o.shouldCoalesceEventChangeDetection&&ka("NgZone_CoalesceEvent"),new se(o)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return su([{provide:__,useValue:!0},{provide:Ta,useValue:!1},r])}function pf(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var b_=(()=>{class t{subscription=new U;initialized=!1;zone=k(se);pendingTasks=k(jo);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var I_=(()=>{class t{appRef=k(Ln);taskService=k(jo);ngZone=k(se);zonelessEnabled=k(Ta);tracing=k(Fo,{optional:!0});disableScheduling=k(Qu,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new U;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(po):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Ju,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ti||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?ml:Zu;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(po+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ml(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function E_(){return typeof $localize<"u"&&$localize.locale||Do}var gf=new P("",{providedIn:"root",factory:()=>k(gf,M.Optional|M.SkipSelf)||E_()}),FM=new P("",{providedIn:"root",factory:()=>Yw});var oa=new P(""),D_=new P("");function xn(t){return!t.moduleRef}function x_(t){let e=xn(t)?t.r3Injector:t.moduleRef.injector,n=e.get(se);return n.run(()=>{xn(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(mt,null),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:s=>{r.handleError(s)}})}),xn(t)){let s=()=>e.destroy(),i=t.platformInjector.get(oa);i.add(s),e.onDestroy(()=>{o.unsubscribe(),i.delete(s)})}else{let s=()=>t.moduleRef.destroy(),i=t.platformInjector.get(oa);i.add(s),t.moduleRef.onDestroy(()=>{Jr(t.allPlatformModules,t.moduleRef),o.unsubscribe(),i.delete(s)})}return T_(r,n,()=>{let s=e.get(Zd);return s.runInitializers(),s.donePromise.then(()=>{let i=e.get(gf,Do);if(e_(i||Do),!e.get(D_,!0))return xn(t)?e.get(Ln):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(xn(t)){let c=e.get(Ln);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return C_(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function C_(t,e){let n=t.injector.get(Ln);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new N(-403,!1);e.push(t)}function T_(t,e,n){try{let r=n();return Qd(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Zr=null;function M_(t=[],e){return Gt.create({name:e,providers:[{provide:lu,useValue:"platform"},{provide:oa,useValue:new Set([()=>Zr=null])},...t]})}function S_(t=[]){if(Zr)return Zr;let e=M_(t);return Zr=e,pw(),N_(e),e}function N_(t){let e=t.get(mm,null);du(t,()=>{e?.forEach(n=>n())})}var VM=(()=>{class t{static __NG_ELEMENT_ID__=k_}return t})();function k_(t){return A_(W(),I(),(t&16)===16)}function A_(t,e,n){if(Yt(t)&&!n){let r=Ee(t.index,e);return new Rn(r,r)}else if(t.type&175){let r=e[_e];return new Rn(r,e)}return null}var sa=class{constructor(){}supports(e){return Wd(e)}create(e){return new ia(e)}},O_=(t,e)=>e,ia=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||O_}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,s=null;for(;n||r;){let i=!r||n&&n.currentIndex<Vl(r,o,s)?n:r,a=Vl(i,o,s),c=i.currentIndex;if(i===r)o--,r=r._nextRemoved;else if(n=n._next,i.previousIndex==null)o++;else{s||(s=[]);let l=a-o,u=c-o;if(l!=u){for(let p=0;p<l;p++){let f=p<s.length?s[p]:s[p]=0,g=f+p;u<=g&&g<l&&(s[p]=f+1)}let d=i.previousIndex;s[d]=u-l}}a!==c&&e(i,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Wd(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,o,s,i;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],i=this._trackByFn(a,s),n===null||!Object.is(n.trackById,i)?(n=this._mismatch(n,s,i,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,i,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else o=0,nw(e,a=>{i=this._trackByFn(o,a),n===null||!Object.is(n.trackById,i)?(n=this._mismatch(n,a,i,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,i,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,o)):e=this._addAfter(new aa(n,r),s,o)),e}_verifyReinsertion(e,n,r,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,s=e._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let o=n===null?this._itHead:n._next;return e._next=o,e._prev=n,o===null?this._itTail=e:o._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new xo),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new xo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},aa=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},ca=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},xo=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new ca,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,o=this.map.get(r);return o?o.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Vl(t,e,n){let r=t.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}function $l(){return new R_([new sa])}var R_=(()=>{class t{factories;static \u0275prov=B({token:t,providedIn:"root",factory:$l});constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||$l()),deps:[[t,new Bp,new Up]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new N(901,!1)}}return t})();function $M(t){O(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,o=S_(r),s=[hf({}),{provide:Qt,useExisting:I_},...n||[]],i=new Io({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return x_({r3Injector:i.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}finally{O(9)}}function HM(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function UM(t){return js(t)}function BM(t,e){return As(t,e?.equal)}var Hl=class{[ce];constructor(e){this[ce]=e}destroy(){this[ce].destroy()}};function qM(t){let e=ut(t);if(!e)return null;let n=new Jt(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var mf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>import("./chunk-TWVFGLRA.js").then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};var Bn=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},Jo=class extends Bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Zo=class extends Bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Ko=class extends Bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Ka=function(t){return t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",t}(Ka||{});var j_=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},qn=class{constructor(e,{headers:n={},customFetch:r,region:o=Ka.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=mf(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return j_(this,void 0,void 0,function*(){try{let{headers:o,method:s,body:i}=n,a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=i):typeof i=="string"?(a["Content-Type"]="text/plain",l=i):typeof FormData<"u"&&i instanceof FormData?l=i:(a["Content-Type"]="application/json",l=JSON.stringify(i)));let u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:l}).catch(g=>{throw new Jo(g)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Zo(u);if(!u.ok)throw new Ko(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield u.json():p==="application/octet-stream"?f=yield u.blob():p==="text/event-stream"?f=u:p==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(o){return{data:null,error:o}}})}};var Sf=Th(Mf(),1),{PostgrestClient:Nf,PostgrestQueryBuilder:lS,PostgrestFilterBuilder:uS,PostgrestTransformBuilder:dS,PostgrestBuilder:fS,PostgrestError:Q_}=Sf.default;var kf="2.11.2";var Af={"X-Client-Info":`realtime-js/${kf}`},Of="1.0.0",ts=1e4,Rf=1e3,rn=function(t){return t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",t}(rn||{}),ae=function(t){return t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",t}(ae||{}),ue=function(t){return t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",t}(ue||{}),lc=function(t){return t.websocket="websocket",t}(lc||{}),wt=function(t){return t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",t}(wt||{});var ns=class{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){let o=n.getUint8(1),s=n.getUint8(2),i=this.HEADER_LENGTH+2,a=r.decode(e.slice(i,i+o));i=i+o;let c=r.decode(e.slice(i,i+s));i=i+s;let l=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var on=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var j=function(t){return t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",t}(j||{}),dc=(t,e,n={})=>{var r;let o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=J_(i,t,e,o),s),{})},J_=(t,e,n,r)=>{let o=e.find(a=>a.name===t),s=o?.type,i=n[t];return s&&!r.includes(s)?Pf(s,i):uc(i)},Pf=(t,e)=>{if(t.charAt(0)==="_"){let n=t.slice(1,t.length);return X_(e,n)}switch(t){case j.bool:return Z_(e);case j.float4:case j.float8:case j.int2:case j.int4:case j.int8:case j.numeric:case j.oid:return K_(e);case j.json:case j.jsonb:return Y_(e);case j.timestamp:return eb(e);case j.abstime:case j.date:case j.daterange:case j.int4range:case j.int8range:case j.money:case j.reltime:case j.text:case j.time:case j.timestamptz:case j.timetz:case j.tsrange:case j.tstzrange:return uc(e);default:return uc(e)}},uc=t=>t,Z_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},K_=t=>{if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Y_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},X_=(t,e)=>{if(typeof t!="string")return t;let n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s,i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>Pf(e,a))}return t},eb=t=>typeof t=="string"?t.replace(" ","T"):t,rs=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var sn=class{constructor(e,n,r={},o=ts){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Kn=class t{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{let{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=t.syncState(this.state,o,s,i),this.pendingDiffs.forEach(c=>{this.state=t.syncDiff(this.state,c,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{let{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=t.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){let s=this.cloneDeep(e),i=this.transformState(n),a={},c={};return this.map(s,(l,u)=>{i[l]||(c[l]=u)}),this.map(i,(l,u)=>{let d=s[l];if(d){let p=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),g=u.filter(y=>f.indexOf(y.presence_ref)<0),m=d.filter(y=>p.indexOf(y.presence_ref)<0);g.length>0&&(a[l]=g),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(s,{joins:a,leaves:c},r,o)}static syncDiff(e,n,r,o){let{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,c)=>{var l;let u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){let d=e[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...p)}r(a,u,c)}),this.map(i,(a,c)=>{let l=e[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,o(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{let o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Fe=function(t){return t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",t}(Fe||{});var Yn=class t{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sn(this,ue.join,this.params,this.timeout),this.rejoinTimer=new on(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ae.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ue.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Kn(this),this.broadcastEndpointURL=rs(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(u=>e?.(Fe.CHANNEL_ERROR,u)),this._onClose(()=>e?.(Fe.CLOSED));let c={},l={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:u}){var p;if(this.socket.setAuth(),u===void 0){e?.(Fe.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,g=(p=f?.length)!==null&&p!==void 0?p:0,m=[];for(let y=0;y<g;y++){let E=f[y],{filter:{event:Se,schema:Ne,table:fe,filter:ke}}=E,St=u&&u[y];if(St&&St.event===Se&&St.schema===Ne&&St.table===fe&&St.filter===ke)m.push(Object.assign(Object.assign({},E),{id:St.id}));else{this.unsubscribe(),e?.(Fe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Fe.SUBSCRIBED);return}})).receive("error",u=>{e?.(Fe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(Fe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(e,n={}){return yield this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,n,r){return this._on(e,n,r)}send(r){return h(this,arguments,function*(e,n={}){var o,s;if(!this._canPush()&&e.type==="broadcast"){let{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return yield(s=u.body)===null||s===void 0?void 0:s.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,c,l;let u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ae.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ue.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let o=new sn(this,ue.leave,{},e);o.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}_fetchWithTimeout(e,n,r){return h(this,null,function*(){let o=new AbortController,s=setTimeout(()=>o.abort(),r),i=yield this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i})}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new sn(this,e,n,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;let i=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=ue;if(r&&[a,c,l,u].indexOf(i)>=0&&r!==this._joinRef())return;let p=this._onMessage(i,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(f=>{var g,m,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(f=>f.callback(p,r)):(s=this.bindings[i])===null||s===void 0||s.filter(f=>{var g,m,y,E,Se,Ne;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){let fe=f.id,ke=(g=f.filter)===null||g===void 0?void 0:g.event;return fe&&((m=n.ids)===null||m===void 0?void 0:m.includes(fe))&&(ke==="*"||ke?.toLocaleLowerCase()===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{let fe=(Se=(E=f?.filter)===null||E===void 0?void 0:E.event)===null||Se===void 0?void 0:Se.toLocaleLowerCase();return fe==="*"||fe===((Ne=n?.event)===null||Ne===void 0?void 0:Ne.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof p=="object"&&"ids"in p){let g=p.data,{schema:m,table:y,commit_timestamp:E,type:Se,errors:Ne}=g;p=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:E,eventType:Se,new:{},old:{},errors:Ne}),this._getPayloadRecords(g))}f.callback(p,r)})}_isClosed(){return this.state===ae.closed}_isJoined(){return this.state===ae.joined}_isJoining(){return this.state===ae.joining}_isLeaving(){return this.state===ae.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){let o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&t.isEqual(o.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(let r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ue.close,{},e)}_onError(e){this._on(ue.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ae.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=dc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=dc(e.columns,e.old_record)),n}};var nb=()=>{},rb=typeof WebSocket<"u",ob=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Xn=class{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Af,this.params={},this.timeout=ts,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=nb,this.conn=null,this.sendBuffer=[],this.serializer=new ns,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>import("./chunk-TWVFGLRA.js").then(({default:c})=>c(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${lc.websocket}`,this.httpEndpoint=rs(e),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);let o=(r=n?.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n?.encode?n.encode:(s,i)=>i(JSON.stringify(s)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new on(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(rb){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new fc(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-ZOJKXME7.js").then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Of}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){let n=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),n})}removeAllChannels(){return h(this,null,function*(){let e=yield Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e})}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case rn.connecting:return wt.Connecting;case rn.open:return wt.Open;case rn.closing:return wt.Closing;default:return wt.Closed}}isConnected(){return this.connectionState()===wt.Open}channel(e,n={config:{}}){let r=new Yn(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){let{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e=null){return h(this,null,function*(){let n=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(o=>{n&&o.updateJoinPayload({access_token:n}),o.joinedOnce&&o._isJoined()&&o._push(ue.access_token,{access_token:n})})}})}sendHeartbeat(){return h(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:o,payload:s,ref:i}=n;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){return h(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ue.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;let r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{let r=new Blob([ob],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}};var fc=class{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=rn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}};var an=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function $(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var os=class extends an{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}},_t=class extends an{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}};var sb=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},is=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>import("./chunk-TWVFGLRA.js").then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},jf=()=>sb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-TWVFGLRA.js")).Response:Response}),ss=t=>{if(Array.isArray(t))return t.map(n=>ss(n));if(typeof t=="function"||t!==Object(t))return t;let e={};return Object.entries(t).forEach(([n,r])=>{let o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=ss(r)}),e};var bt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},hc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ib=(t,e,n)=>bt(void 0,void 0,void 0,function*(){let r=yield jf();t instanceof r&&!n?.noResolveJson?t.json().then(o=>{e(new os(hc(o),t.status||500))}).catch(o=>{e(new _t(hc(o),o))}):e(new _t(hc(t),t))}),ab=(t,e,n,r)=>{let o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))};function er(t,e,n,r,o,s){return bt(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(n,ab(e,r,o,s)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>ib(c,a,r))})})}function cn(t,e,n,r){return bt(this,void 0,void 0,function*(){return er(t,"GET",e,n,r)})}function Ce(t,e,n,r,o){return bt(this,void 0,void 0,function*(){return er(t,"POST",e,r,o,n)})}function Lf(t,e,n,r,o){return bt(this,void 0,void 0,function*(){return er(t,"PUT",e,r,o,n)})}function Ff(t,e,n,r){return bt(this,void 0,void 0,function*(){return er(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function as(t,e,n,r,o){return bt(this,void 0,void 0,function*(){return er(t,"DELETE",e,r,o,n)})}var ne=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},cb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},cs=class{constructor(e,n={},r,o){this.url=e,this.headers=n,this.bucketId=r,this.fetch=is(o)}uploadOrUpdate(e,n,r,o){return ne(this,void 0,void 0,function*(){try{let s,i=Object.assign(Object.assign({},Vf),o),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)}),c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));let l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},i?.duplex?{duplex:i.duplex}:{})),p=yield d.json();return d.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if($(s))return{data:null,error:s};throw s}})}upload(e,n,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return ne(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let c,l=Object.assign({upsert:Vf.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),p=yield d.json();return d.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if($(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return ne(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");let s=yield Ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new an("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}update(e,n,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ne(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}copy(e,n,r){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield Ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return ne(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield Ce(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return ne(this,void 0,void 0,function*(){try{let o=yield Ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}download(e,n){return ne(this,void 0,void 0,function*(){let o=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),i=s?`?${s}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield cn(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if($(a))return{data:null,error:a};throw a}})}info(e){return ne(this,void 0,void 0,function*(){let n=this._getFinalPath(e);try{let r=yield cn(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ss(r),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}exists(e){return ne(this,void 0,void 0,function*(){let n=this._getFinalPath(e);try{return yield Ff(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if($(r)&&r instanceof _t){let o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){let r=this._getFinalPath(e),o=[],s=n?.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);let a=typeof n?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(n?.transform||{});c!==""&&o.push(c);let l=o.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}})}list(e,n,r){return ne(this,void 0,void 0,function*(){try{let o=Object.assign(Object.assign(Object.assign({},cb),n),{prefix:e||""});return{data:yield Ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if($(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};var $f="2.7.1";var Hf={"X-Client-Info":`storage-js/${$f}`};var ln=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},ls=class{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Hf),n),this.fetch=is(r)}listBuckets(){return ln(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($(e))return{data:null,error:e};throw e}})}getBucket(e){return ln(this,void 0,void 0,function*(){try{return{data:yield cn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ln(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return ln(this,void 0,void 0,function*(){try{return{data:yield Lf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ln(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ln(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}})}};var tr=class extends ls{constructor(e,n={},r){super(e,n,r)}from(e){return new cs(this.url,this.headers,e,this.fetch)}};var Uf="2.49.4";var nr="";typeof Deno<"u"?nr="deno":typeof document<"u"?nr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nr="react-native":nr="node";var lb={"X-Client-Info":`supabase-js-${nr}/${Uf}`},Bf={headers:lb},qf={schema:"public"},zf={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wf={};Dc();var ub=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},db=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ic:e=fetch,(...n)=>e(...n)},fb=()=>typeof Headers>"u"?Ec:Headers,Gf=(t,e,n)=>{let r=db(n),o=fb();return(s,i)=>ub(void 0,void 0,void 0,function*(){var a;let c=(a=yield e())!==null&&a!==void 0?a:t,l=new o(i?.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},i),{headers:l}))})};var hb=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function Qf(t){return t.replace(/\/$/,"")}function Jf(t,e){let{db:n,auth:r,realtime:o,global:s}=t,{db:i,auth:a,realtime:c,global:l}=e,u={db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign({},l),s),accessToken:()=>hb(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}var us="2.69.1";var It=30*1e3,ds=3,fs=ds*It,Zf="http://localhost:9999",Kf="supabase.auth.token";var Yf={"X-Client-Info":`gotrue-js/${us}`};var rr="X-Supabase-Api-Version",pc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eh=6e5;var or=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function _(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}var hs=class extends or{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function th(t){return _(t)&&t.name==="AuthApiError"}var un=class extends or{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Te=class extends or{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}},de=class extends Te{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function nh(t){return _(t)&&t.name==="AuthSessionMissingError"}var dn=class extends Te{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Et=class extends Te{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Dt=class extends Te{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function rh(t){return _(t)&&t.name==="AuthImplicitGrantRedirectError"}var sr=class extends Te{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},fn=class extends Te{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function ps(t){return _(t)&&t.name==="AuthRetryableFetchError"}var ir=class extends Te{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var Ve=class extends Te{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var oh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sh=` 	
\r=`.split(""),pb=(()=>{let t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sh.length;e+=1)t[sh[e].charCodeAt(0)]=-2;for(let e=0;e<oh.length;e+=1)t[oh[e].charCodeAt(0)]=e;return t})();function ih(t,e,n){let r=pb[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function gc(t){let e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{yb(i,r,n)};for(let i=0;i<t.length;i+=1)ih(t.charCodeAt(i),o,s);return e.join("")}function gb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function mb(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){let o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}gb(r,e)}}function yb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ah(t){let e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)ih(t.charCodeAt(o),n,r);return new Uint8Array(e)}function ch(t){let e=[];return mb(t,n=>e.push(n)),new Uint8Array(e)}function lh(t){return Math.round(Date.now()/1e3)+t}function uh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}var ve=()=>typeof window<"u"&&typeof document<"u",xt={tested:!1,writable:!1},Ye=()=>{if(!ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xt.tested)return xt.writable;let t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xt.tested=!0,xt.writable=!0}catch{xt.tested=!0,xt.writable=!1}return xt.writable};function dh(t){let e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}var gs=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>import("./chunk-TWVFGLRA.js").then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},fh=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mc=(t,e,n)=>h(void 0,null,function*(){yield t.setItem(e,JSON.stringify(n))}),cr=(t,e)=>h(void 0,null,function*(){let n=yield t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}}),lr=(t,e)=>h(void 0,null,function*(){yield t.removeItem(e)}),ar=class t{constructor(){this.promise=new t.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};ar.promiseConstructor=Promise;function ms(t){let e=t.split(".");if(e.length!==3)throw new Ve("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Xf.test(e[r]))throw new Ve("JWT not in base64url format");return{header:JSON.parse(gc(e[0])),payload:JSON.parse(gc(e[1])),signature:ah(e[2]),raw:{header:e[0],payload:e[1]}}}function hh(t){return h(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),t)})})}function ph(t,e){return new Promise((r,o)=>{h(this,null,function*(){for(let s=0;s<1/0;s++)try{let i=yield t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})})}function vb(t){return("0"+t.toString(16)).substr(-2)}function wb(){let e=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,vb).join("")}function _b(t){return h(this,null,function*(){let n=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")})}function bb(t){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;let n=yield _b(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Ct(t,e,n=!1){return h(this,null,function*(){let r=wb(),o=r;n&&(o+="/PASSWORD_RECOVERY"),yield mc(t,`${e}-code-verifier`,o);let s=yield bb(r);return[s,r===s?"plain":"s256"]})}var Ib=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gh(t){let e=t.headers.get(rr);if(!e||!e.match(Ib))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mh(t){if(!t)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yh(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Eb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},Tt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Db=[502,503,504];function vh(t){return h(this,null,function*(){var e;if(!fh(t))throw new fn(Tt(t),0);if(Db.includes(t.status))throw new fn(Tt(t),t.status);let n;try{n=yield t.json()}catch(s){throw new un(Tt(s),s)}let r,o=gh(t);if(o&&o.getTime()>=pc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ir(Tt(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new de}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new ir(Tt(n),t.status,n.weak_password.reasons);throw new hs(Tt(n),t.status||500,r)})}var xb=(t,e,n,r)=>{let o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};function x(t,e,n,r){return h(this,null,function*(){var o;let s=Object.assign({},r?.headers);s[rr]||(s[rr]=pc["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let i=(o=r?.query)!==null&&o!==void 0?o:{};r?.redirectTo&&(i.redirect_to=r.redirectTo);let a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=yield Cb(t,e,n+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function Cb(t,e,n,r,o,s){return h(this,null,function*(){let i=xb(e,r,o,s),a;try{a=yield t(n,Object.assign({},i))}catch(c){throw console.error(c),new fn(Tt(c),0)}if(a.ok||(yield vh(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield vh(c)}})}function $e(t){var e;let n=null;Tb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=lh(t.expires_in)));let r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function yc(t){let e=$e(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Me(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function wh(t){return{data:t,error:null}}function _h(t){let{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=Eb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},c=Object.assign({},i);return{data:{properties:a,user:c},error:null}}function bh(t){return t}function Tb(t){return t.access_token&&t.refresh_token&&t.expires_in}var Mb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},hn=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=gs(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,n="global"){return h(this,null,function*(){try{return yield x(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(e,n={}){try{return yield x(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Me})}catch(o){if(_(o))return{data:{user:null},error:o};throw o}})}generateLink(e){return h(this,null,function*(){try{let{options:n}=e,r=Mb(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r?.newEmail,delete o.newEmail),yield x(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:_h,redirectTo:n?.redirectTo})}catch(n){if(_(n))return{data:{properties:null,user:null},error:n};throw n}})}createUser(e){return h(this,null,function*(){try{return yield x(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Me})}catch(n){if(_(n))return{data:{user:null},error:n};throw n}})}listUsers(e){return h(this,null,function*(){var n,r,o,s,i,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield x(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:bh});if(u.error)throw u.error;let d=yield u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{let m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);l[`${y}Page`]=m}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(_(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return h(this,null,function*(){try{return yield x(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Me})}catch(n){if(_(n))return{data:{user:null},error:n};throw n}})}updateUserById(e,n){return h(this,null,function*(){try{return yield x(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Me})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,n=!1){return h(this,null,function*(){try{return yield x(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Me})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return h(this,null,function*(){try{let{data:n,error:r}=yield x(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(_(n))return{data:null,error:n};throw n}})}_deleteFactor(e){return h(this,null,function*(){try{return{data:yield x(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(_(n))return{data:null,error:n};throw n}})}};var Ih={getItem:t=>Ye()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ye()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ye()&&globalThis.localStorage.removeItem(t)}};function vc(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Eh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Mt={debug:!!(globalThis&&Ye()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},ur=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},ys=class extends ur{};function wc(t,e,n){return h(this,null,function*(){Mt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Mt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},o=>h(this,null,function*(){if(o){Mt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return yield n()}finally{Mt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Mt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ys(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Mt.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield n()}})))})}Eh();var Sb={url:Zf,storageKey:Kf,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Dh(t,e,n){return h(this,null,function*(){return yield n()})}var _c=(()=>{class t{constructor(n){var r,o;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=t.nextInstanceID,t.nextInstanceID+=1,this.instanceID>0&&ve()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Sb),n);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new hn({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=gs(s.fetch),this.lock=s.lock||Dh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ve()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=wc:this.lock=Dh,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ye()?this.storage=Ih:(this.memoryStorage={},this.storage=vc(this.memoryStorage)):(this.memoryStorage={},this.storage=vc(this.memoryStorage)),ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",i=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",i),yield this._notifyAllSubscribers(i.data.event,i.data.session,!1)}))}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${us}) ${new Date().toISOString()}`,...n),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var n;try{let r=dh(window.location.href),o="none";if(this._isImplicitGrantCallback(r)?o="implicit":(yield this._isPKCECallback(r))&&(o="pkce"),ve()&&this.detectSessionInUrl&&o!=="none"){let{data:s,error:i}=yield this._getSessionFromURL(r,o);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rh(i)){let l=(n=i.details)===null||n===void 0?void 0:n.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return yield this._removeSession(),{error:i}}let{session:a,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return _(r)?{error:r}:{error:new un("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(n){return h(this,null,function*(){var r,o,s;try{let i=yield x(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(s=n?.options)===null||s===void 0?void 0:s.captchaToken}},xform:$e}),{data:a,error:c}=i;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(_(i))return{data:{user:null,session:null},error:i};throw i}})}signUp(n){return h(this,null,function*(){var r,o,s;try{let i;if("email"in n){let{email:d,password:p,options:f}=n,g=null,m=null;this.flowType==="pkce"&&([g,m]=yield Ct(this.storage,this.storageKey)),i=yield x(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:g,code_challenge_method:m},xform:$e})}else if("phone"in n){let{phone:d,password:p,options:f}=n;i=yield x(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(o=f?.data)!==null&&o!==void 0?o:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:$e})}else throw new Et("You must provide either an email or phone number and a password");let{data:a,error:c}=i;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(_(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(n){return h(this,null,function*(){try{let r;if("email"in n){let{email:i,password:a,options:c}=n;r=yield x(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:yc})}else if("phone"in n){let{phone:i,password:a,options:c}=n;r=yield x(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:yc})}else throw new Et("You must provide either an email or phone number and a password");let{data:o,error:s}=r;return s?{data:{user:null,session:null},error:s}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new dn}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:s})}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(n){return h(this,null,function*(){var r,o,s,i;return yield this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(s=n.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=n.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(n){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(n)}))})}_exchangeCodeForSession(n){return h(this,null,function*(){let r=yield cr(this.storage,`${this.storageKey}-code-verifier`),[o,s]=(r??"").split("/");try{let{data:i,error:a}=yield x(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:$e});if(yield lr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dn}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(_(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}})}signInWithIdToken(n){return h(this,null,function*(){try{let{options:r,provider:o,token:s,access_token:i,nonce:a}=n,c=yield x(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:$e}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new dn}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(n){return h(this,null,function*(){var r,o,s,i,a;try{if("email"in n){let{email:c,options:l}=n,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield Ct(this.storage,this.storageKey));let{error:p}=yield x(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in n){let{phone:c,options:l}=n,{data:u,error:d}=yield x(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Et("You must provide either an email or phone number.")}catch(c){if(_(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(n){return h(this,null,function*(){var r,o;try{let s,i;"options"in n&&(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo,i=(o=n.options)===null||o===void 0?void 0:o.captchaToken);let{data:a,error:c}=yield x(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:$e});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(_(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(n){return h(this,null,function*(){var r,o,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=yield Ct(this.storage,this.storageKey)),yield x(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((s=n?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:wh})}catch(i){if(_(i))return{data:null,error:i};throw i}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(n=>h(this,null,function*(){let{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new de;let{error:s}=yield x(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}}))}catch(n){if(_(n))return{data:{user:null,session:null},error:n};throw n}})}resend(n){return h(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in n){let{email:o,type:s,options:i}=n,{error:a}=yield x(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in n){let{phone:o,type:s,options:i}=n,{data:a,error:c}=yield x(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new Et("You must provide either an email or phone number and a type")}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(r=>h(this,null,function*(){return r}))}))})}_acquireLock(n,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=h(this,null,function*(){return yield o,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,n,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let o=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield o}catch{}})),yield o;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(n){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield n(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=yield cr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!n)return{data:{session:null},error:null};let o=n.expires_at?n.expires_at*1e3-Date.now()<fs:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.storage.isServer){let a=this.suppressGetSessionWarning;n=new Proxy(n,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:n},error:null}}let{session:s,error:i}=yield this._callRefreshToken(n.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(n){return h(this,null,function*(){return n?yield this._getUser(n):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(n){return h(this,null,function*(){try{return n?yield x(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Me}):yield this._useSession(r=>h(this,null,function*(){var o,s,i;let{data:a,error:c}=r;if(c)throw c;return!(!((o=a.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new de}:yield x(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Me})}))}catch(r){if(_(r))return nh(r)&&(yield this._removeSession(),yield lr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(o){return h(this,arguments,function*(n,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(n,r)}))})}_updateUser(o){return h(this,arguments,function*(n,r={}){try{return yield this._useSession(s=>h(this,null,function*(){let{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new de;let c=i.session,l=null,u=null;this.flowType==="pkce"&&n.email!=null&&([l,u]=yield Ct(this.storage,this.storageKey));let{data:d,error:p}=yield x(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:Me});if(p)throw p;return c.user=d.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(s){if(_(s))return{data:{user:null},error:s};throw s}})}setSession(n){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(n)}))})}_setSession(n){return h(this,null,function*(){try{if(!n.access_token||!n.refresh_token)throw new de;let r=Date.now()/1e3,o=r,s=!0,i=null,{payload:a}=ms(n.access_token);if(a.exp&&(o=a.exp,s=o<=r),s){let{session:c,error:l}=yield this._callRefreshToken(n.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};i=c}else{let{data:c,error:l}=yield this._getUser(n.access_token);if(l)throw l;i={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:o-r,expires_at:o},yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(_(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(n){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(n)}))})}_refreshSession(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var o;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(o=a.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new de;let{session:s,error:i}=yield this._callRefreshToken(n.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(n,r){return h(this,null,function*(){try{if(!ve())throw new Dt("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Dt(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new sr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dt("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new sr("No code detected.");let{data:Ne,error:fe}=yield this._exchangeCodeForSession(n.code);if(fe)throw fe;let ke=new URL(window.location.href);return ke.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ke.toString()),{data:{session:Ne.session,redirectType:null},error:null}}let{provider_token:o,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=n;if(!i||!c||!a||!u)throw new Dt("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(c),f=d+p;l&&(f=parseInt(l));let g=f-d;g*1e3<=It&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);let m=f-p;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);let{data:y,error:E}=yield this._getUser(i);if(E)throw E;let Se={provider_token:o,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Se,redirectType:n.type},error:null}}catch(o){if(_(o))return{data:{session:null,redirectType:null},error:o};throw o}})}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}_isPKCECallback(n){return h(this,null,function*(){let r=yield cr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)})}signOut(){return h(this,arguments,function*(n={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(n)}))})}_signOut(){return h(this,arguments,function*({scope:n}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var o;let{data:s,error:i}=r;if(i)return{error:i};let a=(o=s.session)===null||o===void 0?void 0:o.access_token;if(a){let{error:c}=yield this.admin.signOut(a,n);if(c&&!(th(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return n!=="others"&&(yield this._removeSession(),yield lr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(n){let r=uh(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:o}}}_emitInitialSession(n){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var o,s;try{let{data:{session:i},error:a}=r;if(a)throw a;yield(o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",i),this._debug("INITIAL_SESSION","callback id",n,"session",i)}catch(i){yield(s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",n,"error",i),console.error(i)}}))})}resetPasswordForEmail(o){return h(this,arguments,function*(n,r={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=yield Ct(this.storage,this.storageKey,!0));try{return yield x(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(_(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var n;try{let{data:r,error:o}=yield this.getUser();if(o)throw o;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}linkIdentity(n){return h(this,null,function*(){var r;try{let{data:o,error:s}=yield this._useSession(i=>h(this,null,function*(){var a,c,l,u,d;let{data:p,error:f}=i;if(f)throw f;let g=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield x(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(s)throw s;return ve()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(_(o))return{data:{provider:n.provider,url:null},error:o};throw o}})}unlinkIdentity(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var o,s;let{data:i,error:a}=r;if(a)throw a;return yield x(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0})}))}catch(r){if(_(r))return{data:null,error:r};throw r}})}_refreshAccessToken(n){return h(this,null,function*(){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let o=Date.now();return yield ph(s=>h(this,null,function*(){return s>0&&(yield hh(200*Math.pow(2,s-1))),this._debug(r,"refreshing attempt",s),yield x(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:$e})}),(s,i)=>{let a=200*Math.pow(2,s);return i&&ps(i)&&Date.now()+a-o<It})}catch(o){if(this._debug(r,"error",o),_(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}})}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}_handleProviderSignIn(n,r){return h(this,null,function*(){let o=yield this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),ve()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var n;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let o=yield cr(this.storage,this.storageKey);if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fs;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${fs}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:i}=yield this._callRefreshToken(o.refresh_token);i&&(console.error(i),ps(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}})}_callRefreshToken(n){return h(this,null,function*(){var r,o;if(!n)throw new de;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ar;let{data:i,error:a}=yield this._refreshAccessToken(n);if(a)throw a;if(!i.session)throw new de;yield this._saveSession(i.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);let c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),_(i)){let a={session:null,error:i};return ps(i)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(n,r,o=!0){return h(this,null,function*(){let s=`#_notifyAllSubscribers(${n})`;this._debug(s,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});let i=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>h(this,null,function*(){try{yield c.callback(n,r)}catch(l){i.push(l)}}));if(yield Promise.all(a),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}})}_saveSession(n){return h(this,null,function*(){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,yield mc(this.storage,this.storageKey,n)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield lr(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ve()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),It);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let n=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((o.expires_at*1e3-n)/It);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${It}ms, refresh threshold is ${ds} ticks`),s<=ds&&(yield this._callRefreshToken(o.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(n){if(n.isAcquireTimeout||n instanceof ur)this._debug("auto refresh token tick lock not available");else throw n}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!ve()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}})}_onVisibilityChanged(n){return h(this,null,function*(){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(n,r,o){return h(this,null,function*(){let s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){let[i,a]=yield Ct(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(c.toString())}if(o?.queryParams){let i=new URLSearchParams(o.queryParams);s.push(i.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${s.join("&")}`})}_unenroll(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var o;let{data:s,error:i}=r;return i?{data:null,error:i}:yield x(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token})}))}catch(r){if(_(r))return{data:null,error:r};throw r}})}_enroll(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var o,s;let{data:i,error:a}=r;if(a)return{data:null,error:a};let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:l,error:u}=yield x(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});return u?{data:null,error:u}:(n.factorType==="totp"&&(!((s=l?.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(r){if(_(r))return{data:null,error:r};throw r}})}_verify(n){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var o;let{data:s,error:i}=r;if(i)return{data:null,error:i};let{data:a,error:c}=yield x(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(_(r))return{data:null,error:r};throw r}}))})}_challenge(n){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var o;let{data:s,error:i}=r;return i?{data:null,error:i}:yield x(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token})}))}catch(r){if(_(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(n){return h(this,null,function*(){let{data:r,error:o}=yield this._challenge({factorId:n.factorId});return o?{data:null,error:o}:yield this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:n},error:r}=yield this.getUser();if(r)return{data:null,error:r};let o=n?.factors||[],s=o.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=o.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:o,totp:s,phone:i},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(n=>h(this,null,function*(){var r,o;let{data:{session:s},error:i}=n;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=ms(s.access_token),c=null;a.aal&&(c=a.aal);let l=c;((o=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(l="aal2");let d=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(o){return h(this,arguments,function*(n,r={keys:[]}){let s=r.keys.find(c=>c.kid===n);if(s||(s=this.jwks.keys.find(c=>c.kid===n),s&&this.jwks_cached_at+eh>Date.now()))return s;let{data:i,error:a}=yield x(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new Ve("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),s=i.keys.find(c=>c.kid===n),!s)throw new Ve("No matching signing key found in JWKS");return s})}getClaims(o){return h(this,arguments,function*(n,r={keys:[]}){try{let s=n;if(!s){let{data:m,error:y}=yield this.getSession();if(y||!m.session)return{data:null,error:y};s=m.session.access_token}let{header:i,payload:a,signature:c,raw:{header:l,payload:u}}=ms(s);if(mh(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:m}=yield this.getUser(s);if(m)throw m;return{data:{claims:a,header:i,signature:c},error:null}}let d=yh(i.alg),p=yield this.fetchJwk(i.kid,r),f=yield crypto.subtle.importKey("jwk",p,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,f,c,ch(`${l}.${u}`))))throw new Ve("Invalid JWT signature");return{data:{claims:a,header:i,signature:c},error:null}}catch(s){if(_(s))return{data:null,error:s};throw s}})}}return t.nextInstanceID=0,t})();var Nb=_c,bc=Nb;var vs=class extends bc{constructor(e){super(e)}};var kb=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?s(u.value):o(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},ws=class{constructor(e,n,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");let a=Qf(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:qf,realtime:Wf,auth:Object.assign(Object.assign({},zf),{storageKey:c}),global:Bf},u=Jf(r??{},l);this.storageKey=(o=u.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=Gf(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Nf(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new qn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return kb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:c},l,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vs({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Xn(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var xh=(t,e,n)=>new ws(t,e,n);var Ab="https://wxbtlgxzsxswwdulbukt.supabase.co",Ob="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4YnRsZ3h6c3hzd3dkdWxidWt0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1MzM4NTQsImV4cCI6MjA2MTEwOTg1NH0.LaODzvfkY3q0KktHjTc_iqJ3kXAgazbsHBz4Grz3Fp4",Ch=class t{supabase;usuarioActual=null;constructor(){this.supabase=xh(Ab,Ob,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"sb-auth-token-"+Math.random().toString(36).substring(2,11)}}),this.supabase.auth.getSession().then(({data:e})=>{this.usuarioActual=e?.session?.user??null}),this.supabase.auth.onAuthStateChange((e,n)=>{this.usuarioActual=n?.user??null})}login(e,n,r=3){return h(this,null,function*(){let o=0;for(;o<r;)try{let{data:s,error:i}=yield this.supabase.auth.signInWithPassword({email:e,password:n});if(i){if(i.message.includes("NavigatorLockAcquireTimeout")&&o<r-1){o++,yield new Promise(u=>setTimeout(u,500*o));continue}throw i}let a=s.user,{data:c,error:l}=yield this.supabase.from("profiles").select("nombre, rol, activo").eq("id",a.id).single();return l?{error:l.message}:c.activo?{data:{user:a,profile:c}}:(yield this.supabase.auth.signOut(),{error:"Tu cuenta a\xFAn no ha sido activada por un administrador."})}catch(s){if(o>=r-1||!s.message.includes("NavigatorLockAcquireTimeout"))return{error:s.message};o++,yield new Promise(i=>setTimeout(i,500*o))}return{error:"Se alcanz\xF3 el n\xFAmero m\xE1ximo de intentos."}})}register(e,n,r,o=!1){return h(this,null,function*(){try{let{data:s,error:i}=yield this.supabase.auth.signUp({email:e,password:n,options:{emailRedirectTo:window.location.origin}});if(i){if(i.message.includes("NavigatorLockAcquireTimeout"))return{error:"System busy. Please try again later."};throw i}let a=s.user;if(a){let{error:c}=yield this.supabase.auth.updateUser({data:{full_name:r}});if(c)return{error:c.message};let{error:l}=yield this.supabase.from("profiles").insert([{id:a.id,nombre:r,activo:o}]);if(l)return{error:l.message}}return{data:s}}catch(s){return{error:s.message}}})}getUsuarioActualConPerfil(){return h(this,null,function*(){try{let{data:{user:e},error:n}=yield this.supabase.auth.getUser();if(n)throw n;if(!e)return{error:"No hay usuario logueado"};let{data:r,error:o}=yield this.supabase.from("profiles").select("nombre, rol").eq("id",e.id).single();return o?{error:o.message}:{data:{user:e,profile:r}}}catch(e){return{error:e.message}}})}getUser(){return h(this,null,function*(){try{let{data:{session:e},error:n}=yield this.supabase.auth.getSession();if(n)throw n;if(!e)return{error:"No active session"};let r=e.user,{data:o,error:s}=yield this.supabase.from("profiles").select("nombre, rol").eq("id",r.id).single();return s?{error:s.message}:{data:{user:r,profile:o}}}catch(e){return{error:e.message}}})}logout(){return h(this,null,function*(){try{localStorage.removeItem("sb-auth-token");let{error:e}=yield this.supabase.auth.signOut();if(e)throw e;return{success:!0}}catch(e){return{error:e.message}}})}agregarProducto(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("inventario").insert(e).select();if(r)throw r;return n})}obtenerProductos(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("inventario").select("*, categorias(id, nombre)").eq("eliminado",!1);if(n)throw new Error(n.message);return e})}eliminarProducto(e){return h(this,null,function*(){let{error:n}=yield this.supabase.from("inventario").update({eliminado:!0}).eq("id",e);if(n)throw new Error(n.message);return!0})}editarProducto(e,n){return h(this,null,function*(){let{data:r,error:o}=yield this.supabase.from("inventario").update(n).eq("id",e);if(o)throw new Error(o.message);return r})}agregarCategoria(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("categorias").insert([{nombre:e.nombre,descripcion:e.descripcion,activa:e.activa??!0}]);if(r)throw new Error(r.message);return n})}obtenerCategorias(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("categorias").select("id, nombre, descripcion").eq("activa",!0).order("nombre",{ascending:!0});if(n)throw new Error(n.message);return e||[]})}editarCategoria(e,n){return h(this,null,function*(){let{data:r,error:o}=yield this.supabase.from("categorias").update({nombre:n.nombre,descripcion:n.descripcion}).eq("id",e);if(o)throw new Error(o.message);return r})}agregarReceta(e,n){return h(this,null,function*(){let r=null;if(n){let a=`${Date.now()}-${n.name}`,{data:c,error:l}=yield this.supabase.storage.from("recetas-images").upload(a,n);if(l)throw new Error("Error al subir la imagen: "+l.message);let{data:u}=this.supabase.storage.from("recetas-images").getPublicUrl(a);r=u.publicUrl}let o=Q(G({},e),{imagen_url:r,precio_venta:e.precio_venta,ganancia:e.ganancia}),{data:s,error:i}=yield this.supabase.from("recetas").insert([o]);if(i)throw new Error(i.message);return s})}obtenerRecetas(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("recetas").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Error obteniendo recetas:",n),n;return e.map(r=>Q(G({},r),{ingredientes:typeof r.ingredientes=="string"?JSON.parse(r.ingredientes):r.ingredientes}))})}actualizarReceta(e,n,r){return h(this,null,function*(){let o=n.imagen_url;if(r){o&&(yield this.eliminarImagen(o));let{url:c,error:l}=yield this.subirImagen(r);if(l)throw console.error("Error al subir imagen:",l.message),new Error("Error subiendo imagen");o=c}let s={nombre:n.nombre,descripcion:n.descripcion,ingredientes:n.ingredientes,precio_preparacion:n.precio_preparacion,precio_venta:n.precio_venta,ganancia:n.ganancia,imagen_url:o,updated_at:new Date().toISOString()},{data:i,error:a}=yield this.supabase.from("recetas").update(s).eq("id",e).select();if(a)throw console.error("Error de Supabase al actualizar receta:",a.message),new Error("Error actualizando receta");return Q(G({},i[0]),{ingredientes:n.ingredientes})})}subirImagen(e){return h(this,null,function*(){let n=`${Date.now()}-${e.name}`,{error:r}=yield this.supabase.storage.from("recetas-images").upload(n,e);if(r)return{url:null,error:r};let{data:{publicUrl:o}}=this.supabase.storage.from("recetas-images").getPublicUrl(n);return{url:o,error:null}})}eliminarImagen(e){return h(this,null,function*(){let n=e.split("/").pop();if(!n)return;let{error:r}=yield this.supabase.storage.from("recetas-images").remove([n]);r&&console.error("Error eliminando imagen:",r)})}eliminarReceta(e){return h(this,null,function*(){let{error:n}=yield this.supabase.from("recetas").delete().eq("id",e);if(n)throw console.error(`Error eliminando receta con ID ${e}:`,n),n})}getFacturas(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("pedidos").select("*");return n?(console.error("Error al obtener facturas:",n),[]):e})}getFacturasDelDia(){return h(this,null,function*(){let e=new Date,n=new Date(e.setHours(0,0,0,0)),r=new Date(e.setHours(23,59,59,999)),{data:o,error:s}=yield this.supabase.from("pedidos").select("*").gte("fecha",n.toISOString()).lte("fecha",r.toISOString());return s||!o?(console.error("Error al obtener pedidos del d\xEDa:",s),[]):o})}crearPedido(e){return h(this,null,function*(){let n=Q(G({},e),{productos:e.productos}),{data:r,error:o}=yield this.supabase.from("pedidos").insert([n]).select();if(o)throw console.error("Error al crear factura:",o),o;return r?.[0]})}crearFactura(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("facturas").insert([{pedido_id:e.pedido_id,numero_factura:e.numero_factura,forma_pago:e.forma_pago,monto:e.monto,productos:e.productos??null,fecha:e.fecha,es_extra:e.es_extra??!1,codigo_transferencia:e.codigo_transferencia??null}]).select();if(r)throw console.error("Error al crear factura:",r),r;return n[0]})}actualizarPedido(e,n,r){return h(this,null,function*(){let{data:o,error:s}=yield this.supabase.from("pedidos").update({numero_factura:n,estado:r}).eq("id",e);if(s)throw console.error("Error al actualizar pedido:",s),s;return o})}fetchLastNotification(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("notificaciones").select("mensaje").order("id",{ascending:!1}).limit(1).single();return n?(console.error("Error al obtener la \xFAltima notificaci\xF3n:",n),null):e})}notificationChannel;listenNotifications(e){this.notificationChannel&&this.supabase.removeChannel(this.notificationChannel),this.notificationChannel=this.supabase.channel("notificaciones-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"notificaciones"},n=>h(this,null,function*(){let r=n.new;if(e(r),r.mensaje)try{let o=`\u{1F6A8} ALERTA \u{1F6A8}
${r.mensaje}

Fecha: ${new Date(r.fecha).toLocaleString()}`,s=encodeURIComponent(o),i=["1977431625","5941338034"];for(let a of i){let c=`https://api.telegram.org/bot7752238645:AAFbz7UPuDnkxFCTYvFyIRhMuVmsP2b17Lc/sendMessage?chat_id=${a}&text=${s}`,u=yield(yield fetch(c)).json()}}catch(o){console.error("\u274C Error al enviar a uno o m\xE1s chats de Telegram:",o)}})).subscribe()}ngOnDestroy(){this.notificationChannel&&this.supabase.removeChannel(this.notificationChannel)}obtenerUsuarios(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("profiles").select("*");return n?(console.error("Error al obtener los usuarios:",n),[]):e})}obtenerUsuariosConEmail(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.rpc("get_users_with_email");return n?(console.error("Error al obtener usuarios:",n),[]):e})}actualizarUsuario(e,n){return h(this,null,function*(){let{error:r}=yield this.supabase.from("profiles").update(n).eq("id",e);if(r)throw console.error("Error al actualizar usuario:",r),r;return!0})}desactivarUsuarioPorId(e){return h(this,null,function*(){let{error:n}=yield this.supabase.from("profiles").update({activo:!1}).eq("id",e);if(n)throw new Error(n.message)})}actualizarEstadoUsuario(e,n){return h(this,null,function*(){return yield this.supabase.from("profiles").update({activo:n}).eq("id",e)})}getUsuarioActual(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.auth.getUser();if(n)throw n;return e.user})}waitForSessionRestoration(){return h(this,null,function*(){return this.usuarioActual?!0:new Promise(e=>{let n=this.supabase.auth.onAuthStateChange((r,o)=>{r==="INITIAL_SESSION"&&(this.usuarioActual=o?.user??null,n.data.subscription.unsubscribe(),e(!!o))})})})}getUsuarioActualDesdeMemoria(){if(!this.usuarioActual)throw new Error("No hay sesi\xF3n activa");return this.usuarioActual}esperarSesionRestaurada(){return h(this,null,function*(){return new Promise(e=>{let n=this.supabase.auth.onAuthStateChange((r,o)=>{o&&(this.usuarioActual=o.user,n.data.subscription.unsubscribe(),e())});this.supabase.auth.getSession().then(({data:r})=>{r.session&&(this.usuarioActual=r.session.user,n.data.subscription.unsubscribe(),e())})})})}obtenerPerfilDeUsuario(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("profiles").select("nombre, rol, activo").eq("id",e).single();return r?(console.error("Error al obtener perfil:",r),null):n})}cambiarContrase\u00F1a(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.auth.updateUser({password:e});return r?(console.error("Error al cambiar la contrase\xF1a:",r),{error:r.message}):{user:n}})}cambiarCorreo(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.auth.updateUser({email:e});return r?{message:r.message||"Hubo un error al cambiar el correo."}:{message:"Correo electr\xF3nico actualizado correctamente. Verifica tu nuevo correo."}})}actualizarPerfil(e,n){return h(this,null,function*(){let{error:r}=yield this.supabase.from("profiles").update(n).eq("id",e);if(r)throw console.error("Error al actualizar usuario:",r),r;return!0})}registrarGasto(e){return h(this,null,function*(){try{let{categoria:n,descripcion:r,monto:o,fecha:s,proveedor:i,metodo_pago:a,factura:c,comentarios:l}=e,{data:u,error:d}=yield this.supabase.from("gastos").insert([{categoria:n,descripcion:r,monto:o,fecha:s,proveedor:i,metodo_pago:a,factura:c,comentarios:l}]);if(d){if(d.message.includes("timeout"))return{error:"Error de sistema. Intenta nuevamente m\xE1s tarde."};throw d}return{data:u}}catch(n){return console.error("Error al registrar el gasto:",n),{error:n.message}}})}obtenerGastos(){return h(this,null,function*(){try{let{data:e,error:n}=yield this.supabase.from("gastos").select("*").order("fecha",{ascending:!1});if(n)throw n;return{data:e}}catch(e){return console.error("Error al obtener los gastos:",e),{error:e.message}}})}actualizarGasto(e){return h(this,null,function*(){try{let n={};if(e.categoria&&(n.categoria=e.categoria),e.descripcion&&(n.descripcion=e.descripcion),e.monto&&(n.monto=e.monto),e.fecha&&(n.fecha=e.fecha),e.proveedor&&(n.proveedor=e.proveedor),e.metodo_pago&&(n.metodo_pago=e.metodo_pago),e.factura&&(n.factura=e.factura),e.comentarios&&(n.comentarios=e.comentarios),Object.keys(n).length===0)throw new Error("No se han realizado cambios en el gasto.");let{data:r,error:o}=yield this.supabase.from("gastos").update(n).eq("id",e.id);if(o)throw new Error(o.message);return r}catch(n){return n instanceof Error?(console.error("Error al actualizar gasto:",n.message),{error:n.message}):(console.error("Error desconocido:",n),{error:"Hubo un problema al actualizar el gasto, por favor intenta nuevamente."})}})}eliminarGasto(e){return h(this,null,function*(){try{let{error:n}=yield this.supabase.from("gastos").delete().eq("id",e);if(n)throw new Error(n.message);return!0}catch(n){return console.error("Error al eliminar gasto:",n.message),!1}})}crearCliente(e,n,r){return h(this,null,function*(){let{data:o,error:s}=yield this.supabase.from("clientes").insert([{nombre:e,telefono:n,direccion:r}]).select().single();if(s)throw s;return o})}obtenerClientes(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("clientes").select("*").order("creado_en",{ascending:!1});if(n)throw n;return e})}crearClienteConPrecios(e,n,r,o){return h(this,null,function*(){let{data:s,error:i}=yield this.supabase.from("clientes").insert([{nombre:e,telefono:n,direccion:r}]).select().single();if(i)throw i;let a=s.id,c=o.map(({almuerzo_id:d,precio:p})=>({cliente_id:a,almuerzo_id:d,precio:p})),{data:l,error:u}=yield this.supabase.from("precios_cliente").insert(c);if(u)throw u;return{cliente:s,precios:l}})}crearPedidoAlmuerzos(e){return h(this,null,function*(){if(!e.fecha)throw new Error("La fecha es requerida");if(!e.almuerzos||e.almuerzos.length===0)throw new Error("Debe seleccionar al menos un almuerzo");let n={cliente_id:e.cliente_id||null,fecha:e.fecha,estado_pago:e.estado_pago||"pendiente",total:e.total||0,observaciones:e.observaciones||null},{data:r,error:o}=yield this.supabase.from("pedidosalmuerzos").insert([n]).select().single();if(o)throw console.error("Error creando pedido:",o),new Error(o.message||"Error al crear pedido");if(!r?.id)throw new Error("No se pudo obtener el ID del pedido creado");let s=e.almuerzos.map(a=>({pedido_id:r.id,almuerzo_id:a.almuerzo_id,cantidad:a.cantidad})),{error:i}=yield this.supabase.from("pedidos_almuerzo").insert(s);if(i)throw console.error("Error en detalles:",i),new Error("Error al registrar almuerzos en el pedido");return r})}obtenerTiposDeAlmuerzo(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("almuerzos").select("id, nombre, descripcion");if(n)throw console.error("Error al obtener almuerzos:",n),new Error("No se pudieron obtener los tipos de almuerzo");return e})}obtenerClienteConPrecios(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("precios_cliente").select(`
      precio,
      almuerzos (
        id,
        nombre
      ),
      clientes (
        id,
        nombre,
        telefono,
        direccion
      )
    `).eq("cliente_id",e);if(r)throw r;return n})}obtenerClientesConPrecios(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("precios_cliente").select(`
      precio,
      almuerzos (
        id,
        nombre
      ),
      clientes (
        id,
        nombre,
        telefono,
        direccion,
        activo,
        creado_en
      )
    `);if(n)throw n;return e})}obtenerPedidosConDetalle(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("pedidosalmuerzos").select(`
      id,
      cliente_id,
      fecha,
      estado_pago,
      total,
      observaciones,
      clientes (
        nombre
      ),
      pedidos_almuerzo (
        almuerzo_id,
        cantidad,
        almuerzos (
          nombre
        )
      )
    `);if(n)throw n;return e})}obtenerPedidosConDetalleFiltrado(e,n){return h(this,null,function*(){let{data:r,error:o}=yield this.supabase.from("pedidosalmuerzos").select(`
      id,
      cliente_id,
      fecha,
      estado_pago,
      total,
      observaciones,
      clientes (
        nombre
      ),
      pedidos_almuerzo (
        almuerzo_id,
        cantidad,
        almuerzos (
          nombre
        )
      )
    `).gte("fecha",e).lte("fecha",n).order("fecha",{ascending:!1});if(o)throw o;return r})}cambiarEstadoCliente(e,n){return h(this,null,function*(){let{error:r}=yield this.supabase.from("clientes").update({activo:n}).eq("id",e);if(r)throw r})}actualizarClienteConPrecios(e,n,r,o,s){return h(this,null,function*(){let{data:i,error:a}=yield this.supabase.from("clientes").update({nombre:n,telefono:r,direccion:o}).eq("id",e).select().single();if(a)throw a;let{error:c}=yield this.supabase.from("precios_cliente").delete().eq("cliente_id",e);if(c)throw c;let l=s.map(({almuerzo_id:p,precio:f})=>({cliente_id:e,almuerzo_id:p,precio:f})),{data:u,error:d}=yield this.supabase.from("precios_cliente").insert(l);if(d)throw d;return{cliente:i,precios:u}})}actualizarEstadoPagado(e){return h(this,null,function*(){let{error:n}=yield this.supabase.from("pedidosalmuerzos").update({estado_pago:"pagado"}).in("id",e);if(n)throw n})}obtenerFacturasHoy(){return h(this,null,function*(){try{let{data:e,error:n}=yield this.supabase.from("caja_sesiones").select("*").eq("estado","abierta").order("hora_apertura",{ascending:!1}).limit(1);if(n)throw n;if(!e||e.length===0)return{error:"No hay sesi\xF3n de caja abierta"};let r=e[0].hora_apertura,{data:o,error:s}=yield this.supabase.from("facturas").select("*").or(`fecha.gte.${r},fecha.is.null`).order("fecha",{ascending:!1});if(s)throw s;return{data:o}}catch(e){return console.error("Error al obtener facturas por sesi\xF3n:",e),{error:e.message}}})}obtenerGastosHoy(){return h(this,null,function*(){try{let{data:e,error:n}=yield this.supabase.from("caja_sesiones").select("fecha_operativa").eq("estado","abierta").order("hora_apertura",{ascending:!1}).limit(1);if(n)throw n;if(!e||e.length===0)return{data:null,error:"No hay caja abierta"};let r=e[0].fecha_operativa,{data:o,error:s}=yield this.supabase.from("gastos").select("*").gte("fecha",r).order("fecha",{ascending:!1});if(s)throw s;return{data:o,error:null}}catch(e){let n=e instanceof Error?e.message:"Error desconocido";return console.error("Error en obtenerGastosHoy:",n),{data:null,error:n}}})}registrarAperturaCaja(e){return h(this,null,function*(){try{let{usuario_nombre:n,fecha_operativa:r,hora_apertura:o,numero_cierre:s,observaciones:i}=e,{data:a,error:c}=yield this.supabase.from("caja_sesiones").select("*").eq("usuario_nombre",n).eq("estado","abierta");if(c)throw c;if(a&&a.length>0)return{error:"Ya existe una sesi\xF3n de caja abierta. Debes cerrarla antes de abrir una nueva."};let{data:l,error:u}=yield this.supabase.from("caja_sesiones").insert([{usuario_nombre:n,fecha_operativa:r,hora_apertura:o,numero_cierre:s,estado:"abierta",observaciones:i||null}]);if(u){if(u.message.includes("timeout"))return{error:"Error de sistema. Intenta nuevamente m\xE1s tarde."};throw u}return{data:l}}catch(n){return console.error("Error al registrar apertura de caja:",n),{error:n.message}}})}obtenerSesionesAbiertas(e,n){return h(this,null,function*(){let{data:r,error:o}=yield this.supabase.from("caja_sesiones").select("*").eq("usuario_nombre",e).eq("fecha_operativa",n).eq("estado","abierta");if(o)throw o;return r})}obtenerMaxNumeroCierreGlobal(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("caja_sesiones").select("numero_cierre").order("numero_cierre",{ascending:!1}).limit(1).maybeSingle();if(n)throw console.error("Error al obtener max numero_cierre global:",n),n;return e?.numero_cierre??null})}obtenerMaxNumeroCierrecaja(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("cierres_caja").select("numero_cierre").order("numero_cierre",{ascending:!1}).limit(1).maybeSingle();if(n)throw console.error("Error al obtener max numero_cierre global:",n),n;return e?.numero_cierre??null})}registrarCierreCaja(e){return h(this,null,function*(){try{let{data:n,error:r}=yield this.supabase.from("cierres_caja").insert([e]);return r?(console.error("Error al registrar cierre:",r),{error:r.message}):{data:n}}catch(n){return console.error("Excepci\xF3n al registrar cierre de caja:",n),{error:n.message}}})}obtenerCajaAbierta(e){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("caja_sesiones").select("*").eq("usuario_nombre",e).eq("estado","abierta").order("id",{ascending:!1}).limit(1);return r?(console.error("Error al obtener caja abierta:",r),null):n?.[0]||null})}obtenerCajaAbiertas(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("caja_sesiones").select("*").eq("estado","abierta").order("id",{ascending:!1}).limit(1);return n?(console.error("Error al obtener caja abierta:",n),null):e?.[0]||null})}CierreCaja(e){return h(this,null,function*(){try{let{usuario_nombre:n,fecha_operativa:r,hora_cierre:o}=e,{data:s,error:i}=yield this.supabase.from("caja_sesiones").select("id").eq("usuario_nombre",n).eq("fecha_operativa",r).eq("estado","abierta");if(i)throw i;if(!s||s.length===0)return{error:"No existe sesi\xF3n abierta para cerrar."};let a=s[0].id,{data:c,error:l}=yield this.supabase.from("caja_sesiones").update({estado:"cerrada",hora_cierre:o}).eq("id",a);if(l){if(l.message.includes("timeout"))return{error:"Error de sistema. Intenta nuevamente m\xE1s tarde."};throw l}return{data:c}}catch(n){return console.error("Error al cerrar la caja:",n),{error:n.message}}})}obtenerUltimosCierresCombinado(e=3){return h(this,null,function*(){let{data:n,error:r}=yield this.supabase.from("caja_sesiones").select("*").eq("estado","cerrada").order("hora_cierre",{ascending:!1}).limit(e);if(r)return console.error("Error al obtener sesiones:",r),[];let{data:o,error:s}=yield this.supabase.from("cierres_caja").select("*");return s?(console.error("Error al obtener cierres:",s),[]):n.map(a=>{let c=o.find(l=>l.numero_cierre===a.numero_cierre);return{fecha:a.hora_cierre,numero:a.numero_cierre,total_ventas:parseFloat(c?.total_ventas||"0.00"),monto_contado:parseFloat(c?.monto_contado||"0.00"),diferencia:parseFloat(c?.diferencia||"0.00"),observaciones:c?.observaciones||""}})})}obtenerCierresDeCaja(){return h(this,null,function*(){let{data:e,error:n}=yield this.supabase.from("cierres_caja").select("*").order("fecha_cierre",{ascending:!1}).limit(1);if(n)throw console.error("Error al obtener el \xFAltimo cierre de caja:",n),n;return e||[]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{U as a,Hh as b,A as c,Ws as d,Gs as e,He as f,bn as g,In as h,Be as i,Kh as j,Yh as k,Xh as l,nt as m,rt as n,ap as o,ot as p,Qs as q,Vr as r,lp as s,up as t,En as u,el as v,dp as w,Dn as x,Js as y,hp as z,pp as A,Zs as B,gp as C,mp as D,yp as E,vp as F,wp as G,_p as H,N as I,Wl as J,B as K,kT as L,AT as M,P as N,M as O,Qe as P,k as Q,su as R,lu as S,Je as T,du as U,OT as V,RT as W,PT as X,jT as Y,LT as Z,FT as _,VT as $,Gt as aa,Ca as ba,jo as ca,ze as da,se as ea,mt as fa,$T as ga,Lo as ha,HT as ia,UT as ja,BT as ka,mm as la,qT as ma,zT as na,Fo as oa,ka as pa,Em as qa,On as ra,Om as sa,WT as ta,GT as ua,QT as va,JT as wa,Ri as xa,vo as ya,wo as za,nM as Aa,Go as Ba,rM as Ca,Qa as Da,Hv as Ea,Uv as Fa,aM as Ga,cM as Ha,lM as Ia,uM as Ja,Zv as Ka,aw as La,dM as Ma,Qd as Na,fM as Oa,hw as Pa,Ln as Qa,vw as Ra,Nw as Sa,kw as Ta,hM as Ua,of as Va,sf as Wa,Bw as Xa,Ww as Ya,Gw as Za,pM as _a,gM as $a,mM as ab,ea as bb,r_ as cb,yM as db,s_ as eb,vM as fb,wM as gb,_M as hb,bM as ib,IM as jb,EM as kb,c_ as lb,cf as mb,l_ as nb,u_ as ob,DM as pb,d_ as qb,xM as rb,CM as sb,TM as tb,MM as ub,SM as vb,NM as wb,kM as xb,AM as yb,OM as zb,RM as Ab,PM as Bb,jM as Cb,LM as Db,gf as Eb,FM as Fb,VM as Gb,R_ as Hb,$M as Ib,HM as Jb,UM as Kb,BM as Lb,qM as Mb,Ch as Nb};

import{a as Le,b as Ve}from"./chunk-LGPNIMD4.js";import"./chunk-FK6H3RFT.js";import{b as Ce,c as xe,d as ve,e as we,f as Ee,g as ye,h as Se,i as Te,j as Fe,k as Ae,l as Ie,n as ke,o as De,p as Me,q as Pe}from"./chunk-DS7KNDYW.js";import{a as We}from"./chunk-OH4UTAUL.js";import{j as ue,k as me,l as pe,m as he,o as ge,p as fe,q as _e,r as be}from"./chunk-6BCYE2FI.js";import{Ab as ce,Ba as G,Bb as j,Ga as Q,Ha as ae,L as oe,La as C,N as re,Nb as Oe,Ra as $,Sa as h,Ta as Y,Va as i,W as c,Wa as o,X as u,Xa as f,Y as b,Ya as V,Z as E,Za as z,_a as F,cb as g,db as p,eb as se,jb as M,kb as a,lb as y,mb as S,ob as x,pb as v,qb as w,sb as le,ub as K,wa as l,xb as D,yb as de,zb as O}from"./chunk-UZPGQPCC.js";import"./chunk-EOG6CNDG.js";import{a as R,b as q,g as He,i as A}from"./chunk-CSTXWUWE.js";var T=He(We());var Qe=/[&<>"']/g,_i=RegExp(Qe.source);function $e(){return new Z}var Z=class{constructor(){this._selected=[]}get value(){return this._selected}select(e,t,n){if(e.selected=!0,(!e.children||!t&&n)&&this._selected.push(e),t)if(e.parent){let r=e.parent.children.length,s=e.parent.children.filter(m=>m.selected).length;e.parent.selected=r===s}else e.children&&(this._setChildrenSelectedState(e.children,!0),this._removeChildren(e),n&&this._activeChildren(e)?this._selected=[...this._selected.filter(r=>r.parent!==e),e]:this._selected=[...this._selected,...e.children.filter(r=>!r.disabled)])}unselect(e,t){if(this._selected=this._selected.filter(n=>n!==e),e.selected=!1,t)if(e.parent&&e.parent.selected){let n=e.parent.children;this._removeParent(e.parent),this._removeChildren(e.parent),this._selected.push(...n.filter(r=>r!==e&&!r.disabled)),e.parent.selected=!1}else e.children&&(this._setChildrenSelectedState(e.children,!1),this._removeChildren(e))}clear(e){this._selected=e?this._selected.filter(t=>t.disabled):[]}_setChildrenSelectedState(e,t){for(let n of e)n.disabled||(n.selected=t)}_removeChildren(e){this._selected=[...this._selected.filter(t=>t.parent!==e),...e.children.filter(t=>t.parent===e&&t.disabled&&t.selected)]}_removeParent(e){this._selected=this._selected.filter(t=>t!==e)}_activeChildren(e){return e.children.every(t=>!t.disabled||t.selected)}};var Ye=new re("ng-select-selection-model");var ze=(()=>{class d{static{this.\u0275fac=function(n){return new(n||d)}}static{this.\u0275mod=ae({type:d})}static{this.\u0275inj=oe({providers:[{provide:Ye,useValue:$e}]})}}return d})();var Ke=(d,e)=>({"bg-green-100 text-green-800":d,"bg-purple-100 text-purple-800":e}),Ze=()=>[];function Je(d,e){d&1&&(i(0,"div",122),a(1," El nombre es obligatorio. "),o())}function Xe(d,e){d&1&&(i(0,"div",122),a(1," Tel\xE9fono inv\xE1lido (7-15 d\xEDgitos). "),o())}function et(d,e){if(d&1&&(i(0,"option",123),a(1),o()),d&2){let t=e.$implicit;h("value",t.id),l(),y(t.nombre)}}function tt(d,e){if(d&1){let t=F();i(0,"li",127)(1,"div")(2,"span",29),a(3),o(),i(4,"span",128),a(5),D(6,"number"),o()(),i(7,"button",129),g("click",function(){let r=c(t).index,s=p(3);return u(s.eliminarPrecioTemporal(r))}),b(),i(8,"svg",77),f(9,"path",130),o()()()}if(d&2){let t=e.$implicit;l(3),y(t.nombreAlmuerzo),l(2),S("- $",O(6,2,t.precio,"1.2-2"),"")}}function it(d,e){if(d&1&&(i(0,"div",124)(1,"h3",125),a(2,"Almuerzos Agregados"),o(),i(3,"ul",45),C(4,tt,10,5,"li",126),o()()),d&2){let t=p(2);l(4),h("ngForOf",t.preciosTemporales)}}function nt(d,e){if(d&1){let t=F();i(0,"div",90)(1,"div",91)(2,"button",92),g("click",function(){c(t);let r=p();return u(r.cerrarModalUsuario())}),a(3," \xD7 "),o(),i(4,"div",93)(5,"div",94)(6,"div",95),b(),i(7,"svg",96),f(8,"path",97),o()(),E(),i(9,"h2",98),a(10,"Nuevo Usuario"),o()(),i(11,"form",99,1)(13,"div",100)(14,"div")(15,"label",101),a(16,"Nombre"),o(),i(17,"input",102,2),w("ngModelChange",function(r){c(t);let s=p();return v(s.nombre,r)||(s.nombre=r),u(r)}),o(),C(19,Je,2,0,"div",103),o(),i(20,"div")(21,"label",104),a(22,"Tel\xE9fono"),o(),i(23,"input",105,3),w("ngModelChange",function(r){c(t);let s=p();return v(s.telefono,r)||(s.telefono=r),u(r)}),o(),C(25,Xe,2,0,"div",103),o(),i(26,"div")(27,"label",106),a(28,"Direcci\xF3n"),o(),i(29,"input",107),w("ngModelChange",function(r){c(t);let s=p();return v(s.direccion,r)||(s.direccion=r),u(r)}),o()()(),i(30,"div",108)(31,"h3",109),a(32,"Agregar Almuerzos"),o(),i(33,"div",110)(34,"div")(35,"label",111),a(36,"Tipo de Almuerzo"),o(),i(37,"select",112),w("ngModelChange",function(r){c(t);let s=p();return v(s.almuerzoSeleccionado,r)||(s.almuerzoSeleccionado=r),u(r)}),i(38,"option",113),a(39,"Seleccione un almuerzo"),o(),C(40,et,2,2,"option",114),o()(),i(41,"div")(42,"label",115),a(43,"Precio"),o(),i(44,"input",116),w("ngModelChange",function(r){c(t);let s=p();return v(s.precio,r)||(s.precio=r),u(r)}),o()(),i(45,"div",117)(46,"button",118),g("click",function(){c(t);let r=p();return u(r.agregarPrecioTemporal())}),b(),i(47,"svg",77),f(48,"path",119),o(),a(49," Agregar "),o()()()(),C(50,it,5,1,"div",120),E(),i(51,"div",108)(52,"button",121),g("click",function(){c(t);let r=p();return u(r.guardarClienteConPrecios())}),a(53," Guardar Usuario y Almuerzos "),o()()()()()()}if(d&2){let t=M(12),n=M(18),r=M(24),s=p();l(17),x("ngModel",s.nombre),l(2),h("ngIf",n.invalid&&n.touched),l(4),x("ngModel",s.telefono),l(2),h("ngIf",r.invalid&&r.touched),l(4),x("ngModel",s.direccion),l(8),x("ngModel",s.almuerzoSeleccionado),l(3),h("ngForOf",s.tiposDeAlmuerzo),l(4),x("ngModel",s.precio),l(2),h("disabled",!s.almuerzoSeleccionado||!s.precio||s.precio<=0),l(4),h("ngIf",s.preciosTemporales.length>0),l(2),h("disabled",t.invalid||s.preciosTemporales.length===0)}}function ot(d,e){if(d&1&&(i(0,"div",155)(1,"span",156),a(2),o(),i(3,"span",157),a(4),D(5,"currency"),o()()),d&2){let t=e.$implicit;l(2),y(t.nombre),l(2),y(ce(5,2,t.precio,"USD","symbol","1.2-2"))}}function rt(d,e){if(d&1){let t=F();i(0,"tr",137)(1,"td",138)(2,"div",139)(3,"div",140),a(4),o(),i(5,"div",141)(6,"div",142),a(7),o(),i(8,"div",143)(9,"span",144),a(10),o()(),i(11,"div",143),a(12),o()()()(),i(13,"td",145)(14,"div",146),a(15),o(),i(16,"div",143)(17,"span",147),a(18),o()()(),i(19,"td",138)(20,"div",45),C(21,ot,6,7,"div",148),o()(),i(22,"td",149)(23,"button",150),g("click",function(){let r=c(t).$implicit,s=p(2);return u(s.abrirModalEditarCliente(r))}),b(),i(24,"svg",151),f(25,"path",152),o(),a(26," Editar "),o(),E(),i(27,"button",153),g("click",function(){let r=c(t).$implicit,s=p(2);return u(s.toggleEstadoCliente(r))}),b(),i(28,"svg",151),f(29,"path",154),o(),a(30),o()()()}if(d&2){let t=e.$implicit,n=p(2);l(4),S(" ",n.getInitials(t.nombre)," "),l(3),y(t.nombre),l(2),h("ngClass",K(12,Ke,t.tipo==="Mensual",t.tipo==="Quincenal")),l(),S(" ",t.tipo," "),l(2),y(t.direccion),l(3),y(t.telefono),l(2),h("ngClass",t.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),l(),S(" ",t.activo?"Activo":"Inactivo"," "),l(3),h("ngForOf",t.almuerzos),l(6),h("ngClass",t.activo?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),l(2),$("d",t.activo?"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16":"M5 13l4 4L19 7"),l(),S(" ",t.activo?"Desactivar":"Activar"," ")}}function at(d,e){if(d&1&&(i(0,"div")(1,"table",131)(2,"thead",132)(3,"tr")(4,"th",133),a(5,"Cliente"),o(),i(6,"th",133),a(7,"Contacto"),o(),i(8,"th",133),a(9,"Almuerzos"),o(),i(10,"th",134),a(11,"Acciones"),o()()(),i(12,"tbody",135),C(13,rt,31,15,"tr",136),o()()()),d&2){let t=p();l(13),h("ngForOf",t.clientesPaginados)}}function st(d,e){if(d&1){let t=F();i(0,"div",158)(1,"div",159),b(),i(2,"svg",160),f(3,"path",161),o(),E(),i(4,"h3",162),a(5,"No hay clientes registrados"),o(),i(6,"p",163),a(7,'Presiona el bot\xF3n "Nuevo Cliente" para agregar tu primer registro'),o(),i(8,"button",164),g("click",function(){c(t);let r=p();return u(r.abrirModalUsuario())}),b(),i(9,"svg",151),f(10,"path",24),o(),a(11," Agregar Cliente "),o()()()}}function lt(d,e){if(d&1){let t=F();i(0,"div",187)(1,"label",173),a(2),o(),i(3,"div",40)(4,"div",18)(5,"span",53),a(6,"$"),o()(),i(7,"input",188),w("ngModelChange",function(r){let s=c(t).index,m=p(2);return v(m.clienteEdit.almuerzos[s].precio,r)||(m.clienteEdit.almuerzos[s].precio=r),u(r)}),o()()()}if(d&2){let t=e.$implicit,n=e.index,r=p(2);l(2),S(" ",t.nombre," "),l(5),se("name","precio-",n,""),x("ngModel",r.clienteEdit.almuerzos[n].precio)}}function dt(d,e){if(d&1){let t=F();i(0,"div",165)(1,"div",166)(2,"button",167),g("click",function(){c(t);let r=p();return u(r.cerrarModal())}),b(),i(3,"svg",168),f(4,"path",78),o()(),E(),i(5,"div",169)(6,"h2",170),b(),i(7,"svg",171),f(8,"path",152),o(),a(9," Editar Informaci\xF3n del Cliente "),o()(),E(),i(10,"form",172),g("ngSubmit",function(){c(t);let r=p();return u(r.guardarCambiosCliente())}),i(11,"div")(12,"label",173),a(13,"Nombre del Cliente"),o(),i(14,"div",40)(15,"div",18),b(),i(16,"svg",19),f(17,"path",97),o()(),E(),i(18,"input",174),w("ngModelChange",function(r){c(t);let s=p();return v(s.clienteEdit.nombre,r)||(s.clienteEdit.nombre=r),u(r)}),o()()(),i(19,"div")(20,"label",173),a(21,"Tel\xE9fono"),o(),i(22,"div",40)(23,"div",18),b(),i(24,"svg",19),f(25,"path",175),o()(),E(),i(26,"input",176),w("ngModelChange",function(r){c(t);let s=p();return v(s.clienteEdit.telefono,r)||(s.clienteEdit.telefono=r),u(r)}),o()()(),i(27,"div")(28,"label",173),a(29,"Direcci\xF3n de Entrega"),o(),i(30,"div",40)(31,"div",18),b(),i(32,"svg",19),f(33,"path",177)(34,"path",178),o()(),E(),i(35,"input",179),w("ngModelChange",function(r){c(t);let s=p();return v(s.clienteEdit.direccion,r)||(s.clienteEdit.direccion=r),u(r)}),o()()(),i(36,"div",108)(37,"h3",180),a(38,"Precios de Almuerzos"),o(),C(39,lt,8,4,"div",181),o(),i(40,"div",182)(41,"button",183),g("click",function(){c(t);let r=p();return u(r.cerrarModal())}),a(42," Cancelar "),o(),i(43,"button",184),b(),i(44,"svg",185),f(45,"path",186),o(),a(46," Guardar Cambios "),o()()()()()}if(d&2){let t=p();l(18),x("ngModel",t.clienteEdit.nombre),l(8),x("ngModel",t.clienteEdit.telefono),l(9),x("ngModel",t.clienteEdit.direccion),l(4),h("ngForOf",t.clienteEdit.almuerzos)}}function ct(d,e){if(d&1){let t=F();i(0,"li",191),g("click",function(){let r=c(t).$implicit,s=p(2);return u(s.seleccionarCliente(r))})("mousedown",function(r){return c(t),u(r.preventDefault())}),i(1,"span",192),a(2),o(),i(3,"span",29),a(4),o()()}if(d&2){let t=e.$implicit;l(2),S(" ",(t.nombre==null?null:t.nombre.charAt(0))||"C"," "),l(2),y(t.nombre)}}function ut(d,e){if(d&1&&(i(0,"ul",189),C(1,ct,5,2,"li",190),o()),d&2){let t=p();l(),h("ngForOf",t.clientesFiltrados)}}function mt(d,e){if(d&1){let t=F();i(0,"div",193)(1,"div",194)(2,"div",195)(3,"p",196),a(4),o(),i(5,"p",197),a(6),o()(),i(7,"input",198),w("ngModelChange",function(r){let s=c(t).$implicit;return v(s.cantidad,r)||(s.cantidad=r),u(r)}),o()()()}if(d&2){let t=e.$implicit;l(4),y(t.nombre),l(2),y(t.descripcion),l(),x("ngModel",t.cantidad)}}function pt(d,e){if(d&1){let t=F();i(0,"button",199),g("click",function(){c(t);let r=p();return u(r.marcarPedidosFiltradosComoPagados())}),a(1,` Marcar pedidos filtrados como pagados
`),o()}}function ht(d,e){if(d&1&&(i(0,"div",212)(1,"span"),a(2),o(),i(3,"span",213),a(4),o()()),d&2){let t=p().$implicit;h("ngClass",t.almuerzos.nombre.toLowerCase().includes("completo")?"bg-emerald-50 text-emerald-700 border border-emerald-200":t.almuerzos.nombre.toLowerCase().includes("empaquetado")?"bg-amber-50 text-amber-700 border border-amber-200":"bg-blue-50 text-blue-700 border border-blue-200"),l(2),y(t.almuerzos.nombre),l(2),y(t.cantidad)}}function gt(d,e){if(d&1&&(V(0),C(1,ht,5,3,"div",211),z()),d&2){let t=e.$implicit;l(),h("ngIf",t.almuerzos!==null)}}function ft(d,e){if(d&1&&(V(0),C(1,gt,2,1,"ng-container",210),z()),d&2){let t=p().$implicit;l(),h("ngForOf",t.pedidos_almuerzo)}}function _t(d,e){if(d&1&&(i(0,"div",214),a(1),o()),d&2){let t=p().$implicit;l(),S(" ",t.observaciones||"Sin observaciones"," ")}}function bt(d,e){if(d&1&&(i(0,"tr",200)(1,"td",145)(2,"div",139)(3,"div",201),a(4),o(),i(5,"div",202)(6,"div",142),a(7),o()()()(),i(8,"td",138)(9,"div",203),C(10,ft,2,1,"ng-container",26)(11,_t,2,1,"ng-template",null,4,j),o()(),i(13,"td",145)(14,"div",204),b(),i(15,"svg",205),f(16,"path",206),o(),a(17),D(18,"date"),o()(),E(),i(19,"td",145)(20,"div",207),a(21),D(22,"number"),o()(),i(23,"td",145)(24,"span",208)(25,"span",139),f(26,"span",209),a(27),D(28,"titlecase"),o()()()()),d&2){let t=e.$implicit,n=M(12),r=p();l(4),S(" ",(t.clientes==null||t.clientes.nombre==null?null:t.clientes.nombre.charAt(0))||"C"," "),l(3),y((t.clientes==null?null:t.clientes.nombre)||"Cliente sin nombre"),l(3),h("ngIf",t.tieneAlmuerzosValidos)("ngIfElse",n),l(7),S(" ",O(18,9,t.fecha,"dd/MM/yyyy")," "),l(4),S("$",O(22,12,t.total,"1.2-2"),""),l(3),h("ngClass",r.getEstadoClase(t.estado_pago)),l(2),h("ngClass",t.estado_pago.toLowerCase()==="pagado"?"bg-emerald-500":t.estado_pago.toLowerCase()==="pendiente"?"bg-amber-500":"bg-red-500"),l(),S(" ",de(28,15,t.estado_pago)," ")}}function Ct(d,e){if(d&1){let t=F();i(0,"tr")(1,"td",215)(2,"div",216),b(),i(3,"svg",217),f(4,"path",218),o(),E(),i(5,"h4",219),a(6,"No se encontraron pedidos"),o(),i(7,"p",220),a(8,"Ajusta los filtros para ver resultados"),o(),i(9,"button",221),g("click",function(){c(t);let r=p();return u(r.limpiarFiltros())}),b(),i(10,"svg",77),f(11,"path",222),o(),a(12," Restablecer filtros "),o()()()()}}function xt(d,e){d&1&&(i(0,"span",9),a(1,"pedidos filtrados"),o())}function vt(d,e){if(d&1&&(i(0,"span",9),a(1),o()),d&2){let t=p(2);l(),S("de ",t.pedidos.length," pedidos")}}function wt(d,e){if(d&1&&(i(0,"div",223)(1,"div",224)(2,"div",225),b(),i(3,"svg",226),f(4,"path",63),o(),E(),i(5,"span"),a(6,"Mostrando:"),o(),i(7,"span",227),a(8),o(),C(9,xt,2,0,"span",228)(10,vt,2,1,"span",228),o(),i(11,"div",229)(12,"span",230),a(13,"Total:"),o(),i(14,"span",231),a(15),D(16,"number"),o()()()()),d&2){let t=p();l(8),y(t.pedidosFiltrados.length),l(),h("ngIf",!t.mostrarTodos),l(),h("ngIf",t.mostrarTodos),l(5),S("$",O(16,4,t.calcularTotalMostrado(),"1.2-2"),"")}}function Et(d,e){if(d&1){let t=F();V(0),i(1,"button",235),g("click",function(){let r=c(t).index,s=p(2);return u(s.cambiarPaginaPedidos(r+1))}),a(2),o(),z()}if(d&2){let t=e.index,n=p(2);l(),Y("bg-amber-600",n.paginaPedidos===t+1)("text-white",n.paginaPedidos===t+1),l(),S(" ",t+1," ")}}function yt(d,e){if(d&1){let t=F();i(0,"div",232)(1,"nav",233)(2,"button",234),g("click",function(){c(t);let r=p();return u(r.cambiarPaginaPedidos(r.paginaPedidos-1))}),a(3," Anterior "),o(),C(4,Et,3,5,"ng-container",210),i(5,"button",234),g("click",function(){c(t);let r=p();return u(r.cambiarPaginaPedidos(r.paginaPedidos+1))}),a(6," Siguiente "),o()()()}if(d&2){let t=p();l(2),h("disabled",t.paginaPedidos===1),l(2),h("ngForOf",le(3,Ze).constructor(t.totalPaginasPedidos)),l(),h("disabled",t.paginaPedidos===t.totalPaginasPedidos)}}var J=class d{constructor(e){this.supabaseService=e}clienteBusqueda="";clientesFiltrados=[];paginaActual=1;clientesPorPagina=5;terminoBusqueda="";nombre="";telefono="";direccion="";modalUsuarioAbierto=!1;clientes=[];pedido={cliente_id:null,fecha:St(),estado_pago:"pendiente",total:0,observaciones:"",tipo:"Almuerzo",cantidad:1};tiposDeAlmuerzo=[];precio=0;almuerzoSeleccionado=null;preciosDelCliente=[];clientesConPrecios=[];clienteSeleccionadoId=null;datosClienteConPrecios=[];pedidos=[];cargando=!1;error=null;fechaInicio="";fechaFin="";todosLosPedidos=[];nombreBusqueda="";pedidosFiltrados=[];mostrarTodos=!0;estadoFiltro="";paginaPedidos=1;pedidosPorPagina=10;modalAbierto=!1;clienteEdit=null;Math=Math;getInitials(e){if(!e)return"";let t=e.trim().split(/\s+/);return t.length===1?t[0].substring(0,2).toUpperCase():t.slice(0,2).map(n=>n[0].toUpperCase()).join("")}modalPedidoAbierto=!1;preciosTemporales=[];nuevoPrecio={almuerzo_id:"",precio:0};ngOnInit(){return A(this,null,function*(){this.cargarClientesConPrecios(),this.cargarPedidos();try{let e=yield this.supabaseService.obtenerTiposDeAlmuerzo();this.tiposDeAlmuerzo=e.map(t=>q(R({},t),{cantidad:0}))}catch(e){alert("Error al cargar los tipos de almuerzo"),console.error(e)}})}guardarClienteConPrecios(){return A(this,null,function*(){try{if(this.preciosTemporales.length===0)throw new Error("Debe agregar al menos un precio de almuerzo");let e=yield this.supabaseService.crearClienteConPrecios(this.nombre,this.telefono??void 0,this.direccion??void 0,this.preciosTemporales);T.default.fire({icon:"success",title:"Cliente y precios guardados",text:"El cliente y sus precios fueron registrados correctamente",timer:2e3,showConfirmButton:!1}),this.clienteBusqueda="",this.clienteSeleccionadoId=null,this.clientesFiltrados=[],this.resetForm(),this.cerrarModalUsuario(),this.cargarClientesConPrecios()}catch(e){T.default.fire({icon:"error",title:"Error al guardar",text:e.message||"Ocurri\xF3 un error inesperado"})}})}agregarPrecioTemporal(){if(!this.almuerzoSeleccionado||this.precio<=0)return;let e=this.tiposDeAlmuerzo.find(t=>t.id===this.almuerzoSeleccionado);this.preciosTemporales.push({almuerzo_id:this.almuerzoSeleccionado,precio:this.precio,nombreAlmuerzo:e?.nombre}),this.almuerzoSeleccionado=null,this.precio=0}eliminarPrecioTemporal(e){this.preciosTemporales.splice(e,1)}resetForm(){this.nombre="",this.telefono="",this.direccion="",this.precio=0,this.almuerzoSeleccionado=null,this.preciosTemporales=[]}cargarClientesConPrecios(){return A(this,null,function*(){try{let e=yield this.supabaseService.obtenerClientesConPrecios(),t=new Map;e.forEach(n=>{let r=n.clientes.id;t.has(r)||t.set(r,{id:r,nombre:n.clientes.nombre,telefono:n.clientes.telefono,direccion:n.clientes.direccion,activo:n.clientes.activo,almuerzos:[]}),t.get(r).almuerzos.push({id:n.almuerzos.id,nombre:n.almuerzos.nombre,precio:n.precio})}),this.clientesConPrecios=Array.from(t.values()).sort((n,r)=>n.activo!==r.activo?Number(r.activo)-Number(n.activo):n.nombre.localeCompare(r.nombre)),this.clientes=this.clientesConPrecios.map(n=>({id:n.id,nombre:n.nombre,telefono:n.telefono,direccion:n.direccion}))}catch(e){console.error("Error cargando clientes con precios",e)}})}preventBlur(e){e.preventDefault()}onBlurCliente(){setTimeout(()=>{!this.clienteSeleccionadoId&&this.clienteBusqueda&&(this.clienteBusqueda="",this.clientesFiltrados=[],this.onClienteSeleccionado())},200)}mostrarListaClientes=!1;filtrarClientes(){if(!this.clienteBusqueda){this.clientesFiltrados=[],this.mostrarListaClientes=!1,this.clienteSeleccionadoId=null,this.onClienteSeleccionado();return}let e=this.clienteBusqueda.toLowerCase();this.clientesFiltrados=this.clientes.filter(t=>t.nombre.toLowerCase().includes(e)).sort((t,n)=>Number(n.activo)-Number(t.activo)),this.mostrarListaClientes=!0}cerrarListaSiNoSeleccionado(){setTimeout(()=>{this.clienteSeleccionadoId||(this.mostrarListaClientes=!1,this.clienteBusqueda="")},200)}seleccionarCliente(e){this.clienteSeleccionadoId=e.id,this.clienteBusqueda=e.nombre,this.mostrarListaClientes=!1,this.onClienteSeleccionado()}onClienteSeleccionado(){return A(this,null,function*(){if(this.clienteSeleccionadoId)try{this.datosClienteConPrecios=yield this.supabaseService.obtenerClienteConPrecios(this.clienteSeleccionadoId),this.tiposDeAlmuerzo.forEach(e=>{let t=this.datosClienteConPrecios.find(n=>n.almuerzos.id===e.id);e.precio=t?t.precio:0,e.cantidad=0}),this.pedido.cliente_id=this.clienteSeleccionadoId}catch(e){T.default.fire({icon:"error",title:"Error al cargar datos del cliente",text:e.message||"No se pudieron obtener los datos"})}else this.datosClienteConPrecios=[],this.tiposDeAlmuerzo.forEach(e=>{e.precio=0,e.cantidad=0}),this.pedido.cliente_id=null})}abrirModalUsuario(){this.modalUsuarioAbierto=!0}cerrarModalUsuario(){this.modalUsuarioAbierto=!1}guardarPedido(){return A(this,null,function*(){try{if(!this.pedido.cliente_id){yield T.default.fire({icon:"warning",title:"Cliente requerido",text:"Debe seleccionar un cliente antes de guardar el pedido."});return}let e=this.tiposDeAlmuerzo.filter(s=>s.cantidad&&s.cantidad>0).map(s=>({almuerzo_id:s.id,cantidad:s.cantidad}));if(e.length===0){yield T.default.fire({icon:"warning",title:"Atenci\xF3n",text:"Debe seleccionar al menos un tipo de almuerzo con cantidad mayor a 0"});return}let t=this.calcularTotal(this.tiposDeAlmuerzo.filter(s=>s.cantidad&&s.cantidad>0)),n={cliente_id:this.pedido.cliente_id,fecha:this.pedido.fecha,estado_pago:this.pedido.estado_pago||"pendiente",observaciones:this.pedido.observaciones||"",total:t,almuerzos:e},r=yield this.supabaseService.crearPedidoAlmuerzos(n);yield T.default.fire({icon:"success",title:"\xC9xito",text:"Pedido creado correctamente!"}),this.clienteBusqueda="",this.clienteSeleccionadoId=null,this.pedido.cliente_id=null,this.clientesFiltrados=[],this.resetearFormulario(),this.cargarPedidos()}catch(e){console.error("Error al guardar:",e),yield T.default.fire({icon:"error",title:"Error",text:e.message||"Ocurri\xF3 un error inesperado"})}})}calcularTotal(e){return e.reduce((t,n)=>t+(n.precio??0)*(n.cantidad||0),0)}resetearFormulario(){this.pedido={cliente_id:null,fecha:new Date().toISOString().split("T")[0],estado_pago:"pendiente",total:0,observaciones:"",tipo:"Almuerzo",cantidad:1}}get clientesBuscados(){if(!this.terminoBusqueda.trim())return this.clientesConPrecios;let e=this.terminoBusqueda.toLowerCase();return this.clientesConPrecios.filter(t=>t.nombre.toLowerCase().includes(e))}get clientesPaginados(){let e=(this.paginaActual-1)*this.clientesPorPagina;return this.clientesBuscados.slice(e,e+this.clientesPorPagina)}get totalPaginas(){return Math.ceil(this.clientesBuscados.length/this.clientesPorPagina)}cambiarPagina(e){e>=1&&e<=this.totalPaginas&&(this.paginaActual=e)}cargarPedidos(){return A(this,null,function*(){this.cargando=!0,this.error=null;try{let e=yield this.supabaseService.obtenerPedidosConDetalle();this.pedidos=e.map(t=>q(R({},t),{tieneAlmuerzosValidos:t.pedidos_almuerzo?.some(n=>n.almuerzos!==null)||!1})),this.pedidosFiltrados=[...this.pedidos],this.mostrarTodos=!0,console.log(this.pedidosFiltrados)}catch(e){this.error=e.message||"Error al cargar pedidos"}finally{this.cargando=!1}})}getEstadoClase(e){switch(e?.toLowerCase()){case"pagado":return"bg-green-100 text-green-800";case"pendiente":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}filtrarPorNombre(){if(!this.nombreBusqueda){this.pedidosFiltrados=[...this.pedidos];return}this.pedidosFiltrados=this.pedidos.filter(e=>e.clientes?.nombre?.toLowerCase().includes(this.nombreBusqueda.toLowerCase())),this.mostrarTodos=!1}filtrarPorFechas(){return A(this,null,function*(){if(!(!this.fechaInicio||!this.fechaFin)){this.cargando=!0;try{let e=yield this.supabaseService.obtenerPedidosConDetalleFiltrado(this.fechaInicio,this.fechaFin);this.pedidosFiltrados=e,this.mostrarTodos=!1,this.nombreBusqueda&&this.filtrarPorNombre()}catch(e){console.error("Error al filtrar pedidos:",e)}finally{this.cargando=!1}}})}calcularTotalMostrado(){return this.pedidosFiltrados.reduce((e,t)=>e+(t.total||0),0)}limpiarFiltros(){this.nombreBusqueda="",this.fechaInicio="",this.fechaFin="",this.estadoFiltro="",this.cargarPedidos()}filtrarPedidos(){return A(this,null,function*(){this.cargando=!0;try{if(this.fechaInicio&&this.fechaFin){let e=yield this.supabaseService.obtenerPedidosConDetalleFiltrado(this.fechaInicio,this.fechaFin);this.pedidosFiltrados=e,this.mostrarTodos=!1}else this.pedidosFiltrados=[...this.pedidos],this.mostrarTodos=!0;this.nombreBusqueda&&(this.pedidosFiltrados=this.pedidosFiltrados.filter(e=>e.clientes?.nombre?.toLowerCase().includes(this.nombreBusqueda.toLowerCase())),this.mostrarTodos=!1),this.estadoFiltro&&(this.pedidosFiltrados=this.pedidosFiltrados.filter(e=>e.estado_pago?.toLowerCase()===this.estadoFiltro)),this.pedidosFiltrados.sort((e,t)=>new Date(e.fecha).getTime()-new Date(t.fecha).getTime())}catch(e){console.error("Error al filtrar pedidos:",e)}finally{this.cargando=!1}})}get pedidosPaginados(){let e=(this.paginaPedidos-1)*this.pedidosPorPagina;return this.pedidosFiltrados.slice(e,e+this.pedidosPorPagina)}get totalPaginasPedidos(){return Math.ceil(this.pedidosFiltrados.length/this.pedidosPorPagina)}cambiarPaginaPedidos(e){e>=1&&e<=this.totalPaginasPedidos&&(this.paginaPedidos=e,this.cargarClientesConPrecios())}toggleEstadoCliente(e){return A(this,null,function*(){let t=!e.activo;try{yield this.supabaseService.cambiarEstadoCliente(e.id,t),e.activo=t,T.default.fire({icon:"success",title:t?"Cliente activado":"Cliente eliminado",timer:1500,showConfirmButton:!1})}catch(n){T.default.fire({icon:"error",title:"Error",text:n.message||"No se pudo actualizar el estado del cliente"})}})}abrirModalEditarCliente(e){this.clienteEdit=JSON.parse(JSON.stringify(e)),this.modalAbierto=!0}cerrarModal(){this.modalAbierto=!1,this.clienteEdit=null}guardarCambiosCliente(){return A(this,null,function*(){if(this.clienteEdit)try{yield this.supabaseService.actualizarClienteConPrecios(this.clienteEdit.id,this.clienteEdit.nombre,this.clienteEdit.telefono,this.clienteEdit.direccion,this.clienteEdit.almuerzos.map(e=>({almuerzo_id:e.id,precio:Number(e.precio)}))),T.default.fire("\xA1\xC9xito!","Cliente actualizado correctamente","success"),this.cerrarModal(),this.cargarPedidos(),this.cargarClientesConPrecios()}catch(e){T.default.fire("Error",e.message||"No se pudo actualizar","error")}})}marcarPedidosFiltradosComoPagados(){return A(this,null,function*(){try{if(!this.pedidosFiltrados.length){yield T.default.fire({icon:"info",title:"Sin pedidos",text:"No hay pedidos filtrados para actualizar."});return}let e=this.pedidosFiltrados[0].clientes?.nombre||"Cliente desconocido",t=this.pedidosFiltrados.reduce((s,m)=>s+(m.total||0),0);if(!(yield T.default.fire({html:`
  <div style="
    font-family: 'Segoe UI', sans-serif;
    background-color: #fef3c7;
    padding: 16px;
    border-radius: 12px;
    border: 1px solid #fcd34d;
    color: #78350f;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  ">
    <h3 style="margin-top: 0; font-size: 18px; font-weight: bold; display: flex; align-items: center;">
      \u{1F4E6} Confirmaci\xF3n de pago masivo
    </h3>

    <p style="margin: 8px 0;">
      Vas a marcar como <strong>pagados</strong> los pedidos del siguiente cliente:
    </p>

    <div style="
      background-color: #fde68a;
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 10px;
    ">
      \u{1F464} ${e}
    </div>

    <p style="margin: 6px 0;"><strong>Rango de fechas:</strong></p>
    <ul style="list-style: none; padding-left: 0; margin: 0 0 10px 0;">
      <li>\u{1F4C5} <strong>Desde:</strong>  ${this.formatearFecha(this.fechaInicio)}</li>
      <li>\u{1F4C5} <strong>Hasta:</strong>  ${this.formatearFecha(this.fechaFin)}</li>
    </ul>

    <p style="font-size: 15px; margin: 8px 0;"><strong>Total a pagar:</strong></p>
    <div style="
      background-color: #bbf7d0;
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 18px;
      color: #065f46;
      display: inline-block;
      margin-bottom: 10px;
    ">
      \u{1F4B5} S/ ${t.toFixed(2)}
    </div>

    <hr style="margin: 12px 0; border: none; border-top: 1px solid #facc15;" />

    <p style="text-align: center; font-weight: 500;">\xBFDeseas continuar con esta acci\xF3n?</p>
  </div>
`,showCancelButton:!0,confirmButtonText:"\u2705 S\xED, marcar como pagados",cancelButtonText:"\u274C Cancelar",confirmButtonColor:"#16a34a",cancelButtonColor:"#dc2626"})).isConfirmed)return;let r=this.pedidosFiltrados.map(s=>s.id);yield this.supabaseService.actualizarEstadoPagado(r),yield T.default.fire({icon:"success",title:"Pagos actualizados",text:`Se marcaron ${r.length} pedidos como pagados.`}),this.limpiarFiltros(),this.cargarPedidos()}catch(e){console.error("Error actualizando pagos:",e),yield T.default.fire({icon:"error",title:"Error",text:"No se pudieron actualizar los pagos."})}})}get botonActualizarDeshabilitado(){return!this.pedidosFiltrados?.length||this.estadoFiltro!=="pendiente"?!0:this.pedidosFiltrados.every(e=>e.estado_pago==="pagado")}get filtrosAplicados(){let e=!!this.fechaInicio&&!!this.fechaFin,t=!!this.nombreBusqueda&&this.nombreBusqueda.trim()!=="",n=this.estadoFiltro==="pendiente"||this.estadoFiltro==="pagado";return e&&t&&n}formatearFecha(e){let[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r).toLocaleDateString("es-PE",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}cargarLogo(){return A(this,null,function*(){let t=yield(yield fetch("assets/splash/logo.jpg")).blob();return new Promise(n=>{let r=new FileReader;r.onloadend=()=>n(r.result),r.readAsDataURL(t)})})}generarPDF(){return A(this,null,function*(){let e=new Le({orientation:"portrait",unit:"mm",format:"a4"}),t=e.internal.pageSize.getWidth(),n=e.internal.pageSize.getHeight();e.setTextColor(240,240,240),e.setDrawColor(240,240,240),e.setFontSize(60),e.setFont("helvetica","bold"),e.text("A FUEGO LENTO",t/2,n/2,{align:"center",angle:45,renderingMode:"fill"}),e.setFillColor(248,248,248),e.setDrawColor(220,220,220),e.setLineWidth(.5),e.rect(10,8,t-20,26,"FD");try{let _=yield this.getBase64ImageFromURL("assets/splash/logo.jpg");e.addImage(_,"JPEG",15,10,25,15)}catch(_){console.warn("No se pudo cargar el logo:",_)}e.setFont("helvetica","bold"),e.setTextColor(50,50,50),e.setFontSize(16),e.text("A FUEGO LENTO",t/2,16,{align:"center"}),e.setFontSize(9),e.setFont("helvetica","normal"),e.setTextColor(80,80,80),["RUC: 1500956527001","Tel: 0958910306"].forEach((_,I)=>{e.text(_,t/2,22+I*4,{align:"center"})}),e.setFontSize(8),e.setTextColor(100,100,100),e.text(`Documento N\xB0: ${this.generarNumeroDocumento()}`,t-15,12,{align:"right"}),e.text(`Fecha de emisi\xF3n: ${new Date().toLocaleDateString("es-PE")}`,t-15,16,{align:"right"}),e.setFillColor(60,60,60),e.rect(t/2-35,38,70,8,"F"),e.setFontSize(12),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.text("REPORTE DE PAGOS",t/2,44,{align:"center"});let s=this.nombreBusqueda?`CLIENTE: ${this.nombreBusqueda.toUpperCase()}`:"",m=this.estadoFiltro?`ESTADO DE PAGO: ${this.estadoFiltro.toUpperCase()}`:"",Be=this.fechaInicio&&this.fechaFin?`PER\xCDODO: ${this.formatearFecha(this.fechaInicio)} HASTA ${this.formatearFecha(this.fechaFin)}`:"",L=15,H=t-30,X=24,B=2,ee=10,Ne=7;if(e.setFillColor(245,245,245),e.roundedRect(L,50,H,X,B,B,"F"),e.setDrawColor(200,200,200),e.setLineWidth(.5),e.roundedRect(L,50,H,X,B,B,"S"),e.setFontSize(10),e.setTextColor(60,60,60),e.setFont("helvetica","bold"),e.text(s,L+ee,58),this.estadoFiltro){let _=L+H-70,I=60,P=7;this.estadoFiltro.toUpperCase()==="PENDIENTE"?(e.setFillColor(255,235,235),e.setDrawColor(255,180,180)):(e.setFillColor(235,255,235),e.setDrawColor(180,255,180)),e.roundedRect(_,54,I,P,1,1,"FD"),e.setTextColor(80,80,80),e.setFontSize(9),e.text(m,_+I/2,58,{align:"center"})}e.setFont("helvetica","normal"),e.setTextColor(80,80,80),e.text(Be,L+ee,58+Ne);let Re=this.pedidosFiltrados.map(_=>{let P=_.pedidos_almuerzo?.some(k=>k.almuerzos!==null)?_.pedidos_almuerzo.filter(k=>k.almuerzos!==null).map(k=>`${k.almuerzos.nombre} (${k.cantidad})`).join(", "):_.observaciones||"Sin detalles",N=_.estado_pago?.toUpperCase();return[this.formatearFecha(_.fecha),P,`$/ ${_.total?.toFixed(2)}`,N]});yield Ve(e,{head:[["FECHA","DETALLE","TOTAL"]],body:Re,startY:78,headStyles:{fillColor:[240,240,240],textColor:[50,50,50],fontStyle:"bold",halign:"center",lineWidth:.5,lineColor:[200,200,200]},bodyStyles:{textColor:[60,60,60],fontSize:9,lineWidth:.3,lineColor:[230,230,230]},alternateRowStyles:{fillColor:[248,248,248]},columnStyles:{0:{cellWidth:"auto",halign:"center"},1:{cellWidth:"auto",halign:"left"},2:{cellWidth:28,halign:"right",fontStyle:"bold"}},styles:{cellPadding:4,overflow:"linebreak",font:"helvetica",valign:"middle"},margin:{left:15,right:15},tableLineColor:[210,210,210],tableLineWidth:.4,didDrawCell:_=>{if(_.column.index===3&&_.row.section==="body"){let I=_.cell.text[0],P=_.cell.x+5,N=_.cell.y+2,k=_.cell.width-10,ne=_.cell.height-4;return I==="PENDIENTE"?(e.setFillColor(255,235,235),e.setDrawColor(255,180,180)):(e.setFillColor(235,255,235),e.setDrawColor(180,255,180)),e.roundedRect(P,N,k,ne,1,1,"FD"),e.setTextColor(80,80,80),e.setFontSize(8),e.setFont("helvetica","bold"),e.text(I,P+k/2,N+ne/2+1,{align:"center",baseline:"middle"}),!0}return!1}});let te=e.lastAutoTable?.finalY||100;e.setFontSize(10),e.setFont("helvetica","bold"),e.setTextColor(50,50,50);let je=this.pedidosFiltrados.reduce((_,I)=>_+(I.total||0),0);e.text(`TOTAL GENERAL: $/ ${je.toFixed(2)}`,t-15,te+12,{align:"right"}),e.setDrawColor(180,180,180),e.setLineWidth(.3);let W=20,U=te+30,ie=60;e.line(W,U,W+ie,U),e.setFontSize(8),e.setTextColor(120,120,120),e.text("Firma y Sello",W+ie/2,U+5,{align:"center"}),e.save(`Reporte_pagos_${new Date().toISOString().slice(0,10)}.pdf`)})}generarNumeroDocumento(e="CL"){let t=new Date,n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}${s}`}getBase64ImageFromURL(e){return new Promise((t,n)=>{let r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{let s=document.createElement("canvas"),m=s.getContext("2d");s.height=r.height,s.width=r.width,m?.drawImage(r,0,0),t(s.toDataURL("image/jpeg"))},r.onerror=s=>n(s),r.src=e})}static \u0275fac=function(t){return new(t||d)(G(Oe))};static \u0275cmp=Q({type:d,selectors:[["app-almuerzos-contrato"]],decls:156,vars:30,consts:[["sinClientes",""],["clienteForm","ngForm"],["nombreInput","ngModel"],["telefonoInput","ngModel"],["mostrarObservaciones",""],["class","fixed inset-0 z-50 backdrop-blur flex items-center justify-center p-4","role","dialog","aria-modal","true","aria-labelledby","modalUsuarioTitulo",4,"ngIf"],[1,"min-h-screen","bg-gray-50","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-600"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden","mb-8"],[1,"p-6","border-b","border-gray-100"],[1,"flex","flex-col","md:flex-row","md:justify-between","md:items-center","gap-4"],[1,"text-xl","font-bold","text-gray-800","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","mr-2","text-orange-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"flex","flex-col","md:flex-row","gap-4","w-full","md:w-auto"],[1,"relative","w-full","md:w-72"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Buscar cliente...",1,"w-full","pl-10","border","border-gray-300","rounded-lg","px-4","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-orange-300",3,"ngModelChange","ngModel"],["aria-label","Abrir modal para nuevo usuario",1,"bg-orange-600","text-white","px-5","py-2.5","rounded-lg","hover:bg-orange-700","transition-all","shadow-md","hover:shadow-lg","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"overflow-x-auto"],[4,"ngIf","ngIfElse"],[1,"px-6","py-3","bg-gray-50","border-t","border-gray-200","flex","flex-col","md:flex-row","items-center","justify-between","gap-2"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","gap-2"],[1,"px-3","py-1","border","border-gray-300","rounded-md","text-sm","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",4,"ngIf"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden","mb-8","border","border-gray-200"],[1,"p-6","border-b","border-gray-100","bg-gradient-to-r","from-orange-50","to-amber-50"],[1,"text-2xl","font-bold","text-gray-800"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","p-6"],[1,"space-y-6"],[1,"space-y-1"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"relative"],["type","text","placeholder","Buscar cliente...",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","input","blur","ngModel"],["class","absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["for","fechaPedido",1,"block","text-sm","font-medium","text-gray-700"],["id","fechaPedido","type","date",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","ngModel"],[1,"space-y-2"],[1,"flex","gap-4"],[1,"inline-flex","items-center"],["type","radio","name","payment","value","pendiente",1,"h-4","w-4","text-orange-600","focus:ring-orange-500","border-gray-300",3,"ngModelChange","ngModel"],[1,"ml-2","text-gray-700"],["type","radio","name","payment","value","pagado",1,"h-4","w-4","text-orange-600","focus:ring-orange-500","border-gray-300",3,"ngModelChange","ngModel"],[1,"border","border-gray-200","rounded-lg","divide-y","divide-gray-200","max-h-72","overflow-y-auto"],["class","p-3 hover:bg-orange-50 transition-colors",4,"ngFor","ngForOf"],[1,"text-gray-500"],["type","text","readonly","","aria-label","Precio Total",1,"w-full","pl-10","border","border-gray-300","rounded-lg","px-4","py-2.5","bg-gray-50","text-gray-700","font-medium",3,"value"],["rows","3","placeholder","Comentarios adicionales...",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2.5","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","ngModel"],[1,"px-6","pb-6"],[1,"w-full","bg-orange-600","hover:bg-orange-700","text-white","font-medium","py-3","px-4","rounded-lg","shadow-md","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2",3,"click"],[1,"bg-white","rounded-xl","shadow-lg","overflow-hidden","mb-8","border","border-gray-100"],[1,"bg-gradient-to-r","from-amber-700","to-amber-600","px-6","py-4","rounded-t-xl","shadow-sm"],[1,"flex","justify-center","mb-4"],[1,"text-xl","font-bold","text-white","tracking-tight","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"flex","flex-col","items-center","space-y-3","md:space-y-0","md:flex-row","md:flex-wrap","md:justify-center","gap-3"],[1,"relative","w-full","md:w-64"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-amber-200"],["type","text","placeholder","Buscar cliente...",1,"block","w-full","pl-10","pr-3","py-1.5","border","border-amber-500","bg-amber-600/50","text-white","rounded-md","leading-5","placeholder-amber-200","focus:outline-none","focus:ring-2","focus:ring-amber-300","focus:border-amber-300","sm:text-sm",3,"ngModelChange","input","ngModel"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-amber-100"],["type","date","aria-label","FechaInicio",1,"bg-amber-600/50","border","border-amber-500","text-white","rounded-md","px-3","py-1.5","text-sm","focus:ring-2","focus:ring-amber-300","focus:border-amber-300","transition-all","duration-200","w-full","md:w-40",3,"ngModelChange","change","ngModel"],["type","date","aria-label","FechaFin",1,"bg-amber-600/50","border","border-amber-500","text-white","rounded-md","px-3","py-1.5","text-sm","focus:ring-2","focus:ring-amber-300","focus:border-amber-300","transition-all","duration-200","w-full","md:w-40",3,"ngModelChange","change","ngModel"],["aria-label","estado",1,"bg-amber-600/50","border","border-amber-500","text-white","rounded-md","px-3","py-1.5","text-sm","focus:ring-2","focus:ring-amber-300","focus:border-amber-300","transition-all","duration-200",3,"ngModelChange","change","ngModel"],["value",""],["value","pagado"],["value","pendiente"],[1,"bg-amber-800","hover:bg-amber-700","text-amber-100","px-3","py-1.5","rounded","text-sm","font-medium","transition-colors","flex","items-center","gap-1","shadow-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow transition-colors",3,"click",4,"ngIf"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-1.5","rounded","text-sm","font-medium","transition-colors","flex","items-center","gap-1","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],[1,"min-w-full","divide-y","divide-amber-100"],[1,"bg-amber-50"],[1,"px-6","py-3","text-left","text-xs","font-semibold","text-amber-800","uppercase","tracking-wider","border-b","border-amber-100"],[1,"bg-white","divide-y","divide-amber-50"],["class","hover:bg-amber-50/50 transition-colors duration-150",4,"ngFor","ngForOf"],[4,"ngIf"],["class","bg-amber-50 px-6 py-4 border-t border-amber-100",4,"ngIf"],["class","flex justify-center mt-4",4,"ngIf"],["role","dialog","aria-modal","true","aria-labelledby","modalUsuarioTitulo",1,"fixed","inset-0","z-50","backdrop-blur","flex","items-center","justify-center","p-4"],[1,"bg-white","rounded-xl","shadow-lg","max-w-xl","w-full","relative","border","border-orange-300","animate-fade-in"],["aria-label","Cerrar modal nuevo usuario",1,"absolute","top-2","right-2","text-gray-500","hover:text-orange-600","transition-colors","text-2xl","font-bold",3,"click"],[1,"p-6"],[1,"flex","items-center","gap-2","mb-5"],[1,"bg-orange-100","p-1.5","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["id","modalUsuarioTitulo",1,"text-xl","font-bold","text-gray-900"],[1,"space-y-4"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-3"],["for","nombre",1,"block","text-xs","font-medium","text-gray-700","mb-1"],["id","nombre","name","nombre","required","","placeholder","Nombre completo",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:ring-2","focus:ring-orange-400","focus:border-orange-400","outline-none","text-sm",3,"ngModelChange","ngModel"],["class","text-red-600 text-xs mt-1",4,"ngIf"],["for","telefono",1,"block","text-xs","font-medium","text-gray-700","mb-1"],["id","telefono","name","telefono","type","tel","pattern","[0-9]{7,15}","placeholder","N\xFAmero de tel\xE9fono",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:ring-2","focus:ring-orange-400","focus:border-orange-400","outline-none","text-sm",3,"ngModelChange","ngModel"],["for","direccion",1,"block","text-xs","font-medium","text-gray-700","mb-1"],["id","direccion","name","direccion","placeholder","Direcci\xF3n completa",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:ring-2","focus:ring-orange-400","focus:border-orange-400","outline-none","text-sm",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","pt-4"],[1,"text-sm","font-semibold","text-gray-900","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-3","mb-3"],["for","almuerzo",1,"block","text-xs","font-medium","text-gray-700","mb-1"],["id","almuerzo","name","almuerzoSeleccionado",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:ring-2","focus:ring-orange-400","focus:border-orange-400","outline-none","text-sm",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","precio",1,"block","text-xs","font-medium","text-gray-700","mb-1"],["id","precio","type","number","min","0","step","0.01","name","precio","placeholder","Precio",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:ring-2","focus:ring-orange-400","focus:border-orange-400","outline-none","text-sm",3,"ngModelChange","ngModel"],[1,"flex","items-end"],["type","button",1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","py-2","rounded-md","transition","disabled:opacity-50","disabled:cursor-not-allowed","flex","justify-center","items-center","gap-1","text-sm",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","border-t border-gray-200 pt-3 max-h-36 overflow-y-auto",4,"ngIf"],["type","button",1,"w-full","bg-orange-600","hover:bg-orange-700","text-white","font-semibold","py-2","rounded-md","transition-shadow","shadow-md","hover:shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","text-sm",3,"click","disabled"],[1,"text-red-600","text-xs","mt-1"],[3,"value"],[1,"border-t","border-gray-200","pt-3","max-h-36","overflow-y-auto"],[1,"text-sm","font-semibold","text-gray-900","mb-2"],["class","flex justify-between items-center bg-gray-50 p-2 rounded-md shadow-sm text-sm",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","bg-gray-50","p-2","rounded-md","shadow-sm","text-sm"],[1,"text-gray-600","ml-1"],["type","button","title","Eliminar",1,"text-red-600","hover:text-red-800","p-1","rounded","transition",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4"],[1,"flex","items-center"],[1,"h-10","w-10","rounded-full","bg-orange-100","flex","items-center","justify-center","text-orange-800","font-bold"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500","mt-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","text-gray-900"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium",3,"ngClass"],["class","flex justify-between items-center",4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium","space-x-2"],[1,"text-orange-600","hover:text-orange-900","inline-flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"inline-flex","items-center",3,"click","ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex","justify-between","items-center"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-sm","text-gray-900","font-semibold"],[1,"p-6","text-center"],[1,"bg-amber-100","p-4","rounded-lg","inline-block","max-w-md"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10","text-amber-500","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"mt-2","font-medium","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],[1,"mt-3","bg-orange-600","text-white","px-4","py-2","rounded-lg","text-sm","hover:bg-orange-700","transition-colors","inline-flex","items-center",3,"click"],[1,"fixed","inset-0","bg-black/40","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4","overflow-y-auto"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-md","relative"],["aria-label","Cerrar modal",1,"absolute","top-4","right-4","text-gray-500","hover:text-gray-700","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],[1,"bg-amber-600","px-6","py-4","rounded-t-lg"],[1,"text-xl","font-bold","text-white","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],[1,"p-6","space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","name","nombre","aria-label","nombre","required","","placeholder","Nombre completo",1,"pl-10","w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500",3,"ngModelChange","ngModel"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["type","text","name","telefono","aria-label","telefono","placeholder","N\xFAmero de contacto",1,"pl-10","w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500",3,"ngModelChange","ngModel"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["type","text","name","direccion","aria-label","direcion","placeholder","Direcci\xF3n completa",1,"pl-10","w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500",3,"ngModelChange","ngModel"],[1,"text-sm","font-medium","text-gray-700","mb-3"],["class","mb-3",4,"ngFor","ngForOf"],[1,"flex","justify-end","gap-3","pt-4"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-500",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-amber-600","hover:bg-amber-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-amber-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","inline","mr-1","-mt-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mb-3"],["type","number","min","0","step","0.01","aria-label","precio","required","","placeholder","0.00",1,"pl-10","w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500",3,"ngModelChange","ngModel","name"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-60","overflow-auto"],["class","px-4 py-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-0 flex items-center",3,"click","mousedown",4,"ngFor","ngForOf"],[1,"px-4","py-3","hover:bg-orange-50","cursor-pointer","border-b","border-gray-100","last:border-0","flex","items-center",3,"click","mousedown"],[1,"bg-orange-100","text-orange-800","rounded-full","w-8","h-8","flex","items-center","justify-center","mr-3","text-sm","font-medium"],[1,"p-3","hover:bg-orange-50","transition-colors"],[1,"flex","items-center","justify-between","gap-4"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-800","truncate"],[1,"text-xs","text-gray-500","truncate"],["type","number","min","0","aria-label","Cantidad del almuerzo",1,"w-20","border","border-gray-300","rounded-lg","px-3","py-1.5","text-center","focus:ring-2","focus:ring-orange-500","focus:border-orange-500",3,"ngModelChange","ngModel"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded","shadow","transition-colors",3,"click"],[1,"hover:bg-amber-50/50","transition-colors","duration-150"],[1,"h-10","w-10","rounded-full","bg-amber-100","flex","items-center","justify-center","text-amber-700","font-medium","text-sm","border","border-amber-200"],[1,"ml-3"],[1,"flex","flex-wrap","gap-2"],[1,"text-sm","text-gray-900","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-amber-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-base","font-bold","text-amber-700"],[1,"px-3","py-1.5","inline-flex","text-xs","leading-5","font-semibold","rounded-full","shadow-sm",3,"ngClass"],[1,"w-2","h-2","rounded-full","mr-1.5",3,"ngClass"],[4,"ngFor","ngForOf"],["class","inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",3,"ngClass",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-full","text-xs","font-medium","shadow-sm",3,"ngClass"],[1,"ml-1.5","bg-white","text-gray-800","font-bold","rounded-full","w-5","h-5","flex","items-center","justify-center","text-xs","shadow-inner"],[1,"text-sm","italic","text-gray-600"],["colspan","5",1,"px-6","py-16","text-center"],[1,"flex","flex-col","items-center","justify-center","text-gray-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","mb-3","text-amber-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-medium","text-gray-500","text-lg"],[1,"text-sm","text-gray-400","mt-1"],[1,"mt-4","bg-amber-100","hover:bg-amber-200","text-amber-700","px-4","py-2","rounded-full","text-sm","font-medium","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"bg-amber-50","px-6","py-4","border-t","border-amber-100"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-3"],[1,"text-sm","text-amber-700","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-amber-500"],[1,"font-medium","text-gray-900"],["class","text-gray-600",4,"ngIf"],[1,"text-sm","font-medium","text-amber-700","bg-white","px-4","py-2","rounded-full","shadow-sm","border","border-amber-100"],[1,"text-gray-500","mr-1"],[1,"text-amber-600","font-bold"],[1,"flex","justify-center","mt-4"],[1,"inline-flex","items-center","space-x-2"],[1,"px-3","py-1.5","bg-white","text-amber-700","border","border-amber-300","rounded","hover:bg-amber-100","disabled:opacity-50",3,"click","disabled"],[1,"px-3","py-1.5","border","border-amber-300","rounded","text-amber-700","hover:bg-amber-100",3,"click"]],template:function(t,n){if(t&1){let r=F();C(0,nt,54,11,"div",5),i(1,"div",6)(2,"header",7)(3,"h1",8),a(4,"Sistema de Control de Almuerzos"),o(),i(5,"p",9),a(6,"Gesti\xF3n de clientes y pedidos"),o()(),i(7,"div",10)(8,"div",11)(9,"div",12)(10,"h2",13),b(),i(11,"svg",14),f(12,"path",15),o(),a(13," Clientes Registrados "),o(),E(),i(14,"div",16)(15,"div",17)(16,"div",18),b(),i(17,"svg",19),f(18,"path",20),o()(),E(),i(19,"input",21),w("ngModelChange",function(m){return c(r),v(n.terminoBusqueda,m)||(n.terminoBusqueda=m),u(m)}),o()(),i(20,"button",22),g("click",function(){return c(r),u(n.abrirModalUsuario())}),b(),i(21,"svg",23),f(22,"path",24),o(),a(23," Nuevo Cliente "),o()()()(),E(),i(24,"div",25),C(25,at,14,1,"div",26)(26,st,12,0,"ng-template",null,0,j),o(),i(28,"div",27)(29,"div",28),a(30," Mostrando "),i(31,"span",29),a(32),o(),a(33," a "),i(34,"span",29),a(35),o(),a(36," de "),i(37,"span",29),a(38),o(),a(39," clientes "),o(),i(40,"div",30)(41,"button",31),g("click",function(){return c(r),u(n.cambiarPagina(n.paginaActual-1))}),a(42," Anterior "),o(),i(43,"button",31),g("click",function(){return c(r),u(n.cambiarPagina(n.paginaActual+1))}),a(44," Siguiente "),o()()()(),C(45,dt,47,4,"div",32),i(46,"div",33)(47,"div",34)(48,"h2",35),a(49,"Nuevo Pedido"),o()(),i(50,"div",36)(51,"div",37)(52,"div",38)(53,"label",39),a(54,"Cliente"),o(),i(55,"div",40)(56,"input",41),w("ngModelChange",function(m){return c(r),v(n.clienteBusqueda,m)||(n.clienteBusqueda=m),u(m)}),g("input",function(){return c(r),u(n.filtrarClientes())})("blur",function(){return c(r),u(n.cerrarListaSiNoSeleccionado())}),o(),C(57,ut,2,1,"ul",42),o()(),i(58,"div",38)(59,"label",43),a(60,"Fecha"),o(),i(61,"input",44),w("ngModelChange",function(m){return c(r),v(n.pedido.fecha,m)||(n.pedido.fecha=m),u(m)}),o()(),i(62,"div",45)(63,"label",39),a(64,"Estado de Pago"),o(),i(65,"div",46)(66,"label",47)(67,"input",48),w("ngModelChange",function(m){return c(r),v(n.pedido.estado_pago,m)||(n.pedido.estado_pago=m),u(m)}),o(),i(68,"span",49),a(69,"Pendiente"),o()(),i(70,"label",47)(71,"input",50),w("ngModelChange",function(m){return c(r),v(n.pedido.estado_pago,m)||(n.pedido.estado_pago=m),u(m)}),o(),i(72,"span",49),a(73,"Pagado"),o()()()()(),i(74,"div",37)(75,"div",45)(76,"label",39),a(77,"Tipos de Almuerzo"),o(),i(78,"div",51),C(79,mt,8,3,"div",52),o()(),i(80,"div",38)(81,"label",39),a(82,"Precio Total"),o(),i(83,"div",40)(84,"div",18)(85,"span",53),a(86,"S/"),o()(),f(87,"input",54),D(88,"number"),o()(),i(89,"div",38)(90,"label",39),a(91,"Observaciones"),o(),i(92,"textarea",55),w("ngModelChange",function(m){return c(r),v(n.pedido.observaciones,m)||(n.pedido.observaciones=m),u(m)}),o()()()(),i(93,"div",56)(94,"button",57),g("click",function(){return c(r),u(n.guardarPedido())}),a(95," Guardar Pedido "),o()()(),i(96,"div",58)(97,"div",59)(98,"div",60)(99,"h2",61),b(),i(100,"svg",62),f(101,"path",63),o(),a(102," REPORTE DIARIO DE PEDIDOS "),o()(),E(),i(103,"div",64)(104,"div",65)(105,"div",18),b(),i(106,"svg",66),f(107,"path",20),o()(),E(),i(108,"input",67),w("ngModelChange",function(m){return c(r),v(n.nombreBusqueda,m)||(n.nombreBusqueda=m),u(m)}),g("input",function(){return c(r),u(n.filtrarPedidos())}),o()(),i(109,"div",68)(110,"span",69),a(111,"Desde:"),o(),i(112,"input",70),w("ngModelChange",function(m){return c(r),v(n.fechaInicio,m)||(n.fechaInicio=m),u(m)}),g("change",function(){return c(r),u(n.filtrarPedidos())}),o()(),i(113,"div",68)(114,"span",69),a(115,"Hasta:"),o(),i(116,"input",71),w("ngModelChange",function(m){return c(r),v(n.fechaFin,m)||(n.fechaFin=m),u(m)}),g("change",function(){return c(r),u(n.filtrarPedidos())}),o()(),i(117,"div",68)(118,"label",69),a(119,"Estado:"),o(),i(120,"select",72),w("ngModelChange",function(m){return c(r),v(n.estadoFiltro,m)||(n.estadoFiltro=m),u(m)}),g("change",function(){return c(r),u(n.filtrarPedidos())}),i(121,"option",73),a(122,"Todos"),o(),i(123,"option",74),a(124,"Pagados"),o(),i(125,"option",75),a(126,"Pendientes"),o()()(),i(127,"div",30)(128,"button",76),g("click",function(){return c(r),u(n.limpiarFiltros())}),b(),i(129,"svg",77),f(130,"path",78),o(),a(131," Limpiar "),o()(),C(132,pt,2,0,"button",79),E(),i(133,"button",80),g("click",function(){return c(r),u(n.generarPDF())}),b(),i(134,"svg",77),f(135,"path",81),o(),a(136," Exportar PDF "),o()()(),E(),i(137,"div",25)(138,"table",82)(139,"thead",83)(140,"tr")(141,"th",84),a(142,"CLIENTE"),o(),i(143,"th",84),a(144,"DETALLE"),o(),i(145,"th",84),a(146,"FECHA/HORA"),o(),i(147,"th",84),a(148,"TOTAL"),o(),i(149,"th",84),a(150,"ESTADO"),o()()(),i(151,"tbody",85),C(152,bt,29,17,"tr",86)(153,Ct,13,0,"tr",87),o()()(),C(154,wt,17,7,"div",88)(155,yt,7,4,"div",89),o()()}if(t&2){let r=M(27);h("ngIf",n.modalUsuarioAbierto),l(19),x("ngModel",n.terminoBusqueda),l(6),h("ngIf",n.clientesPaginados.length>0)("ngIfElse",r),l(7),y((n.paginaActual-1)*n.clientesPorPagina+1),l(3),y(n.Math.min(n.paginaActual*n.clientesPorPagina,n.clientesBuscados.length)),l(3),y(n.clientesBuscados.length),l(3),h("disabled",n.paginaActual===1),l(2),h("disabled",n.paginaActual===n.totalPaginas),l(2),h("ngIf",n.modalAbierto),l(11),x("ngModel",n.clienteBusqueda),l(),h("ngIf",n.mostrarListaClientes&&n.clientesFiltrados.length>0),l(4),x("ngModel",n.pedido.fecha),l(6),x("ngModel",n.pedido.estado_pago),l(4),x("ngModel",n.pedido.estado_pago),l(8),h("ngForOf",n.tiposDeAlmuerzo),l(8),h("value",O(88,27,n.calcularTotal(n.tiposDeAlmuerzo),"1.2-2")),l(5),x("ngModel",n.pedido.observaciones),l(16),x("ngModel",n.nombreBusqueda),l(4),x("ngModel",n.fechaInicio),l(4),x("ngModel",n.fechaFin),l(4),x("ngModel",n.estadoFiltro),l(12),h("ngIf",n.filtrosAplicados&&!n.botonActualizarDeshabilitado),l(20),h("ngForOf",n.pedidosPaginados),l(),h("ngIf",n.pedidosFiltrados.length===0),l(),h("ngIf",n.pedidosFiltrados.length>0),l(),h("ngIf",n.totalPaginasPedidos>1)}},dependencies:[be,ue,me,pe,fe,he,_e,ge,Pe,ye,Ae,Ie,Ce,Se,Fe,Te,xe,ve,De,Me,ke,Ee,we,ze],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .2s ease-out}"]})};function St(){let d=new Date,e=d.getFullYear(),t=(d.getMonth()+1).toString().padStart(2,"0"),n=d.getDate().toString().padStart(2,"0");return`${e}-${t}-${n}`}export{J as default};
